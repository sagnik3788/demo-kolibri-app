/*! For license information please see kolibri.plugins.device.app-0.16.0.js.LICENSE.txt */
!function(){var __webpack_modules__={6584:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,factory;function _typeof2(o){return _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof2(o)}module=__webpack_require__.nmd(module),factory=function(){return function(){var __webpack_modules__={686:function(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_1108__){"use strict";__nested_webpack_require_1108__.d(__nested_webpack_exports__,{default:function(){return clipboard}});var tiny_emitter=__nested_webpack_require_1108__(279),tiny_emitter_default=__nested_webpack_require_1108__.n(tiny_emitter),listen=__nested_webpack_require_1108__(370),listen_default=__nested_webpack_require_1108__.n(listen),src_select=__nested_webpack_require_1108__(817),select_default=__nested_webpack_require_1108__.n(src_select);function command(type){try{return document.execCommand(type)}catch(err){return!1}}var actions_cut=function(target){var selectedText=select_default()(target);return command("cut"),selectedText},fakeCopyAction=function(value,options){var fakeElement=function(value){var isRTL="rtl"===document.documentElement.getAttribute("dir"),fakeElement=document.createElement("textarea");fakeElement.style.fontSize="12pt",fakeElement.style.border="0",fakeElement.style.padding="0",fakeElement.style.margin="0",fakeElement.style.position="absolute",fakeElement.style[isRTL?"right":"left"]="-9999px";var yPosition=window.pageYOffset||document.documentElement.scrollTop;return fakeElement.style.top="".concat(yPosition,"px"),fakeElement.setAttribute("readonly",""),fakeElement.value=value,fakeElement}(value);options.container.appendChild(fakeElement);var selectedText=select_default()(fakeElement);return command("copy"),fakeElement.remove(),selectedText},actions_copy=function(target){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},selectedText="";return"string"==typeof target?selectedText=fakeCopyAction(target,options):target instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==target?void 0:target.type)?selectedText=fakeCopyAction(target.value,options):(selectedText=select_default()(target),command("copy")),selectedText};function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var actions_default=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options$action=options.action,action=void 0===_options$action?"copy":_options$action,container=options.container,target=options.target,text=options.text;if("copy"!==action&&"cut"!==action)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==target){if(!target||"object"!==_typeof(target)||1!==target.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===action&&target.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===action&&(target.hasAttribute("readonly")||target.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return text?actions_copy(text,{container:container}):target?"cut"===action?actions_cut(target):actions_copy(target,{container:container}):void 0};function clipboard_typeof(obj){return clipboard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},clipboard_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function(self,call){return!call||"object"!==clipboard_typeof(call)&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function getAttributeValue(suffix,element){var attribute="data-clipboard-".concat(suffix);if(element.hasAttribute(attribute))return element.getAttribute(attribute)}var Clipboard=function(_Emitter){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Clipboard,_Emitter);var Constructor,protoProps,staticProps,_super=_createSuper(Clipboard);function Clipboard(trigger,options){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Clipboard),(_this=_super.call(this)).resolveOptions(options),_this.listenClick(trigger),_this}return Constructor=Clipboard,protoProps=[{key:"resolveOptions",value:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof options.action?options.action:this.defaultAction,this.target="function"==typeof options.target?options.target:this.defaultTarget,this.text="function"==typeof options.text?options.text:this.defaultText,this.container="object"===clipboard_typeof(options.container)?options.container:document.body}},{key:"listenClick",value:function(trigger){var _this2=this;this.listener=listen_default()(trigger,"click",(function(e){return _this2.onClick(e)}))}},{key:"onClick",value:function(e){var trigger=e.delegateTarget||e.currentTarget,action=this.action(trigger)||"copy",text=actions_default({action:action,container:this.container,target:this.target(trigger),text:this.text(trigger)});this.emit(text?"success":"error",{action:action,text:text,trigger:trigger,clearSelection:function(){trigger&&trigger.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(trigger){return getAttributeValue("action",trigger)}},{key:"defaultTarget",value:function(trigger){var selector=getAttributeValue("target",trigger);if(selector)return document.querySelector(selector)}},{key:"defaultText",value:function(trigger){return getAttributeValue("text",trigger)}},{key:"destroy",value:function(){this.listener.destroy()}}],staticProps=[{key:"copy",value:function(target){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return actions_copy(target,options)}},{key:"cut",value:function(target){return actions_cut(target)}},{key:"isSupported",value:function(){var action=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],actions="string"==typeof action?[action]:action,support=!!document.queryCommandSupported;return actions.forEach((function(action){support=support&&!!document.queryCommandSupported(action)})),support}}],protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Clipboard}(tiny_emitter_default()),clipboard=Clipboard},828:function(module){if("undefined"!=typeof Element&&!Element.prototype.matches){var proto=Element.prototype;proto.matches=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector}module.exports=function(element,selector){for(;element&&9!==element.nodeType;){if("function"==typeof element.matches&&element.matches(selector))return element;element=element.parentNode}}},438:function(module,__unused_webpack_exports,__nested_webpack_require_19930__){var closest=__nested_webpack_require_19930__(828);function _delegate(element,selector,type,callback,useCapture){var listenerFn=listener.apply(this,arguments);return element.addEventListener(type,listenerFn,useCapture),{destroy:function(){element.removeEventListener(type,listenerFn,useCapture)}}}function listener(element,selector,type,callback){return function(e){e.delegateTarget=closest(e.target,selector),e.delegateTarget&&callback.call(element,e)}}module.exports=function(elements,selector,type,callback,useCapture){return"function"==typeof elements.addEventListener?_delegate.apply(null,arguments):"function"==typeof type?_delegate.bind(null,document).apply(null,arguments):("string"==typeof elements&&(elements=document.querySelectorAll(elements)),Array.prototype.map.call(elements,(function(element){return _delegate(element,selector,type,callback,useCapture)})))}},879:function(__unused_webpack_module,exports){exports.node=function(value){return void 0!==value&&value instanceof HTMLElement&&1===value.nodeType},exports.nodeList=function(value){var type=Object.prototype.toString.call(value);return void 0!==value&&("[object NodeList]"===type||"[object HTMLCollection]"===type)&&"length"in value&&(0===value.length||exports.node(value[0]))},exports.string=function(value){return"string"==typeof value||value instanceof String},exports.fn=function(value){return"[object Function]"===Object.prototype.toString.call(value)}},370:function(module,__unused_webpack_exports,__nested_webpack_require_24033__){var is=__nested_webpack_require_24033__(879),delegate=__nested_webpack_require_24033__(438);module.exports=function(target,type,callback){if(!target&&!type&&!callback)throw new Error("Missing required arguments");if(!is.string(type))throw new TypeError("Second argument must be a String");if(!is.fn(callback))throw new TypeError("Third argument must be a Function");if(is.node(target))return function(node,type,callback){return node.addEventListener(type,callback),{destroy:function(){node.removeEventListener(type,callback)}}}(target,type,callback);if(is.nodeList(target))return function(nodeList,type,callback){return Array.prototype.forEach.call(nodeList,(function(node){node.addEventListener(type,callback)})),{destroy:function(){Array.prototype.forEach.call(nodeList,(function(node){node.removeEventListener(type,callback)}))}}}(target,type,callback);if(is.string(target))return function(selector,type,callback){return delegate(document.body,selector,type,callback)}(target,type,callback);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(module){module.exports=function(element){var selectedText;if("SELECT"===element.nodeName)element.focus(),selectedText=element.value;else if("INPUT"===element.nodeName||"TEXTAREA"===element.nodeName){var isReadOnly=element.hasAttribute("readonly");isReadOnly||element.setAttribute("readonly",""),element.select(),element.setSelectionRange(0,element.value.length),isReadOnly||element.removeAttribute("readonly"),selectedText=element.value}else{element.hasAttribute("contenteditable")&&element.focus();var selection=window.getSelection(),range=document.createRange();range.selectNodeContents(element),selection.removeAllRanges(),selection.addRange(range),selectedText=selection.toString()}return selectedText}},279:function(module){function E(){}E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});return(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx}),this},once:function(name,callback,ctx){var self=this;function listener(){self.off(name,listener),callback.apply(ctx,arguments)}return listener._=callback,this.on(name,listener,ctx)},emit:function(name){for(var data=[].slice.call(arguments,1),evtArr=((this.e||(this.e={}))[name]||[]).slice(),i=0,len=evtArr.length;i<len;i++)evtArr[i].fn.apply(evtArr[i].ctx,data);return this},off:function(name,callback){var e=this.e||(this.e={}),evts=e[name],liveEvents=[];if(evts&&callback)for(var i=0,len=evts.length;i<len;i++)evts[i].fn!==callback&&evts[i].fn._!==callback&&liveEvents.push(evts[i]);return liveEvents.length?e[name]=liveEvents:delete e[name],this}},module.exports=E,module.exports.TinyEmitter=E}},__webpack_module_cache__={};function __nested_webpack_require_30551__(moduleId){if(__webpack_module_cache__[moduleId])return __webpack_module_cache__[moduleId].exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__nested_webpack_require_30551__),module.exports}return __nested_webpack_require_30551__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __nested_webpack_require_30551__.d(getter,{a:getter}),getter},__nested_webpack_require_30551__.d=function(exports,definition){for(var key in definition)__nested_webpack_require_30551__.o(definition,key)&&!__nested_webpack_require_30551__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__nested_webpack_require_30551__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},__nested_webpack_require_30551__(686)}().default},"object"===_typeof2(exports)&&"object"===_typeof2(module)?module.exports=factory():(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},1301:function(module,__unused_webpack_exports,__webpack_require__){var DataView=__webpack_require__(696)(__webpack_require__(9942),"DataView");module.exports=DataView},8238:function(module,__unused_webpack_exports,__webpack_require__){var hashClear=__webpack_require__(4601),hashDelete=__webpack_require__(554),hashGet=__webpack_require__(8675),hashHas=__webpack_require__(8297),hashSet=__webpack_require__(6341);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},5059:function(module,__unused_webpack_exports,__webpack_require__){var baseCreate=__webpack_require__(2169),baseLodash=__webpack_require__(5805);function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,module.exports=LazyWrapper},4378:function(module,__unused_webpack_exports,__webpack_require__){var listCacheClear=__webpack_require__(2700),listCacheDelete=__webpack_require__(8063),listCacheGet=__webpack_require__(3940),listCacheHas=__webpack_require__(1579),listCacheSet=__webpack_require__(6750);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},6016:function(module,__unused_webpack_exports,__webpack_require__){var baseCreate=__webpack_require__(2169),baseLodash=__webpack_require__(5805);function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=void 0}LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,module.exports=LodashWrapper},7121:function(module,__unused_webpack_exports,__webpack_require__){var Map=__webpack_require__(696)(__webpack_require__(9942),"Map");module.exports=Map},6180:function(module,__unused_webpack_exports,__webpack_require__){var mapCacheClear=__webpack_require__(8581),mapCacheDelete=__webpack_require__(1421),mapCacheGet=__webpack_require__(683),mapCacheHas=__webpack_require__(1882),mapCacheSet=__webpack_require__(2627);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},123:function(module,__unused_webpack_exports,__webpack_require__){var Promise=__webpack_require__(696)(__webpack_require__(9942),"Promise");module.exports=Promise},2438:function(module,__unused_webpack_exports,__webpack_require__){var Set=__webpack_require__(696)(__webpack_require__(9942),"Set");module.exports=Set},2017:function(module,__unused_webpack_exports,__webpack_require__){var MapCache=__webpack_require__(6180),setCacheAdd=__webpack_require__(2255),setCacheHas=__webpack_require__(6990);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},7654:function(module,__unused_webpack_exports,__webpack_require__){var ListCache=__webpack_require__(4378),stackClear=__webpack_require__(6303),stackDelete=__webpack_require__(495),stackGet=__webpack_require__(4866),stackHas=__webpack_require__(2018),stackSet=__webpack_require__(6342);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},6572:function(module,__unused_webpack_exports,__webpack_require__){var _Symbol=__webpack_require__(9942).Symbol;module.exports=_Symbol},9591:function(module,__unused_webpack_exports,__webpack_require__){var Uint8Array=__webpack_require__(9942).Uint8Array;module.exports=Uint8Array},823:function(module,__unused_webpack_exports,__webpack_require__){var WeakMap=__webpack_require__(696)(__webpack_require__(9942),"WeakMap");module.exports=WeakMap},1720:function(module){module.exports=function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}},7617:function(module){module.exports=function(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}},3901:function(module){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}},6611:function(module){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}},9571:function(module){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},23:function(module,__unused_webpack_exports,__webpack_require__){var baseIndexOf=__webpack_require__(7012);module.exports=function(array,value){return!!(null==array?0:array.length)&&baseIndexOf(array,value,0)>-1}},5415:function(module){module.exports=function(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}},956:function(module,__unused_webpack_exports,__webpack_require__){var baseTimes=__webpack_require__(7661),isArguments=__webpack_require__(7263),isArray=__webpack_require__(3234),isBuffer=__webpack_require__(1295),isIndex=__webpack_require__(3380),isTypedArray=__webpack_require__(5202),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},4887:function(module){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},3268:function(module){module.exports=function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},9509:function(module){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},2025:function(module,__unused_webpack_exports,__webpack_require__){var baseAssignValue=__webpack_require__(4588),eq=__webpack_require__(1859),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}},9097:function(module,__unused_webpack_exports,__webpack_require__){var eq=__webpack_require__(1859);module.exports=function(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},4165:function(module,__unused_webpack_exports,__webpack_require__){var baseEach=__webpack_require__(9353);module.exports=function(collection,setter,iteratee,accumulator){return baseEach(collection,(function(value,key,collection){setter(accumulator,value,iteratee(value),collection)})),accumulator}},417:function(module,__unused_webpack_exports,__webpack_require__){var copyObject=__webpack_require__(5945),keys=__webpack_require__(4434);module.exports=function(object,source){return object&&copyObject(source,keys(source),object)}},4811:function(module,__unused_webpack_exports,__webpack_require__){var copyObject=__webpack_require__(5945),keysIn=__webpack_require__(3398);module.exports=function(object,source){return object&&copyObject(source,keysIn(source),object)}},4588:function(module,__unused_webpack_exports,__webpack_require__){var defineProperty=__webpack_require__(9975);module.exports=function(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}},2368:function(module,__unused_webpack_exports,__webpack_require__){var Stack=__webpack_require__(7654),arrayEach=__webpack_require__(3901),assignValue=__webpack_require__(2025),baseAssign=__webpack_require__(417),baseAssignIn=__webpack_require__(4811),cloneBuffer=__webpack_require__(4057),copyArray=__webpack_require__(1315),copySymbols=__webpack_require__(3273),copySymbolsIn=__webpack_require__(2109),getAllKeys=__webpack_require__(4329),getAllKeysIn=__webpack_require__(1817),getTag=__webpack_require__(3219),initCloneArray=__webpack_require__(5432),initCloneByTag=__webpack_require__(341),initCloneObject=__webpack_require__(3738),isArray=__webpack_require__(3234),isBuffer=__webpack_require__(1295),isMap=__webpack_require__(7024),isObject=__webpack_require__(8255),isSet=__webpack_require__(7525),keys=__webpack_require__(4434),keysIn=__webpack_require__(3398),cloneableTags={};cloneableTags["[object Arguments]"]=cloneableTags["[object Array]"]=cloneableTags["[object ArrayBuffer]"]=cloneableTags["[object DataView]"]=cloneableTags["[object Boolean]"]=cloneableTags["[object Date]"]=cloneableTags["[object Float32Array]"]=cloneableTags["[object Float64Array]"]=cloneableTags["[object Int8Array]"]=cloneableTags["[object Int16Array]"]=cloneableTags["[object Int32Array]"]=cloneableTags["[object Map]"]=cloneableTags["[object Number]"]=cloneableTags["[object Object]"]=cloneableTags["[object RegExp]"]=cloneableTags["[object Set]"]=cloneableTags["[object String]"]=cloneableTags["[object Symbol]"]=cloneableTags["[object Uint8Array]"]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags["[object Uint16Array]"]=cloneableTags["[object Uint32Array]"]=!0,cloneableTags["[object Error]"]=cloneableTags["[object Function]"]=cloneableTags["[object WeakMap]"]=!1,module.exports=function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=1&bitmask,isFlat=2&bitmask,isFull=4&bitmask;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc="[object Function]"==tag||"[object GeneratorFunction]"==tag;if(isBuffer(value))return cloneBuffer(value,isDeep);if("[object Object]"==tag||"[object Arguments]"==tag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result),isSet(value)?value.forEach((function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))})):isMap(value)&&value.forEach((function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))}));var props=isArr?void 0:(isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys)(value);return arrayEach(props||value,(function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))})),result}},2169:function(module,__unused_webpack_exports,__webpack_require__){var isObject=__webpack_require__(8255),objectCreate=Object.create,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}();module.exports=baseCreate},6478:function(module,__unused_webpack_exports,__webpack_require__){var SetCache=__webpack_require__(2017),arrayIncludes=__webpack_require__(23),arrayIncludesWith=__webpack_require__(5415),arrayMap=__webpack_require__(4887),baseUnary=__webpack_require__(4418),cacheHas=__webpack_require__(5143);module.exports=function(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=200&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=null==iteratee?value:iteratee(value);if(value=comparator||0!==value?value:0,isCommon&&computed==computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}},9353:function(module,__unused_webpack_exports,__webpack_require__){var baseForOwn=__webpack_require__(5393),baseEach=__webpack_require__(1330)(baseForOwn);module.exports=baseEach},3278:function(module,__unused_webpack_exports,__webpack_require__){var baseEach=__webpack_require__(9353);module.exports=function(collection,predicate){var result=!0;return baseEach(collection,(function(value,index,collection){return result=!!predicate(value,index,collection)})),result}},8267:function(module){module.exports=function(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}},246:function(module,__unused_webpack_exports,__webpack_require__){var arrayPush=__webpack_require__(3268),isFlattenable=__webpack_require__(9004);module.exports=function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}},8852:function(module,__unused_webpack_exports,__webpack_require__){var baseFor=__webpack_require__(4005)();module.exports=baseFor},5393:function(module,__unused_webpack_exports,__webpack_require__){var baseFor=__webpack_require__(8852),keys=__webpack_require__(4434);module.exports=function(object,iteratee){return object&&baseFor(object,iteratee,keys)}},5886:function(module,__unused_webpack_exports,__webpack_require__){var castPath=__webpack_require__(1902),toKey=__webpack_require__(9117);module.exports=function(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},9070:function(module,__unused_webpack_exports,__webpack_require__){var arrayPush=__webpack_require__(3268),isArray=__webpack_require__(3234);module.exports=function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},9238:function(module,__unused_webpack_exports,__webpack_require__){var _Symbol=__webpack_require__(6572),getRawTag=__webpack_require__(7993),objectToString=__webpack_require__(9201),symToStringTag=_Symbol?_Symbol.toStringTag:void 0;module.exports=function(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},5165:function(module){module.exports=function(object,key){return null!=object&&key in Object(object)}},7012:function(module,__unused_webpack_exports,__webpack_require__){var baseFindIndex=__webpack_require__(8267),baseIsNaN=__webpack_require__(2406),strictIndexOf=__webpack_require__(2119);module.exports=function(array,value,fromIndex){return value==value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}},6006:function(module,__unused_webpack_exports,__webpack_require__){var baseGetTag=__webpack_require__(9238),isObjectLike=__webpack_require__(2440);module.exports=function(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}},5890:function(module,__unused_webpack_exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(1762),isObjectLike=__webpack_require__(2440);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},1762:function(module,__unused_webpack_exports,__webpack_require__){var Stack=__webpack_require__(7654),equalArrays=__webpack_require__(4456),equalByTag=__webpack_require__(8331),equalObjects=__webpack_require__(6236),getTag=__webpack_require__(3219),isArray=__webpack_require__(3234),isBuffer=__webpack_require__(1295),isTypedArray=__webpack_require__(5202),objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag="[object Arguments]"==objTag?objectTag:objTag)==objectTag,othIsObj=(othTag="[object Arguments]"==othTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},977:function(module,__unused_webpack_exports,__webpack_require__){var getTag=__webpack_require__(3219),isObjectLike=__webpack_require__(2440);module.exports=function(value){return isObjectLike(value)&&"[object Map]"==getTag(value)}},390:function(module,__unused_webpack_exports,__webpack_require__){var Stack=__webpack_require__(7654),baseIsEqual=__webpack_require__(5890);module.exports=function(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}},2406:function(module){module.exports=function(value){return value!=value}},5851:function(module,__unused_webpack_exports,__webpack_require__){var isFunction=__webpack_require__(9405),isMasked=__webpack_require__(6943),isObject=__webpack_require__(8255),toSource=__webpack_require__(407),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},7640:function(module,__unused_webpack_exports,__webpack_require__){var getTag=__webpack_require__(3219),isObjectLike=__webpack_require__(2440);module.exports=function(value){return isObjectLike(value)&&"[object Set]"==getTag(value)}},3451:function(module,__unused_webpack_exports,__webpack_require__){var baseGetTag=__webpack_require__(9238),isLength=__webpack_require__(8438),isObjectLike=__webpack_require__(2440),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},814:function(module,__unused_webpack_exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var baseMatches=__webpack_require__(1163),baseMatchesProperty=__webpack_require__(1775),identity=__webpack_require__(3376),isArray=__webpack_require__(3234),property=__webpack_require__(3723);module.exports=function(value){return"function"==typeof value?value:null==value?identity:"object"==_typeof(value)?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}},9170:function(module,__unused_webpack_exports,__webpack_require__){var isPrototype=__webpack_require__(9801),nativeKeys=__webpack_require__(8008),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},752:function(module,__unused_webpack_exports,__webpack_require__){var isObject=__webpack_require__(8255),isPrototype=__webpack_require__(9801),nativeKeysIn=__webpack_require__(7120),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}},5805:function(module){module.exports=function(){}},3437:function(module,__unused_webpack_exports,__webpack_require__){var baseEach=__webpack_require__(9353),isArrayLike=__webpack_require__(4873);module.exports=function(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,(function(value,key,collection){result[++index]=iteratee(value,key,collection)})),result}},1163:function(module,__unused_webpack_exports,__webpack_require__){var baseIsMatch=__webpack_require__(390),getMatchData=__webpack_require__(3364),matchesStrictComparable=__webpack_require__(4296);module.exports=function(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}},1775:function(module,__unused_webpack_exports,__webpack_require__){var baseIsEqual=__webpack_require__(5890),get=__webpack_require__(9631),hasIn=__webpack_require__(5131),isKey=__webpack_require__(1734),isStrictComparable=__webpack_require__(3004),matchesStrictComparable=__webpack_require__(4296),toKey=__webpack_require__(9117);module.exports=function(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}},4263:function(module,__unused_webpack_exports,__webpack_require__){var arrayMap=__webpack_require__(4887),baseGet=__webpack_require__(5886),baseIteratee=__webpack_require__(814),baseMap=__webpack_require__(3437),baseSortBy=__webpack_require__(6580),baseUnary=__webpack_require__(4418),compareMultiple=__webpack_require__(8931),identity=__webpack_require__(3376),isArray=__webpack_require__(3234);module.exports=function(collection,iteratees,orders){iteratees=iteratees.length?arrayMap(iteratees,(function(iteratee){return isArray(iteratee)?function(value){return baseGet(value,1===iteratee.length?iteratee[0]:iteratee)}:iteratee})):[identity];var index=-1;iteratees=arrayMap(iteratees,baseUnary(baseIteratee));var result=baseMap(collection,(function(value,key,collection){return{criteria:arrayMap(iteratees,(function(iteratee){return iteratee(value)})),index:++index,value:value}}));return baseSortBy(result,(function(object,other){return compareMultiple(object,other,orders)}))}},8900:function(module,__unused_webpack_exports,__webpack_require__){var basePickBy=__webpack_require__(9453),hasIn=__webpack_require__(5131);module.exports=function(object,paths){return basePickBy(object,paths,(function(value,path){return hasIn(object,path)}))}},9453:function(module,__unused_webpack_exports,__webpack_require__){var baseGet=__webpack_require__(5886),baseSet=__webpack_require__(9566),castPath=__webpack_require__(1902);module.exports=function(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}},7677:function(module){module.exports=function(key){return function(object){return null==object?void 0:object[key]}}},5713:function(module,__unused_webpack_exports,__webpack_require__){var baseGet=__webpack_require__(5886);module.exports=function(path){return function(object){return baseGet(object,path)}}},3889:function(module,__unused_webpack_exports,__webpack_require__){var identity=__webpack_require__(3376),overRest=__webpack_require__(5384),setToString=__webpack_require__(1561);module.exports=function(func,start){return setToString(overRest(func,start,identity),func+"")}},9566:function(module,__unused_webpack_exports,__webpack_require__){var assignValue=__webpack_require__(2025),castPath=__webpack_require__(1902),isIndex=__webpack_require__(3380),isObject=__webpack_require__(8255),toKey=__webpack_require__(9117);module.exports=function(object,path,value,customizer){if(!isObject(object))return object;for(var index=-1,length=(path=castPath(path,object)).length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=toKey(path[index]),newValue=value;if("__proto__"===key||"constructor"===key||"prototype"===key)return object;if(index!=lastIndex){var objValue=nested[key];void 0===(newValue=customizer?customizer(objValue,key,nested):void 0)&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})}assignValue(nested,key,newValue),nested=nested[key]}return object}},9437:function(module,__unused_webpack_exports,__webpack_require__){var identity=__webpack_require__(3376),metaMap=__webpack_require__(7870),baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity;module.exports=baseSetData},6543:function(module,__unused_webpack_exports,__webpack_require__){var constant=__webpack_require__(6447),defineProperty=__webpack_require__(9975),identity=__webpack_require__(3376),baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},1024:function(module){module.exports=function(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},6684:function(module,__unused_webpack_exports,__webpack_require__){var baseEach=__webpack_require__(9353);module.exports=function(collection,predicate){var result;return baseEach(collection,(function(value,index,collection){return!(result=predicate(value,index,collection))})),!!result}},6580:function(module){module.exports=function(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}},9317:function(module){module.exports=function(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);void 0!==current&&(result=void 0===result?current:result+current)}return result}},7661:function(module){module.exports=function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},5655:function(module,__unused_webpack_exports,__webpack_require__){var _Symbol=__webpack_require__(6572),arrayMap=__webpack_require__(4887),isArray=__webpack_require__(3234),isSymbol=__webpack_require__(4851),symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}},6598:function(module,__unused_webpack_exports,__webpack_require__){var trimmedEndIndex=__webpack_require__(4935),reTrimStart=/^\s+/;module.exports=function(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}},4418:function(module){module.exports=function(func){return function(value){return func(value)}}},3129:function(module,__unused_webpack_exports,__webpack_require__){var SetCache=__webpack_require__(2017),arrayIncludes=__webpack_require__(23),arrayIncludesWith=__webpack_require__(5415),cacheHas=__webpack_require__(5143),createSet=__webpack_require__(2777),setToArray=__webpack_require__(8306);module.exports=function(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=200){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}},8570:function(module,__unused_webpack_exports,__webpack_require__){var castPath=__webpack_require__(1902),last=__webpack_require__(2236),parent=__webpack_require__(5899),toKey=__webpack_require__(9117);module.exports=function(object,path){return path=castPath(path,object),null==(object=parent(object,path))||delete object[toKey(last(path))]}},5143:function(module){module.exports=function(cache,key){return cache.has(key)}},5084:function(module,__unused_webpack_exports,__webpack_require__){var identity=__webpack_require__(3376);module.exports=function(value){return"function"==typeof value?value:identity}},1902:function(module,__unused_webpack_exports,__webpack_require__){var isArray=__webpack_require__(3234),isKey=__webpack_require__(1734),stringToPath=__webpack_require__(4384),toString=__webpack_require__(1404);module.exports=function(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},9258:function(module,__unused_webpack_exports,__webpack_require__){var Uint8Array=__webpack_require__(9591);module.exports=function(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}},4057:function(module,exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}module=__webpack_require__.nmd(module);var root=__webpack_require__(9942),freeExports="object"==_typeof(exports)&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==_typeof(module)&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;module.exports=function(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}},6941:function(module,__unused_webpack_exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(9258);module.exports=function(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}},1576:function(module){var reFlags=/\w*$/;module.exports=function(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}},9288:function(module,__unused_webpack_exports,__webpack_require__){var _Symbol=__webpack_require__(6572),symbolProto=_Symbol?_Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}},1416:function(module,__unused_webpack_exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(9258);module.exports=function(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}},7919:function(module,__unused_webpack_exports,__webpack_require__){var isSymbol=__webpack_require__(4851);module.exports=function(value,other){if(value!==other){var valIsDefined=void 0!==value,valIsNull=null===value,valIsReflexive=value==value,valIsSymbol=isSymbol(value),othIsDefined=void 0!==other,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}},8931:function(module,__unused_webpack_exports,__webpack_require__){var compareAscending=__webpack_require__(7919);module.exports=function(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result)return index>=ordersLength?result:result*("desc"==orders[index]?-1:1)}return object.index-other.index}},8788:function(module){var nativeMax=Math.max;module.exports=function(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}},2223:function(module){var nativeMax=Math.max;module.exports=function(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}},1315:function(module){module.exports=function(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}},5945:function(module,__unused_webpack_exports,__webpack_require__){var assignValue=__webpack_require__(2025),baseAssignValue=__webpack_require__(4588);module.exports=function(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}},3273:function(module,__unused_webpack_exports,__webpack_require__){var copyObject=__webpack_require__(5945),getSymbols=__webpack_require__(6171);module.exports=function(source,object){return copyObject(source,getSymbols(source),object)}},2109:function(module,__unused_webpack_exports,__webpack_require__){var copyObject=__webpack_require__(5945),getSymbolsIn=__webpack_require__(1749);module.exports=function(source,object){return copyObject(source,getSymbolsIn(source),object)}},1142:function(module,__unused_webpack_exports,__webpack_require__){var coreJsData=__webpack_require__(9942)["__core-js_shared__"];module.exports=coreJsData},1406:function(module){module.exports=function(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}},8217:function(module,__unused_webpack_exports,__webpack_require__){var arrayAggregator=__webpack_require__(7617),baseAggregator=__webpack_require__(4165),baseIteratee=__webpack_require__(814),isArray=__webpack_require__(3234);module.exports=function(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator)}}},1330:function(module,__unused_webpack_exports,__webpack_require__){var isArrayLike=__webpack_require__(4873);module.exports=function(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}},4005:function(module){module.exports=function(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},6897:function(module,__unused_webpack_exports,__webpack_require__){var createCtor=__webpack_require__(7631),root=__webpack_require__(9942);module.exports=function(func,bitmask,thisArg){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(isBind?thisArg:this,arguments)}}},7631:function(module,__unused_webpack_exports,__webpack_require__){var baseCreate=__webpack_require__(2169),isObject=__webpack_require__(8255);module.exports=function(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}},3320:function(module,__unused_webpack_exports,__webpack_require__){var apply=__webpack_require__(1720),createCtor=__webpack_require__(7631),createHybrid=__webpack_require__(8843),createRecurry=__webpack_require__(9243),getHolder=__webpack_require__(5060),replaceHolders=__webpack_require__(6250),root=__webpack_require__(9942);module.exports=function(func,bitmask,arity){var Ctor=createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);return(length-=holders.length)<arity?createRecurry(func,bitmask,createHybrid,wrapper.placeholder,void 0,args,holders,void 0,void 0,arity-length):apply(this&&this!==root&&this instanceof wrapper?Ctor:func,this,args)}}},643:function(module,__unused_webpack_exports,__webpack_require__){var baseIteratee=__webpack_require__(814),isArrayLike=__webpack_require__(4873),keys=__webpack_require__(4434);module.exports=function(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=baseIteratee(predicate,3);collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:void 0}}},8843:function(module,__unused_webpack_exports,__webpack_require__){var composeArgs=__webpack_require__(8788),composeArgsRight=__webpack_require__(2223),countHolders=__webpack_require__(1406),createCtor=__webpack_require__(7631),createRecurry=__webpack_require__(9243),getHolder=__webpack_require__(5060),reorder=__webpack_require__(6634),replaceHolders=__webpack_require__(6250),root=__webpack_require__(9942);module.exports=function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=128&bitmask,isBind=1&bitmask,isBindKey=2&bitmask,isCurried=24&bitmask,isFlip=512&bitmask,Ctor=isBindKey?void 0:createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length;index--;)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);if(partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}}},5862:function(module,__unused_webpack_exports,__webpack_require__){var apply=__webpack_require__(1720),createCtor=__webpack_require__(7631),root=__webpack_require__(9942);module.exports=function(func,bitmask,thisArg,partials){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}}},9243:function(module,__unused_webpack_exports,__webpack_require__){var isLaziable=__webpack_require__(9740),setData=__webpack_require__(7419),setWrapToString=__webpack_require__(5189);module.exports=function(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=8&bitmask;bitmask|=isCurry?32:64,4&(bitmask&=~(isCurry?64:32))||(bitmask&=-4);var newData=[func,bitmask,thisArg,isCurry?partials:void 0,isCurry?holders:void 0,isCurry?void 0:partials,isCurry?void 0:holders,argPos,ary,arity],result=wrapFunc.apply(void 0,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}},2777:function(module,__unused_webpack_exports,__webpack_require__){var Set=__webpack_require__(2438),noop=__webpack_require__(7406),setToArray=__webpack_require__(8306),createSet=Set&&1/setToArray(new Set([,-0]))[1]==1/0?function(values){return new Set(values)}:noop;module.exports=createSet},7634:function(module,__unused_webpack_exports,__webpack_require__){var baseSetData=__webpack_require__(9437),createBind=__webpack_require__(6897),createCurry=__webpack_require__(3320),createHybrid=__webpack_require__(8843),createPartial=__webpack_require__(5862),getData=__webpack_require__(2829),mergeData=__webpack_require__(4827),setData=__webpack_require__(7419),setWrapToString=__webpack_require__(5189),toInteger=__webpack_require__(6183),nativeMax=Math.max;module.exports=function(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=2&bitmask;if(!isBindKey&&"function"!=typeof func)throw new TypeError("Expected a function");var length=partials?partials.length:0;if(length||(bitmask&=-97,partials=holders=void 0),ary=void 0===ary?ary:nativeMax(toInteger(ary),0),arity=void 0===arity?arity:toInteger(arity),length-=holders?holders.length:0,64&bitmask){var partialsRight=partials,holdersRight=holders;partials=holders=void 0}var data=isBindKey?void 0:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&mergeData(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],!(arity=newData[9]=void 0===newData[9]?isBindKey?0:func.length:nativeMax(newData[9]-length,0))&&24&bitmask&&(bitmask&=-25),bitmask&&1!=bitmask)result=8==bitmask||16==bitmask?createCurry(func,bitmask,arity):32!=bitmask&&33!=bitmask||holders.length?createHybrid.apply(void 0,newData):createPartial(func,bitmask,thisArg,partials);else var result=createBind(func,bitmask,thisArg);return setWrapToString((data?baseSetData:setData)(result,newData),func,bitmask)}},6592:function(module,__unused_webpack_exports,__webpack_require__){var isPlainObject=__webpack_require__(415);module.exports=function(value){return isPlainObject(value)?void 0:value}},9975:function(module,__unused_webpack_exports,__webpack_require__){var getNative=__webpack_require__(696),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},4456:function(module,__unused_webpack_exports,__webpack_require__){var SetCache=__webpack_require__(2017),arraySome=__webpack_require__(9509),cacheHas=__webpack_require__(5143);module.exports=function(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},8331:function(module,__unused_webpack_exports,__webpack_require__){var _Symbol=__webpack_require__(6572),Uint8Array=__webpack_require__(9591),eq=__webpack_require__(1859),equalArrays=__webpack_require__(4456),mapToArray=__webpack_require__(5364),setToArray=__webpack_require__(8306),symbolProto=_Symbol?_Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},6236:function(module,__unused_webpack_exports,__webpack_require__){var getAllKeys=__webpack_require__(4329),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}},6541:function(module,__unused_webpack_exports,__webpack_require__){var flatten=__webpack_require__(6678),overRest=__webpack_require__(5384),setToString=__webpack_require__(1561);module.exports=function(func){return setToString(overRest(func,void 0,flatten),func+"")}},5604:function(module,__unused_webpack_exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var freeGlobal="object"==(void 0===__webpack_require__.g?"undefined":_typeof(__webpack_require__.g))&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g;module.exports=freeGlobal},4329:function(module,__unused_webpack_exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(9070),getSymbols=__webpack_require__(6171),keys=__webpack_require__(4434);module.exports=function(object){return baseGetAllKeys(object,keys,getSymbols)}},1817:function(module,__unused_webpack_exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(9070),getSymbolsIn=__webpack_require__(1749),keysIn=__webpack_require__(3398);module.exports=function(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}},2829:function(module,__unused_webpack_exports,__webpack_require__){var metaMap=__webpack_require__(7870),noop=__webpack_require__(7406),getData=metaMap?function(func){return metaMap.get(func)}:noop;module.exports=getData},279:function(module,__unused_webpack_exports,__webpack_require__){var realNames=__webpack_require__(7402),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}},5060:function(module){module.exports=function(func){return func.placeholder}},2727:function(module,__unused_webpack_exports,__webpack_require__){var isKeyable=__webpack_require__(2857);module.exports=function(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},3364:function(module,__unused_webpack_exports,__webpack_require__){var isStrictComparable=__webpack_require__(3004),keys=__webpack_require__(4434);module.exports=function(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}},696:function(module,__unused_webpack_exports,__webpack_require__){var baseIsNative=__webpack_require__(5851),getValue=__webpack_require__(7033);module.exports=function(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},49:function(module,__unused_webpack_exports,__webpack_require__){var getPrototype=__webpack_require__(7293)(Object.getPrototypeOf,Object);module.exports=getPrototype},7993:function(module,__unused_webpack_exports,__webpack_require__){var _Symbol=__webpack_require__(6572),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},6171:function(module,__unused_webpack_exports,__webpack_require__){var arrayFilter=__webpack_require__(9571),stubArray=__webpack_require__(2608),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;module.exports=getSymbols},1749:function(module,__unused_webpack_exports,__webpack_require__){var arrayPush=__webpack_require__(3268),getPrototype=__webpack_require__(49),getSymbols=__webpack_require__(6171),stubArray=__webpack_require__(2608),getSymbolsIn=Object.getOwnPropertySymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray;module.exports=getSymbolsIn},3219:function(module,__unused_webpack_exports,__webpack_require__){var DataView=__webpack_require__(1301),Map=__webpack_require__(7121),Promise=__webpack_require__(123),Set=__webpack_require__(2438),WeakMap=__webpack_require__(823),baseGetTag=__webpack_require__(9238),toSource=__webpack_require__(407),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},7033:function(module){module.exports=function(object,key){return null==object?void 0:object[key]}},5368:function(module){var reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;module.exports=function(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}},5608:function(module,__unused_webpack_exports,__webpack_require__){var castPath=__webpack_require__(1902),isArguments=__webpack_require__(7263),isArray=__webpack_require__(3234),isIndex=__webpack_require__(3380),isLength=__webpack_require__(8438),toKey=__webpack_require__(9117);module.exports=function(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}},4601:function(module,__unused_webpack_exports,__webpack_require__){var nativeCreate=__webpack_require__(6178);module.exports=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},554:function(module){module.exports=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},8675:function(module,__unused_webpack_exports,__webpack_require__){var nativeCreate=__webpack_require__(6178),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},8297:function(module,__unused_webpack_exports,__webpack_require__){var nativeCreate=__webpack_require__(6178),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},6341:function(module,__unused_webpack_exports,__webpack_require__){var nativeCreate=__webpack_require__(6178);module.exports=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},5432:function(module){var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}},341:function(module,__unused_webpack_exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(9258),cloneDataView=__webpack_require__(6941),cloneRegExp=__webpack_require__(1576),cloneSymbol=__webpack_require__(9288),cloneTypedArray=__webpack_require__(1416);module.exports=function(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case"[object ArrayBuffer]":return cloneArrayBuffer(object);case"[object Boolean]":case"[object Date]":return new Ctor(+object);case"[object DataView]":return cloneDataView(object,isDeep);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return cloneTypedArray(object,isDeep);case"[object Map]":case"[object Set]":return new Ctor;case"[object Number]":case"[object String]":return new Ctor(object);case"[object RegExp]":return cloneRegExp(object);case"[object Symbol]":return cloneSymbol(object)}}},3738:function(module,__unused_webpack_exports,__webpack_require__){var baseCreate=__webpack_require__(2169),getPrototype=__webpack_require__(49),isPrototype=__webpack_require__(9801);module.exports=function(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}},7343:function(module){var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;module.exports=function(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}},9004:function(module,__unused_webpack_exports,__webpack_require__){var _Symbol=__webpack_require__(6572),isArguments=__webpack_require__(7263),isArray=__webpack_require__(3234),spreadableSymbol=_Symbol?_Symbol.isConcatSpreadable:void 0;module.exports=function(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}},3380:function(module){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function(value,length){var type=_typeof(value);return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},7055:function(module,__unused_webpack_exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var eq=__webpack_require__(1859),isArrayLike=__webpack_require__(4873),isIndex=__webpack_require__(3380),isObject=__webpack_require__(8255);module.exports=function(value,index,object){if(!isObject(object))return!1;var type=_typeof(index);return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}},1734:function(module,__unused_webpack_exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var isArray=__webpack_require__(3234),isSymbol=__webpack_require__(4851),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function(value,object){if(isArray(value))return!1;var type=_typeof(value);return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},2857:function(module){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}module.exports=function(value){var type=_typeof(value);return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},9740:function(module,__unused_webpack_exports,__webpack_require__){var LazyWrapper=__webpack_require__(5059),getData=__webpack_require__(2829),getFuncName=__webpack_require__(279),lodash=__webpack_require__(7193);module.exports=function(func){var funcName=getFuncName(func),other=lodash[funcName];if("function"!=typeof other||!(funcName in LazyWrapper.prototype))return!1;if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}},6943:function(module,__unused_webpack_exports,__webpack_require__){var uid,coreJsData=__webpack_require__(1142),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function(func){return!!maskSrcKey&&maskSrcKey in func}},9801:function(module){var objectProto=Object.prototype;module.exports=function(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},3004:function(module,__unused_webpack_exports,__webpack_require__){var isObject=__webpack_require__(8255);module.exports=function(value){return value==value&&!isObject(value)}},2700:function(module){module.exports=function(){this.__data__=[],this.size=0}},8063:function(module,__unused_webpack_exports,__webpack_require__){var assocIndexOf=__webpack_require__(9097),splice=Array.prototype.splice;module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},3940:function(module,__unused_webpack_exports,__webpack_require__){var assocIndexOf=__webpack_require__(9097);module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},1579:function(module,__unused_webpack_exports,__webpack_require__){var assocIndexOf=__webpack_require__(9097);module.exports=function(key){return assocIndexOf(this.__data__,key)>-1}},6750:function(module,__unused_webpack_exports,__webpack_require__){var assocIndexOf=__webpack_require__(9097);module.exports=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},8581:function(module,__unused_webpack_exports,__webpack_require__){var Hash=__webpack_require__(8238),ListCache=__webpack_require__(4378),Map=__webpack_require__(7121);module.exports=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},1421:function(module,__unused_webpack_exports,__webpack_require__){var getMapData=__webpack_require__(2727);module.exports=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},683:function(module,__unused_webpack_exports,__webpack_require__){var getMapData=__webpack_require__(2727);module.exports=function(key){return getMapData(this,key).get(key)}},1882:function(module,__unused_webpack_exports,__webpack_require__){var getMapData=__webpack_require__(2727);module.exports=function(key){return getMapData(this,key).has(key)}},2627:function(module,__unused_webpack_exports,__webpack_require__){var getMapData=__webpack_require__(2727);module.exports=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},5364:function(module){module.exports=function(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}},4296:function(module){module.exports=function(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}},4539:function(module,__unused_webpack_exports,__webpack_require__){var memoize=__webpack_require__(1527);module.exports=function(func){var result=memoize(func,(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}},4827:function(module,__unused_webpack_exports,__webpack_require__){var composeArgs=__webpack_require__(8788),composeArgsRight=__webpack_require__(2223),replaceHolders=__webpack_require__(6250),nativeMin=Math.min;module.exports=function(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<131,isCombo=128==srcBitmask&&8==bitmask||128==srcBitmask&&256==bitmask&&data[7].length<=source[8]||384==srcBitmask&&source[7].length<=source[8]&&8==bitmask;if(!isCommon&&!isCombo)return data;1&srcBitmask&&(data[2]=source[2],newBitmask|=1&bitmask?0:4);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],"__lodash_placeholder__"):source[4]}return(value=source[5])&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],"__lodash_placeholder__"):source[6]),(value=source[7])&&(data[7]=value),128&srcBitmask&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}},7870:function(module,__unused_webpack_exports,__webpack_require__){var WeakMap=__webpack_require__(823),metaMap=WeakMap&&new WeakMap;module.exports=metaMap},6178:function(module,__unused_webpack_exports,__webpack_require__){var nativeCreate=__webpack_require__(696)(Object,"create");module.exports=nativeCreate},8008:function(module,__unused_webpack_exports,__webpack_require__){var nativeKeys=__webpack_require__(7293)(Object.keys,Object);module.exports=nativeKeys},7120:function(module){module.exports=function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}},2057:function(module,exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}module=__webpack_require__.nmd(module);var freeGlobal=__webpack_require__(5604),freeExports="object"==_typeof(exports)&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==_typeof(module)&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil},9201:function(module){var nativeObjectToString=Object.prototype.toString;module.exports=function(value){return nativeObjectToString.call(value)}},7293:function(module){module.exports=function(func,transform){return function(arg){return func(transform(arg))}}},5384:function(module,__unused_webpack_exports,__webpack_require__){var apply=__webpack_require__(1720),nativeMax=Math.max;module.exports=function(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}},5899:function(module,__unused_webpack_exports,__webpack_require__){var baseGet=__webpack_require__(5886),baseSlice=__webpack_require__(1024);module.exports=function(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}},7402:function(module){module.exports={}},6634:function(module,__unused_webpack_exports,__webpack_require__){var copyArray=__webpack_require__(1315),isIndex=__webpack_require__(3380),nativeMin=Math.min;module.exports=function(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:void 0}return array}},6250:function(module){module.exports=function(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&"__lodash_placeholder__"!==value||(array[index]="__lodash_placeholder__",result[resIndex++]=index)}return result}},9942:function(module,__unused_webpack_exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var freeGlobal=__webpack_require__(5604),freeSelf="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},2255:function(module){module.exports=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},6990:function(module){module.exports=function(value){return this.__data__.has(value)}},7419:function(module,__unused_webpack_exports,__webpack_require__){var baseSetData=__webpack_require__(9437),setData=__webpack_require__(5656)(baseSetData);module.exports=setData},8306:function(module){module.exports=function(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}},1561:function(module,__unused_webpack_exports,__webpack_require__){var baseSetToString=__webpack_require__(6543),setToString=__webpack_require__(5656)(baseSetToString);module.exports=setToString},5189:function(module,__unused_webpack_exports,__webpack_require__){var getWrapDetails=__webpack_require__(5368),insertWrapDetails=__webpack_require__(7343),setToString=__webpack_require__(1561),updateWrapDetails=__webpack_require__(7107);module.exports=function(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}},5656:function(module){var nativeNow=Date.now;module.exports=function(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=800)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}},6303:function(module,__unused_webpack_exports,__webpack_require__){var ListCache=__webpack_require__(4378);module.exports=function(){this.__data__=new ListCache,this.size=0}},495:function(module){module.exports=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},4866:function(module){module.exports=function(key){return this.__data__.get(key)}},2018:function(module){module.exports=function(key){return this.__data__.has(key)}},6342:function(module,__unused_webpack_exports,__webpack_require__){var ListCache=__webpack_require__(4378),Map=__webpack_require__(7121),MapCache=__webpack_require__(6180);module.exports=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},2119:function(module){module.exports=function(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}},4384:function(module,__unused_webpack_exports,__webpack_require__){var memoizeCapped=__webpack_require__(4539),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},9117:function(module,__unused_webpack_exports,__webpack_require__){var isSymbol=__webpack_require__(4851);module.exports=function(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}},407:function(module){var funcToString=Function.prototype.toString;module.exports=function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},4935:function(module){var reWhitespace=/\s/;module.exports=function(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}},7107:function(module,__unused_webpack_exports,__webpack_require__){var arrayEach=__webpack_require__(3901),arrayIncludes=__webpack_require__(23),wrapFlags=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];module.exports=function(details,bitmask){return arrayEach(wrapFlags,(function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)})),details.sort()}},740:function(module,__unused_webpack_exports,__webpack_require__){var LazyWrapper=__webpack_require__(5059),LodashWrapper=__webpack_require__(6016),copyArray=__webpack_require__(1315);module.exports=function(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}},8273:function(module,__unused_webpack_exports,__webpack_require__){var createWrap=__webpack_require__(7634);module.exports=function(func,n,guard){return n=guard?void 0:n,n=func&&null==n?func.length:n,createWrap(func,128,void 0,void 0,void 0,void 0,n)}},5865:function(module,__unused_webpack_exports,__webpack_require__){var baseClone=__webpack_require__(2368);module.exports=function(value){return baseClone(value,4)}},6447:function(module){module.exports=function(value){return function(){return value}}},1370:function(module,__unused_webpack_exports,__webpack_require__){var createWrap=__webpack_require__(7634);function curry(func,arity,guard){var result=createWrap(func,8,void 0,void 0,void 0,void 0,void 0,arity=guard?void 0:arity);return result.placeholder=curry.placeholder,result}curry.placeholder={},module.exports=curry},2809:function(module,__unused_webpack_exports,__webpack_require__){var baseDifference=__webpack_require__(6478),baseFlatten=__webpack_require__(246),baseIteratee=__webpack_require__(814),baseRest=__webpack_require__(3889),isArrayLikeObject=__webpack_require__(6668),last=__webpack_require__(2236),differenceBy=baseRest((function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=void 0),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),baseIteratee(iteratee,2)):[]}));module.exports=differenceBy},1859:function(module){module.exports=function(value,other){return value===other||value!=value&&other!=other}},850:function(module,__unused_webpack_exports,__webpack_require__){var arrayEvery=__webpack_require__(6611),baseEvery=__webpack_require__(3278),baseIteratee=__webpack_require__(814),isArray=__webpack_require__(3234),isIterateeCall=__webpack_require__(7055);module.exports=function(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=void 0),func(collection,baseIteratee(predicate,3))}},56:function(module,__unused_webpack_exports,__webpack_require__){var find=__webpack_require__(643)(__webpack_require__(5490));module.exports=find},5490:function(module,__unused_webpack_exports,__webpack_require__){var baseFindIndex=__webpack_require__(8267),baseIteratee=__webpack_require__(814),toInteger=__webpack_require__(6183),nativeMax=Math.max;module.exports=function(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,baseIteratee(predicate,3),index)}},8682:function(module,__unused_webpack_exports,__webpack_require__){var baseFindIndex=__webpack_require__(8267),baseIteratee=__webpack_require__(814),toInteger=__webpack_require__(6183),nativeMax=Math.max,nativeMin=Math.min;module.exports=function(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length-1;return void 0!==fromIndex&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,baseIteratee(predicate,3),index,!0)}},6678:function(module,__unused_webpack_exports,__webpack_require__){var baseFlatten=__webpack_require__(246);module.exports=function(array){return(null==array?0:array.length)?baseFlatten(array,1):[]}},203:function(module,__unused_webpack_exports,__webpack_require__){var createWrap=__webpack_require__(7634);module.exports=function(func){return createWrap(func,512)}},6969:function(module,__unused_webpack_exports,__webpack_require__){var arrayEach=__webpack_require__(3901),baseEach=__webpack_require__(9353),castFunction=__webpack_require__(5084),isArray=__webpack_require__(3234);module.exports=function(collection,iteratee){return(isArray(collection)?arrayEach:baseEach)(collection,castFunction(iteratee))}},338:function(module,__unused_webpack_exports,__webpack_require__){var mapping=__webpack_require__(5226),fallbackHolder=__webpack_require__(1643),push=Array.prototype.push;function baseAry(func,n){return 2==n?function(a,b){return func(a,b)}:function(a){return func(a)}}function cloneArray(array){for(var length=array?array.length:0,result=Array(length);length--;)result[length]=array[length];return result}function wrapImmutable(func,cloner){return function(){var length=arguments.length;if(length){for(var args=Array(length);length--;)args[length]=arguments[length];var result=args[0]=cloner.apply(void 0,args);return func.apply(void 0,args),result}}}module.exports=function baseConvert(util,name,func,options){var isLib="function"==typeof name,isObj=name===Object(name);if(isObj&&(options=func,func=name,name=void 0),null==func)throw new TypeError;options||(options={});var config={cap:!("cap"in options)||options.cap,curry:!("curry"in options)||options.curry,fixed:!("fixed"in options)||options.fixed,immutable:!("immutable"in options)||options.immutable,rearg:!("rearg"in options)||options.rearg},defaultHolder=isLib?func:fallbackHolder,forceCurry="curry"in options&&options.curry,forceFixed="fixed"in options&&options.fixed,forceRearg="rearg"in options&&options.rearg,pristine=isLib?func.runInContext():void 0,helpers=isLib?func:{ary:util.ary,assign:util.assign,clone:util.clone,curry:util.curry,forEach:util.forEach,isArray:util.isArray,isError:util.isError,isFunction:util.isFunction,isWeakMap:util.isWeakMap,iteratee:util.iteratee,keys:util.keys,rearg:util.rearg,toInteger:util.toInteger,toPath:util.toPath},ary=helpers.ary,assign=helpers.assign,clone=helpers.clone,curry=helpers.curry,each=helpers.forEach,isArray=helpers.isArray,isError=helpers.isError,isFunction=helpers.isFunction,isWeakMap=helpers.isWeakMap,keys=helpers.keys,rearg=helpers.rearg,toInteger=helpers.toInteger,toPath=helpers.toPath,aryMethodKeys=keys(mapping.aryMethod),wrappers={castArray:function(_castArray){return function(){var value=arguments[0];return isArray(value)?_castArray(cloneArray(value)):_castArray.apply(void 0,arguments)}},iteratee:function(_iteratee){return function(){var arity=arguments[1],result=_iteratee(arguments[0],arity),length=result.length;return config.cap&&"number"==typeof arity?(arity=arity>2?arity-2:1,length&&length<=arity?result:baseAry(result,arity)):result}},mixin:function(_mixin){return function(source){var func=this;if(!isFunction(func))return _mixin(func,Object(source));var pairs=[];return each(keys(source),(function(key){isFunction(source[key])&&pairs.push([key,func.prototype[key]])})),_mixin(func,Object(source)),each(pairs,(function(pair){var value=pair[1];isFunction(value)?func.prototype[pair[0]]=value:delete func.prototype[pair[0]]})),func}},nthArg:function(_nthArg){return function(n){var arity=n<0?1:toInteger(n)+1;return curry(_nthArg(n),arity)}},rearg:function(_rearg){return function(func,indexes){var arity=indexes?indexes.length:0;return curry(_rearg(func,indexes),arity)}},runInContext:function(_runInContext){return function(context){return baseConvert(util,_runInContext(context),options)}}};function castCap(name,func){if(config.cap){var indexes=mapping.iterateeRearg[name];if(indexes)return function(func,indexes){return overArg(func,(function(func){var n=indexes.length;return function(func,n){return 2==n?function(a,b){return func.apply(void 0,arguments)}:function(a){return func.apply(void 0,arguments)}}(rearg(baseAry(func,n),indexes),n)}))}(func,indexes);var n=!isLib&&mapping.iterateeAry[name];if(n)return function(func,n){return overArg(func,(function(func){return"function"==typeof func?baseAry(func,n):func}))}(func,n)}return func}function castFixed(name,func,n){if(config.fixed&&(forceFixed||!mapping.skipFixed[name])){var data=mapping.methodSpread[name],start=data&&data.start;return void 0===start?ary(func,n):function(func,start){return function(){for(var length=arguments.length,lastIndex=length-1,args=Array(length);length--;)args[length]=arguments[length];var array=args[start],otherArgs=args.slice(0,start);return array&&push.apply(otherArgs,array),start!=lastIndex&&push.apply(otherArgs,args.slice(start+1)),func.apply(this,otherArgs)}}(func,start)}return func}function castRearg(name,func,n){return config.rearg&&n>1&&(forceRearg||!mapping.skipRearg[name])?rearg(func,mapping.methodRearg[name]||mapping.aryRearg[n]):func}function cloneByPath(object,path){for(var index=-1,length=(path=toPath(path)).length,lastIndex=length-1,result=clone(Object(object)),nested=result;null!=nested&&++index<length;){var key=path[index],value=nested[key];null==value||isFunction(value)||isError(value)||isWeakMap(value)||(nested[key]=clone(index==lastIndex?value:Object(value))),nested=nested[key]}return result}function createConverter(name,func){var realName=mapping.aliasToReal[name]||name,methodName=mapping.remap[realName]||realName,oldOptions=options;return function(options){var newUtil=isLib?pristine:helpers,newFunc=isLib?pristine[methodName]:func,newOptions=assign(assign({},oldOptions),options);return baseConvert(newUtil,realName,newFunc,newOptions)}}function overArg(func,transform){return function(){var length=arguments.length;if(!length)return func();for(var args=Array(length);length--;)args[length]=arguments[length];var index=config.rearg?0:length-1;return args[index]=transform(args[index]),func.apply(void 0,args)}}function wrap(name,func,placeholder){var result,realName=mapping.aliasToReal[name]||name,wrapped=func,wrapper=wrappers[realName];return wrapper?wrapped=wrapper(func):config.immutable&&(mapping.mutate.array[realName]?wrapped=wrapImmutable(func,cloneArray):mapping.mutate.object[realName]?wrapped=wrapImmutable(func,function(func){return function(object){return func({},object)}}(func)):mapping.mutate.set[realName]&&(wrapped=wrapImmutable(func,cloneByPath))),each(aryMethodKeys,(function(aryKey){return each(mapping.aryMethod[aryKey],(function(otherName){if(realName==otherName){var data=mapping.methodSpread[realName],afterRearg=data&&data.afterRearg;return result=afterRearg?castFixed(realName,castRearg(realName,wrapped,aryKey),aryKey):castRearg(realName,castFixed(realName,wrapped,aryKey),aryKey),result=function(name,func,n){return forceCurry||config.curry&&n>1?curry(func,n):func}(0,result=castCap(realName,result),aryKey),!1}})),!result})),result||(result=wrapped),result==func&&(result=forceCurry?curry(result,1):function(){return func.apply(this,arguments)}),result.convert=createConverter(realName,func),result.placeholder=func.placeholder=placeholder,result}if(!isObj)return wrap(name,func,defaultHolder);var _=func,pairs=[];return each(aryMethodKeys,(function(aryKey){each(mapping.aryMethod[aryKey],(function(key){var func=_[mapping.remap[key]||key];func&&pairs.push([key,wrap(key,func,_)])}))})),each(keys(_),(function(key){var func=_[key];if("function"==typeof func){for(var length=pairs.length;length--;)if(pairs[length][0]==key)return;func.convert=createConverter(key,func),pairs.push([key,func])}})),each(pairs,(function(pair){_[pair[0]]=pair[1]})),_.convert=function(options){return _.runInContext.convert(options)(void 0)},_.placeholder=_,each(keys(_),(function(key){each(mapping.realToAlias[key]||[],(function(alias){_[alias]=_[key]}))})),_}},5226:function(__unused_webpack_module,exports){exports.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},exports.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},exports.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},exports.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},exports.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},exports.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},exports.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},exports.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},exports.realToAlias=function(){var hasOwnProperty=Object.prototype.hasOwnProperty,object=exports.aliasToReal,result={};for(var key in object){var value=object[key];hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]}return result}(),exports.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},exports.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},exports.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},753:function(module,__unused_webpack_exports,__webpack_require__){module.exports={ary:__webpack_require__(8273),assign:__webpack_require__(417),clone:__webpack_require__(5865),curry:__webpack_require__(1370),forEach:__webpack_require__(3901),isArray:__webpack_require__(3234),isError:__webpack_require__(4304),isFunction:__webpack_require__(9405),isWeakMap:__webpack_require__(4592),iteratee:__webpack_require__(1432),keys:__webpack_require__(9170),rearg:__webpack_require__(7484),toInteger:__webpack_require__(6183),toPath:__webpack_require__(6862)}},195:function(module,__unused_webpack_exports,__webpack_require__){var baseConvert=__webpack_require__(338),util=__webpack_require__(753);module.exports=function(name,func,options){return baseConvert(util,name,func,options)}},9119:function(module,__unused_webpack_exports,__webpack_require__){var func=__webpack_require__(195)("map",__webpack_require__(8936));func.placeholder=__webpack_require__(1643),module.exports=func},3047:function(module,__unused_webpack_exports,__webpack_require__){var func=__webpack_require__(195)("omit",__webpack_require__(9474));func.placeholder=__webpack_require__(1643),module.exports=func},5693:function(module,__unused_webpack_exports,__webpack_require__){var func=__webpack_require__(195)("pick",__webpack_require__(3844));func.placeholder=__webpack_require__(1643),module.exports=func},1643:function(module){module.exports={}},7019:function(module,__unused_webpack_exports,__webpack_require__){var func=__webpack_require__(195)("sumBy",__webpack_require__(4344));func.placeholder=__webpack_require__(1643),module.exports=func},9631:function(module,__unused_webpack_exports,__webpack_require__){var baseGet=__webpack_require__(5886);module.exports=function(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},7987:function(module,__unused_webpack_exports,__webpack_require__){var baseAssignValue=__webpack_require__(4588),createAggregator=__webpack_require__(8217),hasOwnProperty=Object.prototype.hasOwnProperty,groupBy=createAggregator((function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])}));module.exports=groupBy},5131:function(module,__unused_webpack_exports,__webpack_require__){var baseHasIn=__webpack_require__(5165),hasPath=__webpack_require__(5608);module.exports=function(object,path){return null!=object&&hasPath(object,path,baseHasIn)}},8398:function(module){module.exports=function(array){return array&&array.length?array[0]:void 0}},3376:function(module){module.exports=function(value){return value}},7263:function(module,__unused_webpack_exports,__webpack_require__){var baseIsArguments=__webpack_require__(6006),isObjectLike=__webpack_require__(2440),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},3234:function(module){var isArray=Array.isArray;module.exports=isArray},4873:function(module,__unused_webpack_exports,__webpack_require__){var isFunction=__webpack_require__(9405),isLength=__webpack_require__(8438);module.exports=function(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},6668:function(module,__unused_webpack_exports,__webpack_require__){var isArrayLike=__webpack_require__(4873),isObjectLike=__webpack_require__(2440);module.exports=function(value){return isObjectLike(value)&&isArrayLike(value)}},1295:function(module,exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}module=__webpack_require__.nmd(module);var root=__webpack_require__(9942),stubFalse=__webpack_require__(7112),freeExports="object"==_typeof(exports)&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==_typeof(module)&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer},1984:function(module,__unused_webpack_exports,__webpack_require__){var baseKeys=__webpack_require__(9170),getTag=__webpack_require__(3219),isArguments=__webpack_require__(7263),isArray=__webpack_require__(3234),isArrayLike=__webpack_require__(4873),isBuffer=__webpack_require__(1295),isPrototype=__webpack_require__(9801),isTypedArray=__webpack_require__(5202),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if("[object Map]"==tag||"[object Set]"==tag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}},9586:function(module,__unused_webpack_exports,__webpack_require__){var baseIsEqual=__webpack_require__(5890);module.exports=function(value,other){return baseIsEqual(value,other)}},4304:function(module,__unused_webpack_exports,__webpack_require__){var baseGetTag=__webpack_require__(9238),isObjectLike=__webpack_require__(2440),isPlainObject=__webpack_require__(415);module.exports=function(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return"[object Error]"==tag||"[object DOMException]"==tag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value)}},9405:function(module,__unused_webpack_exports,__webpack_require__){var baseGetTag=__webpack_require__(9238),isObject=__webpack_require__(8255);module.exports=function(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}},8438:function(module){module.exports=function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}},7024:function(module,__unused_webpack_exports,__webpack_require__){var baseIsMap=__webpack_require__(977),baseUnary=__webpack_require__(4418),nodeUtil=__webpack_require__(2057),nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;module.exports=isMap},8255:function(module){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}module.exports=function(value){var type=_typeof(value);return null!=value&&("object"==type||"function"==type)}},2440:function(module){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}module.exports=function(value){return null!=value&&"object"==_typeof(value)}},415:function(module,__unused_webpack_exports,__webpack_require__){var baseGetTag=__webpack_require__(9238),getPrototype=__webpack_require__(49),isObjectLike=__webpack_require__(2440),funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);module.exports=function(value){if(!isObjectLike(value)||"[object Object]"!=baseGetTag(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}},7525:function(module,__unused_webpack_exports,__webpack_require__){var baseIsSet=__webpack_require__(7640),baseUnary=__webpack_require__(4418),nodeUtil=__webpack_require__(2057),nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;module.exports=isSet},4851:function(module,__unused_webpack_exports,__webpack_require__){function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var baseGetTag=__webpack_require__(9238),isObjectLike=__webpack_require__(2440);module.exports=function(value){return"symbol"==_typeof(value)||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},5202:function(module,__unused_webpack_exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(3451),baseUnary=__webpack_require__(4418),nodeUtil=__webpack_require__(2057),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},4592:function(module,__unused_webpack_exports,__webpack_require__){var getTag=__webpack_require__(3219),isObjectLike=__webpack_require__(2440);module.exports=function(value){return isObjectLike(value)&&"[object WeakMap]"==getTag(value)}},1432:function(module,__unused_webpack_exports,__webpack_require__){var baseClone=__webpack_require__(2368),baseIteratee=__webpack_require__(814);module.exports=function(func){return baseIteratee("function"==typeof func?func:baseClone(func,1))}},4434:function(module,__unused_webpack_exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(956),baseKeys=__webpack_require__(9170),isArrayLike=__webpack_require__(4873);module.exports=function(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},3398:function(module,__unused_webpack_exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(956),baseKeysIn=__webpack_require__(752),isArrayLike=__webpack_require__(4873);module.exports=function(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}},2236:function(module){module.exports=function(array){var length=null==array?0:array.length;return length?array[length-1]:void 0}},8936:function(module,__unused_webpack_exports,__webpack_require__){var arrayMap=__webpack_require__(4887),baseIteratee=__webpack_require__(814),baseMap=__webpack_require__(3437),isArray=__webpack_require__(3234);module.exports=function(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,baseIteratee(iteratee,3))}},5630:function(module,__unused_webpack_exports,__webpack_require__){var baseAssignValue=__webpack_require__(4588),baseForOwn=__webpack_require__(5393),baseIteratee=__webpack_require__(814);module.exports=function(object,iteratee){var result={};return iteratee=baseIteratee(iteratee,3),baseForOwn(object,(function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))})),result}},1527:function(module,__unused_webpack_exports,__webpack_require__){var MapCache=__webpack_require__(6180);function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},7406:function(module){module.exports=function(){}},9474:function(module,__unused_webpack_exports,__webpack_require__){var arrayMap=__webpack_require__(4887),baseClone=__webpack_require__(2368),baseUnset=__webpack_require__(8570),castPath=__webpack_require__(1902),copyObject=__webpack_require__(5945),customOmitClone=__webpack_require__(6592),flatRest=__webpack_require__(6541),getAllKeysIn=__webpack_require__(1817),omit=flatRest((function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,(function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path})),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,7,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result}));module.exports=omit},8626:function(module,__unused_webpack_exports,__webpack_require__){var partition=__webpack_require__(8217)((function(result,value,key){result[key?0:1].push(value)}),(function(){return[[],[]]}));module.exports=partition},3844:function(module,__unused_webpack_exports,__webpack_require__){var basePick=__webpack_require__(8900),pick=__webpack_require__(6541)((function(object,paths){return null==object?{}:basePick(object,paths)}));module.exports=pick},9348:function(module,__unused_webpack_exports,__webpack_require__){var arrayMap=__webpack_require__(4887),baseIteratee=__webpack_require__(814),basePickBy=__webpack_require__(9453),getAllKeysIn=__webpack_require__(1817);module.exports=function(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),(function(prop){return[prop]}));return predicate=baseIteratee(predicate),basePickBy(object,props,(function(value,path){return predicate(value,path[0])}))}},3723:function(module,__unused_webpack_exports,__webpack_require__){var baseProperty=__webpack_require__(7677),basePropertyDeep=__webpack_require__(5713),isKey=__webpack_require__(1734),toKey=__webpack_require__(9117);module.exports=function(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}},7484:function(module,__unused_webpack_exports,__webpack_require__){var createWrap=__webpack_require__(7634),flatRest=__webpack_require__(6541),rearg=flatRest((function(func,indexes){return createWrap(func,256,void 0,void 0,void 0,indexes)}));module.exports=rearg},606:function(module,__unused_webpack_exports,__webpack_require__){var arraySome=__webpack_require__(9509),baseIteratee=__webpack_require__(814),baseSome=__webpack_require__(6684),isArray=__webpack_require__(3234),isIterateeCall=__webpack_require__(7055);module.exports=function(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=void 0),func(collection,baseIteratee(predicate,3))}},1113:function(module,__unused_webpack_exports,__webpack_require__){var baseFlatten=__webpack_require__(246),baseOrderBy=__webpack_require__(4263),baseRest=__webpack_require__(3889),isIterateeCall=__webpack_require__(7055),sortBy=baseRest((function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}));module.exports=sortBy},2608:function(module){module.exports=function(){return[]}},7112:function(module){module.exports=function(){return!1}},4344:function(module,__unused_webpack_exports,__webpack_require__){var baseIteratee=__webpack_require__(814),baseSum=__webpack_require__(9317);module.exports=function(array,iteratee){return array&&array.length?baseSum(array,baseIteratee(iteratee,2)):0}},2130:function(module,__unused_webpack_exports,__webpack_require__){var toNumber=__webpack_require__(4930);module.exports=function(value){return value?Infinity===(value=toNumber(value))||-Infinity===value?17976931348623157e292*(value<0?-1:1):value==value?value:0:0===value?value:0}},6183:function(module,__unused_webpack_exports,__webpack_require__){var toFinite=__webpack_require__(2130);module.exports=function(value){var result=toFinite(value),remainder=result%1;return result==result?remainder?result-remainder:result:0}},4930:function(module,__unused_webpack_exports,__webpack_require__){var baseTrim=__webpack_require__(6598),isObject=__webpack_require__(8255),isSymbol=__webpack_require__(4851),reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}},6862:function(module,__unused_webpack_exports,__webpack_require__){var arrayMap=__webpack_require__(4887),copyArray=__webpack_require__(1315),isArray=__webpack_require__(3234),isSymbol=__webpack_require__(4851),stringToPath=__webpack_require__(4384),toKey=__webpack_require__(9117),toString=__webpack_require__(1404);module.exports=function(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}},1404:function(module,__unused_webpack_exports,__webpack_require__){var baseToString=__webpack_require__(5655);module.exports=function(value){return null==value?"":baseToString(value)}},7572:function(module,__unused_webpack_exports,__webpack_require__){var baseFlatten=__webpack_require__(246),baseIteratee=__webpack_require__(814),baseRest=__webpack_require__(3889),baseUniq=__webpack_require__(3129),isArrayLikeObject=__webpack_require__(6668),last=__webpack_require__(2236),unionBy=baseRest((function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=void 0),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),baseIteratee(iteratee,2))}));module.exports=unionBy},1407:function(module,__unused_webpack_exports,__webpack_require__){var baseIteratee=__webpack_require__(814),baseUniq=__webpack_require__(3129);module.exports=function(array,iteratee){return array&&array.length?baseUniq(array,baseIteratee(iteratee,2)):[]}},7193:function(module,__unused_webpack_exports,__webpack_require__){var LazyWrapper=__webpack_require__(5059),LodashWrapper=__webpack_require__(6016),baseLodash=__webpack_require__(5805),isArray=__webpack_require__(3234),isObjectLike=__webpack_require__(2440),wrapperClone=__webpack_require__(740),hasOwnProperty=Object.prototype.hasOwnProperty;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,module.exports=lodash},2215:function(__unused_webpack_module,exports){function cloneRoute(to,from){var clone={name:to.name,path:to.path,hash:to.hash,query:to.query,params:to.params,fullPath:to.fullPath,meta:to.meta};return from&&(clone.from=cloneRoute(from)),Object.freeze(clone)}exports.Z=function(store,router,options){var moduleName=(options||{}).moduleName||"route";store.registerModule(moduleName,{namespaced:!0,state:cloneRoute(router.currentRoute),mutations:{ROUTE_CHANGED:function(state,transition){store.state[moduleName]=cloneRoute(transition.to,transition.from)}}});var currentPath,isTimeTraveling=!1,storeUnwatch=store.watch((function(state){return state[moduleName]}),(function(route){var fullPath=route.fullPath;fullPath!==currentPath&&(null!=currentPath&&(isTimeTraveling=!0,router.push(route)),currentPath=fullPath)}),{sync:!0}),afterEachUnHook=router.afterEach((function(to,from){isTimeTraveling?isTimeTraveling=!1:(currentPath=to.fullPath,store.commit(moduleName+"/ROUTE_CHANGED",{to:to,from:from}))}));return function(){null!=afterEachUnHook&&afterEachUnHook(),null!=storeUnwatch&&storeUnwatch(),store.unregisterModule(moduleName)}}}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={id:moduleId,loaded:!1,exports:{}};return __webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=function(exports,definition){for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.nmd=function(module){return module.paths=[],module.children||(module.children=[]),module},function(){var scriptUrl;__webpack_require__.g.importScripts&&(scriptUrl=__webpack_require__.g.location+"");var document=__webpack_require__.g.document;if(!scriptUrl&&document&&(document.currentScript&&(scriptUrl=document.currentScript.src),!scriptUrl)){var scripts=document.getElementsByTagName("script");if(scripts.length)for(var i=scripts.length-1;i>-1&&!scriptUrl;)scriptUrl=scripts[i--].src}if(!scriptUrl)throw new Error("Automatic publicPath is not supported in this browser");scriptUrl=scriptUrl.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=scriptUrl}(),function(){"use strict";var selectContentActions_namespaceObject={};__webpack_require__.r(selectContentActions_namespaceObject),__webpack_require__.d(selectContentActions_namespaceObject,{getAvailableSpaceOnDrive:function(){return getAvailableSpaceOnDrive},loadChannelMetadata:function(){return loadChannelMetadata}});var availableChannelsActions_namespaceObject={};__webpack_require__.r(availableChannelsActions_namespaceObject),__webpack_require__.d(availableChannelsActions_namespaceObject,{getAllDriveChannels:function(){return getAllDriveChannels},getAllRemoteChannels:function(){return getAllRemoteChannels}});var contentTreeViewerActions_namespaceObject={};__webpack_require__.r(contentTreeViewerActions_namespaceObject),__webpack_require__.d(contentTreeViewerActions_namespaceObject,{addNodeForTransfer:function(){return addNodeForTransfer},removeNodeForTransfer:function(){return removeNodeForTransfer}});var contentWizardActions_namespaceObject={};__webpack_require__.r(contentWizardActions_namespaceObject),__webpack_require__.d(contentWizardActions_namespaceObject,{goForwardFromSelectDriveModal:function(){return goForwardFromSelectDriveModal},goForwardFromSelectImportSourceModal:function(){return goForwardFromSelectImportSourceModal}});var getters_namespaceObject={};__webpack_require__.r(getters_namespaceObject),__webpack_require__.d(getters_namespaceObject,{cachedTopicPath:function(){return cachedTopicPath},driveCanBeUsedForTransfer:function(){return driveCanBeUsedForTransfer},getDriveById:function(){return getDriveById},inExportMode:function(){return inExportMode},inLocalImportMode:function(){return inLocalImportMode},inPeerImportMode:function(){return inPeerImportMode},inRemoteImportMode:function(){return inRemoteImportMode},isImportingMore:function(){return isImportingMore},isStudioApplication:function(){return isStudioApplication}});var taskActions_namespaceObject={};__webpack_require__.r(taskActions_namespaceObject),__webpack_require__.d(taskActions_namespaceObject,{cancelTask:function(){return cancelTask},refreshDriveList:function(){return refreshDriveList},refreshTaskList:function(){return refreshTaskList}});var userPermissions_actions_namespaceObject={};function js_cookie_assign(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)target[key]=source[key]}return target}__webpack_require__.r(userPermissions_actions_namespaceObject),__webpack_require__.d(userPermissions_actions_namespaceObject,{addOrUpdateUserPermissions:function(){return addOrUpdateUserPermissions}});var _vue,api=function init(converter,defaultAttributes){function set(name,value,attributes){if("undefined"!=typeof document){"number"==typeof(attributes=js_cookie_assign({},defaultAttributes,attributes)).expires&&(attributes.expires=new Date(Date.now()+864e5*attributes.expires)),attributes.expires&&(attributes.expires=attributes.expires.toUTCString()),name=encodeURIComponent(name).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName]&&(stringifiedAttributes+="="+attributes[attributeName].split(";")[0]));return document.cookie=name+"="+converter.write(value,name)+stringifiedAttributes}}return Object.create({set:set,get:function(name){if("undefined"!=typeof document&&(!arguments.length||name)){for(var cookies=document.cookie?document.cookie.split("; "):[],jar={},i=0;i<cookies.length;i++){var parts=cookies[i].split("="),value=parts.slice(1).join("=");try{var found=decodeURIComponent(parts[0]);if(jar[found]=converter.read(value,found),name===found)break}catch(e){}}return name?jar[name]:jar}},remove:function(name,attributes){set(name,"",js_cookie_assign({},attributes,{expires:-1}))},withAttributes:function(attributes){return init(this.converter,js_cookie_assign({},this.attributes,attributes))},withConverter:function(converter){return init(js_cookie_assign({},this.converter,converter),this.attributes)}},{attributes:{value:Object.freeze(defaultAttributes)},converter:{value:Object.freeze(converter)}})}({read:function(value){return'"'===value[0]&&(value=value.slice(1,-1)),value.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(value){return encodeURIComponent(value).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),external_kolibriCoreAppGlobal_lib_vue_namespaceObject=kolibriCoreAppGlobal.lib.vue,external_kolibriCoreAppGlobal_lib_vue_default=__webpack_require__.n(external_kolibriCoreAppGlobal_lib_vue_namespaceObject),external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject=kolibriCoreAppGlobal.lib.vueCompositionApi,external_kolibriCoreAppGlobal_lib_vueCompositionApi_default=__webpack_require__.n(external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject);(_vue=(_vue=external_kolibriCoreAppGlobal_lib_vue_default())||external_kolibriCoreAppGlobal_lib_vue_default())&&!_vue.__composition_api_installed__&&external_kolibriCoreAppGlobal_lib_vue_default().use(external_kolibriCoreAppGlobal_lib_vueCompositionApi_default());external_kolibriCoreAppGlobal_lib_vue_default().version;var _a;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var isClient="undefined"!=typeof window,isFunction=(Object.prototype.toString,function(val){return"function"==typeof val});isClient&&(null==(_a=null==window?void 0:window.navigator)?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(r){return"function"==typeof r?r():(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.unref)(r)}function tryOnScopeDispose(fn){return!!(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.getCurrentScope)()&&((0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.onScopeDispose)(fn),!0)}function get(obj,key){return null==key?(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.unref)(obj):(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.unref)(obj)[key]}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function useIntervalFn(cb){var interval=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_options$immediate3=options.immediate,immediate=void 0===_options$immediate3||_options$immediate3,_options$immediateCal=options.immediateCallback,immediateCallback=void 0!==_options$immediateCal&&_options$immediateCal,timer=null,isActive=(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.ref)(!1);function clean(){timer&&(clearInterval(timer),timer=null)}function pause(){isActive.value=!1,clean()}function resume(){var intervalValue=resolveUnref(interval);intervalValue<=0||(isActive.value=!0,immediateCallback&&cb(),clean(),timer=setInterval(cb,intervalValue))}(immediate&&isClient&&resume(),(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.isRef)(interval)||isFunction(interval))&&tryOnScopeDispose((0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.watch)(interval,(function(){isActive.value&&isClient&&resume()})));return tryOnScopeDispose(pause),{isActive:isActive,pause:pause,resume:resume}}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var external_kolibriCoreAppGlobal_coreVue_router_namespaceObject=kolibriCoreAppGlobal.coreVue.router,external_kolibriCoreAppGlobal_coreVue_router_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_router_namespaceObject),external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject=kolibriCoreAppGlobal.coreVue.vuex.constants,external_kolibriCoreAppGlobal_coreVue_composables_useUser_namespaceObject=kolibriCoreAppGlobal.coreVue.composables.useUser,external_kolibriCoreAppGlobal_coreVue_composables_useUser_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_composables_useUser_namespaceObject),render=function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("NotificationsRoot",{attrs:{authorized:this.userIsAuthorized,authorizedRole:"registeredUser"},scopedSlots:this._u([{key:"sub-nav",fn:function(){return[_c("DeviceTopNav")]},proxy:!0}])},[_c("transition",{attrs:{name:"delay-entry"}},[this.showModal&&this.authenticateWithPin?_c("PinAuthenticationModal",{on:{submit:this.submit,cancel:this.closePinModal}}):this._e()],1),_c("router-view")],1)};render._withStripped=!0;var external_kolibriCoreAppGlobal_lib_vuex_namespaceObject=kolibriCoreAppGlobal.lib.vuex,find=__webpack_require__(56),find_default=__webpack_require__.n(find),external_kolibriCoreAppGlobal_coreVue_components_NotificationsRoot_namespaceObject=kolibriCoreAppGlobal.coreVue.components.NotificationsRoot,external_kolibriCoreAppGlobal_coreVue_components_NotificationsRoot_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_NotificationsRoot_namespaceObject),external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_namespaceObject=kolibriCoreAppGlobal.coreVue.mixins.commonCoreStrings,external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_namespaceObject),external_kolibriCoreAppGlobal_utils_redirectBrowser_namespaceObject=kolibriCoreAppGlobal.utils.redirectBrowser,external_kolibriCoreAppGlobal_utils_redirectBrowser_default=__webpack_require__.n(external_kolibriCoreAppGlobal_utils_redirectBrowser_namespaceObject),external_kolibriCoreAppGlobal_urls_namespaceObject=kolibriCoreAppGlobal.urls,external_kolibriCoreAppGlobal_urls_default=__webpack_require__.n(external_kolibriCoreAppGlobal_urls_namespaceObject);function constants_typeof(o){return constants_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},constants_typeof(o)}function constants_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=constants_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=constants_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==constants_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var PageNames={MANAGE_CONTENT_PAGE:"MANAGE_CONTENT_PAGE",MANAGE_PERMISSIONS_PAGE:"MANAGE_PERMISSIONS_PAGE",USER_PERMISSIONS_PAGE:"USER_PERMISSIONS_PAGE",DEVICE_INFO_PAGE:"DEVICE_INFO_PAGE",DEVICE_SETTINGS_PAGE:"DEVICE_SETTINGS_PAGE",REARRANGE_CHANNELS:"REARRANGE_CHANNELS",DELETE_CHANNELS:"DELETE_CHANNELS",EXPORT_CHANNELS:"EXPORT_CHANNELS",MANAGE_TASKS:"MANAGE_TASKS",MANAGE_CHANNEL:"MANAGE_CHANNEL",SELECT_CONTENT:"SELECT_CONTENT",NEW_CHANNEL_VERSION_PAGE:"NEW_CHANNEL_VERSION_PAGE",AVAILABLE_CHANNELS_PAGE:"AVAILABLE_CHANNELS",FACILITIES_PAGE:"FACILITIES_PAGE",FACILITIES_TASKS_PAGE:"FACILITIES_TASKS_PAGE",MANAGE_SYNC_SCHEDULE:"MANAGE_SYNC_SCHEDULE",EDIT_SYNC_SCHEDULE:"EDIT_SYNC_SCHEDULE"},ContentWizardPages={AVAILABLE_CHANNELS:"AVAILABLE_CHANNELS",LOADING_CHANNEL_METADATA:"LOADING_CHANNEL_METADATA",SELECT_CONTENT:"SELECT_CONTENT",SELECT_DRIVE:"SELECT_DRIVE",SELECT_IMPORT_SOURCE:"SELECT_IMPORT_SOURCE",SELECT_NETWORK_ADDRESS:"SELECT_NETWORK_ADDRESS"},ContentWizardErrors={INVALID_PARAMETERS:"INVALID_PARAMETERS",CHANNEL_NOT_FOUND_ON_SERVER:"CHANNEL_NOT_FOUND_ON_SERVER",CHANNEL_NOT_FOUND_ON_DRIVE:"CHANNEL_NOT_FOUND_ON_DRIVE",CHANNEL_NOT_FOUND_ON_STUDIO:"CHANNEL_NOT_FOUND_ON_STUDIO",KOLIBRI_STUDIO_UNAVAILABLE:"KOLIBRI_STUDIO_UNAVAILABLE",DRIVE_IS_NOT_WRITEABLE:"DRIVE_IS_NOT_WRITEABLE",DRIVE_NOT_FOUND:"DRIVE_NOT_FOUND",DRIVE_ERROR:"DRIVE_ERROR",TRANSFER_IN_PROGRESS:"TRANSFER_IN_PROGRESS",TREEVIEW_LOADING_ERROR:"TREEVIEW_LOADING_ERROR",NETWORK_LOCATION_DOES_NOT_EXIST:"NETWORK_LOCATION_DOES_NOT_EXIST",NETWORK_LOCATION_UNAVAILABLE:"NETWORK_LOCATION_UNAVAILABLE",NETWORK_LOCATION_DOES_NOT_HAVE_CHANNEL:"NETWORK_LOCATION_DOES_NOT_HAVE_CHANNEL"},ErrorTypes={CONTENT_DB_LOADING_ERROR:"CONTENT_DB_LOADING_ERROR",TREEVIEW_LOADING_ERROR:"TREEVIEW_LOADING_ERROR",CHANNEL_TASK_ERROR:"CHANNEL_TASK_ERROR"},ContentSources={LOCAL_DRIVE:"local",KOLIBRI_STUDIO:"network",PEER_KOLIBRI_SERVER:"PEER_KOLIBRI_SERVER"},pageNameToModuleMap=constants_defineProperty(constants_defineProperty(constants_defineProperty(constants_defineProperty({},PageNames.MANAGE_CONTENT_PAGE,"manageContent"),PageNames.MANAGE_PERMISSIONS_PAGE,"managePermissions"),PageNames.USER_PERMISSIONS_PAGE,"userPermissions"),PageNames.DEVICE_INFO_PAGE,"deviceInfo"),LandingPageChoices={SIGN_IN:"sign-in",LEARN:"learn"},MeteredConnectionDownloadOptions={DISALLOW_DOWNLOAD_ON_METERED_CONNECTION:"DISALLOW_DOWNLOAD_ON_METERED_CONNECTION",ALLOW_DOWNLOAD_ON_METERED_CONNECTION:"ALLOW_DOWNLOAD_ON_METERED_CONNECTION"},PinAuthenticationModalvue_type_template_id_61954ba6_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.coreString("enterPinPlaceholder"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction")},on:{submit:_vm.submit,cancel:function($event){return _vm.$emit("cancel")}}},[_c("KTextbox",{ref:"pinFocus",attrs:{input:"number",type:"password",label:_vm.$tr("pinPlaceholder"),maxlength:4,invalid:_vm.showErrorText,invalidText:_vm.pinError,showInvalidText:_vm.showErrorText},model:{value:_vm.pin,callback:function($$v){_vm.pin=$$v},expression:"pin"}})],1)};function PinAuthenticationModalvue_type_script_lang_js_typeof(o){return PinAuthenticationModalvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},PinAuthenticationModalvue_type_script_lang_js_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){PinAuthenticationModalvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function PinAuthenticationModalvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=PinAuthenticationModalvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=PinAuthenticationModalvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==PinAuthenticationModalvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function normalizeComponent(scriptExports,render,staticRenderFns,functionalTemplate,injectStyles,scopeId,moduleIdentifier,shadowMode){var hook,options="function"==typeof scriptExports?scriptExports.options:scriptExports;if(render&&(options.render=render,options.staticRenderFns=staticRenderFns,options._compiled=!0),functionalTemplate&&(options.functional=!0),scopeId&&(options._scopeId="data-v-"+scopeId),moduleIdentifier?(hook=function(context){(context=context||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(context=__VUE_SSR_CONTEXT__),injectStyles&&injectStyles.call(this,context),context&&context._registeredComponents&&context._registeredComponents.add(moduleIdentifier)},options._ssrRegister=hook):injectStyles&&(hook=shadowMode?function(){injectStyles.call(this,(options.functional?this.parent:this).$root.$options.shadowRoot)}:injectStyles),hook)if(options.functional){options._injectStyles=hook;var originalRender=options.render;options.render=function(h,context){return hook.call(context),originalRender(h,context)}}else{var existing=options.beforeCreate;options.beforeCreate=existing?[].concat(existing,hook):[hook]}return{exports:scriptExports,options:options}}PinAuthenticationModalvue_type_template_id_61954ba6_render._withStripped=!0;var PinAuthenticationModal=normalizeComponent({name:"PinAuthenticationModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],data:function(){return{pin:"",pinError:null,showErrorText:!1}},computed:_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("facilityConfig",["isFacilityPinValid"])),methods:_objectSpread(_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)("facilityConfig",["isPinValid"])),{},{submit:function(){var _this=this;this.pin?this.pin.match(/^\d+$/)?this.isPinValid({pin_code:this.pin}).then((function(){_this.isFacilityPinValid?(_this.pinError="",_this.showErrorText=!1,_this.$emit("submit"),_this.showSnackbarNotification("pinAuthenticate")):(_this.pinError=_this.$tr("incorrectPin"),_this.showErrorText=!0)})).catch((function(error){_this.pinError=error.response.data,_this.showErrorText=!0})):(this.pinError=this.coreString("numbersOnly"),this.showErrorText=!0,this.focus()):(this.pinError=this.coreString("requiredFieldError"),this.showErrorText=!0,this.focus())},focus:function(){this.$refs.pinFocus.focus()}}),$trs:{incorrectPin:{message:"Incorrect PIN, please try again",context:"Error message displayed when an incorrect PIN is input"},invalidPin:{message:"Enter four numbers to set as your new PIN",context:"Error message displayed when a PIN with less than 4 digits is input"},pinPlaceholder:{message:"PIN",context:"Placeholder label for a PIN input"}}},PinAuthenticationModalvue_type_template_id_61954ba6_render,[],!1,null,null,null).exports,plugin_data_src=(__webpack_require__.g.kolibriPluginDataGlobal||{})["kolibri.plugins.device.app"]||{};function DeviceIndexvue_type_script_lang_js_typeof(o){return DeviceIndexvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},DeviceIndexvue_type_script_lang_js_typeof(o)}function DeviceIndexvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function DeviceIndexvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DeviceIndexvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){DeviceIndexvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DeviceIndexvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function DeviceIndexvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=DeviceIndexvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=DeviceIndexvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==DeviceIndexvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DeviceIndex=normalizeComponent({name:"DeviceIndex",components:{NotificationsRoot:external_kolibriCoreAppGlobal_coreVue_components_NotificationsRoot_default(),PinAuthenticationModal:PinAuthenticationModal},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],data:function(){return{showModal:!1,currentFacility:{}}},computed:DeviceIndexvue_type_script_lang_js_objectSpread(DeviceIndexvue_type_script_lang_js_objectSpread(DeviceIndexvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["isUserLoggedIn","userFacilityId"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)(["authenticateWithPin","grantPluginAccess"])),{},{facilities:function(){return this.$store.state.core.facilities},isPinSet:function(){return((this.currentFacility.dataset||{}).extra_fields||{}).pin_code},userIsAuthorized:function(){return this.pageName===PageNames.BOOKMARKS?this.isUserLoggedIn:plugin_data_src.allowGuestAccess&&this.$store.getters.allowAccess||this.isUserLoggedIn},pageName:function(){return this.$route.name}}),watch:{facilities:function(newValue){this.currentFacility=find_default()(newValue,{id:this.userFacilityId})||{};var dataset=this.currentFacility.dataset;this.$store.commit("facilityConfig/SET_STATE",{facilityDatasetId:dataset.id})},isPinSet:{handler:function(newValue){newValue||this.grantPluginAccess(),this.showModal=newValue&&this.authenticateWithPin},deep:!0}},methods:{closePinModal:function(){return external_kolibriCoreAppGlobal_utils_redirectBrowser_default()(external_kolibriCoreAppGlobal_urls_default()["kolibri:kolibri.plugins.learn:learn"]()),this.showModal=!1},submit:function(){api.set(external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.IsPinAuthenticated,!0,{expires:new Date((new Date).getTime()+15e3)}),this.$store.commit("SET_AUTHENTICATE_WITH_PIN",!1),this.grantPluginAccess()}}},render,[],!1,null,"29115a7c",null).exports,external_kolibriCoreAppGlobal_coreVue_vuex_store_namespaceObject=kolibriCoreAppGlobal.coreVue.vuex.store,external_kolibriCoreAppGlobal_coreVue_vuex_store_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_vuex_store_namespaceObject),ManageSyncSchedulevue_type_template_id_191b090e_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{appBarTitle:_vm.$tr("syncSchedules"),route:_vm.goBackRoute}},[_c("KPageContainer",[_c("KGrid",{attrs:{gutter:"48"}},[_c("KGridItem",[_c("h1",[_vm._v(_vm._s(_vm.$tr("syncSchedules")))])]),_c("KGridItem",[_c("p",[_vm._v(_vm._s(_vm.$tr("introduction")))])]),_c("KGridItem",{staticClass:"separate",attrs:{layout8:{span:4},layout12:{span:6}}},[_vm.facility?_c("b",[_vm._v(_vm._s(_vm.facility.name))]):_c("KCircularLoader")],1),_c("KGridItem",{staticClass:"separate",attrs:{layout:{alignment:"right"},layout8:{span:4},layout12:{span:6}}},[_c("KButton",{on:{click:function($event){_vm.deviceModal=!0}}},[_vm._v("\n          "+_vm._s(_vm.$tr("addDevice"))+"\n        ")])],1)],1),_c("CoreTable",{scopedSlots:_vm._u([{key:"tbody",fn:function(){return[_vm.scheduledTasks.length>0?_c("tbody",[_c("tr",[_c("th",[_vm._v(_vm._s(_vm.coreString("deviceNameLabel")))]),_c("th",[_vm._v(_vm._s(_vm.$tr("Schedule")))]),_c("th",[_vm._v(_vm._s(_vm.coreString("statusLabel")))]),_c("th")]),_vm._l(_vm.scheduledTasks,(function(task){return _c("tr",{key:task.id},[_c("td",[_c("span",[_vm._v(_vm._s(task.deviceName)),_c("br"),_vm._v("\n                "+_vm._s(task.extra_metadata.baseurl)+"\n              ")])]),_c("td",[_c("div",[_vm._v("\n                "+_vm._s(_vm.scheduleTime(task.repeat_interval,task.scheduled_datetime))+"\n              ")])]),_c("td",[task.deviceAvailable?_c("span",[_c("KIcon",{attrs:{icon:"onDevice"}}),_c("span",[_vm._v(_vm._s(_vm.$tr("connected")))])],1):task.isKDP?_c("KEmptyPlaceholder"):_c("span",[_c("KIcon",{attrs:{icon:"disconnected"}}),_c("span",[_vm._v(_vm._s(_vm.$tr("disconnected")))])],1)],1),_c("td",[_c("KButton",{staticClass:"right",on:{click:function($event){return _vm.editButton(task)}}},[_vm._v("\n                "+_vm._s(_vm.coreString("editAction"))+"\n              ")])],1)])}))],2):_c("tbody",[_c("tr",[_c("th",[_vm._v(_vm._s(_vm.coreString("deviceNameLabel")))]),_c("th",[_vm._v(_vm._s(_vm.$tr("Schedule")))]),_c("th",[_vm._v(_vm._s(_vm.coreString("statusLabel")))]),_c("th")]),_c("tr",[_c("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[_c("b",[_vm._v(_vm._s(_vm.$tr("NoSync")))])])])])]},proxy:!0}])}),_vm.deviceModal?_c("SyncFacilityModalGroup",{attrs:{facilityForSync:_vm.facility},on:{close:_vm.closeModal,syncKDP:_vm.handleKDPSync,syncPeer:_vm.handlePeerSync}}):_vm._e()],1)],1)};ManageSyncSchedulevue_type_template_id_191b090e_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_namespaceObject=kolibriCoreAppGlobal.coreVue.components.ImmersivePage,external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_namespaceObject),external_kolibriCoreAppGlobal_coreVue_components_CoreTable_namespaceObject=kolibriCoreAppGlobal.coreVue.components.CoreTable,external_kolibriCoreAppGlobal_coreVue_components_CoreTable_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_CoreTable_namespaceObject),external_kolibriCoreAppGlobal_resources_namespaceObject=kolibriCoreAppGlobal.resources,external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_namespaceObject=kolibriCoreAppGlobal.coreVue.mixins.commonSyncElements,external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_namespaceObject),external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject=kolibriCoreAppGlobal.coreVue.componentSets.sync,external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject=kolibriCoreAppGlobal.utils.syncTaskUtils,KDP_ID="kolibri-data-portal",external_kolibriCoreAppGlobal_utils_i18n_namespaceObject=kolibriCoreAppGlobal.utils.i18n,kdpNameTranslator=(0,external_kolibriCoreAppGlobal_utils_i18n_namespaceObject.createTranslator)("PrivacyModal",{syncToKDP:{message:"Kolibri Data Portal",context:"If the Kolibri facility is part of a larger organization that tracks data on the Kolibri Data Portal, the user receives a project token to sync the facility data with servers operated by Learning Equality in the cloud."}});function ManageSyncSchedulevue_type_script_lang_js_typeof(o){return ManageSyncSchedulevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ManageSyncSchedulevue_type_script_lang_js_typeof(o)}function ManageSyncSchedulevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ManageSyncSchedulevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ManageSyncSchedulevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){ManageSyncSchedulevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ManageSyncSchedulevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ManageSyncSchedulevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=ManageSyncSchedulevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ManageSyncSchedulevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ManageSyncSchedulevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ManageSyncSchedulevue_type_script_lang_js={name:"ManageSyncSchedule",components:{ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default(),CoreTable:external_kolibriCoreAppGlobal_coreVue_components_CoreTable_default(),SyncFacilityModalGroup:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.SyncFacilityModalGroup},extends:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default(),mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default()],setup:function(props){var deviceFilter=(0,external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.useDeviceFacilityFilter)({id:props.facilityId}),devices=(0,external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.useDevicesWithFilter)({subset_of_users_device:!1},deviceFilter).devices,devicesById=(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.computed)((function(){return devices.value.reduce((function(acc,device){return acc[device.id]=device,acc}),ManageSyncSchedulevue_type_script_lang_js_defineProperty({},KDP_ID,{device_id:KDP_ID,device_name:kdpNameTranslator.$tr("syncToKDP"),base_url:""}))}));return{devices:devices,devicesById:devicesById}},props:{facilityId:{type:String,required:!0},goBackRoute:{type:Object,required:!0},editSyncRoute:{type:Function,required:!0}},data:function(){return{deviceModal:!1,facility:null,facilitySyncTasks:[]}},computed:{scheduledTasks:function(){var _this=this;return this.facilitySyncTasks.map((function(task){var deviceName=_this.devicesById[_this.getDeviceId(task)]?_this.devicesById[_this.getDeviceId(task)].device_name:task.extra_metadata.device_name,deviceAvailable=_this.devicesById[task.extra_metadata.device_id]&&_this.devicesById[task.extra_metadata.device_id].available,isKDP=task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCDATAPORTAL;return ManageSyncSchedulevue_type_script_lang_js_objectSpread(ManageSyncSchedulevue_type_script_lang_js_objectSpread({},task),{},{deviceName:deviceName,deviceAvailable:deviceAvailable,isKDP:isKDP})}))}},beforeMount:function(){this.pollFacilityTasks(),this.fetchFacility()},methods:{fetchFacility:function(){var _this2=this;external_kolibriCoreAppGlobal_resources_namespaceObject.FacilityResource.fetchModel({id:this.facilityId,force:!0}).then((function(facility){_this2.facility=ManageSyncSchedulevue_type_script_lang_js_objectSpread({},facility)}))},pollFacilityTasks:function(){var _this3=this;external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.list({queue:"facility_task"}).then((function(tasks){_this3.facilitySyncTasks=tasks.filter((function(t){return t.facility_id===_this3.facilityId&&null===t.repeat&&(t.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCDATAPORTAL||t.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCPEERFULL)})),_this3.isPolling&&setTimeout((function(){return _this3.pollFacilityTasks()}),2e3)}))},closeModal:function(){this.deviceModal=!1},handlePeerSync:function(device){this.deviceModal=!1,device.id&&this.$router.push(this.editSyncRoute(device.id))},handleKDPSync:function(){this.deviceModal=!1,this.$router.push(this.editSyncRoute(KDP_ID))},editButton:function(task){this.$router.push(this.editSyncRoute(this.getDeviceId(task)))},getDeviceId:function(task){return task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCPEERFULL?task.extra_metadata.device_id:task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCDATAPORTAL?KDP_ID:void 0},scheduleTime:function(time,timestamp){if(timestamp=new Date(Date.parse(timestamp)),3600===time)return this.$tr("everyHour");var frequencyString,options={weekday:"long",hour:"numeric",minute:"numeric"};return 86400===time&&(frequencyString=this.$tr("everyDay"),delete options.weekday),604800===time&&(frequencyString=this.$tr("everyWeek")),1209600===time&&(frequencyString=this.$tr("everyTwoWeeks")),2419200===time&&(frequencyString=this.$tr("everyMonth")),"".concat(frequencyString,", ").concat(this.$formatTime(timestamp,options))}},$trs:{syncSchedules:{message:"Sync schedules",context:"Heading or title for 'manage sync schedule' page."},introduction:{message:"Set a schedule for Kolibri to automatically sync with other Kolibri devices sharing this facility. Devices with the same sync schedule will be synced one at a time.",context:"Introduction on the manage sync schedule"},addDevice:{message:"Add device",context:"Add device button"},Schedule:{message:"Schedule",context:"Schedule label"},connected:{message:"Connected",context:"Connected device"},disconnected:{message:"Not connected",context:"Disconnected device"},NoSync:{message:"There are no syncs scheduled",context:"Text to display when there is no schedule sync to be managed."},everyHour:{message:"Every hour",context:"Period for scheduling the sync between devices every hour"},everyDay:{message:"Every day",context:"Period for scheduling the sync between devices every day"},everyWeek:{message:"Every week",context:"Period for scheduling the sync between devices every week"},everyMonth:{message:"Every month",context:"Period for scheduling the sync between devices every month"},everyTwoWeeks:{message:"Every two weeks",context:"Period for scheduling the sync between devices every two weeks"}}},ManageSyncSchedule=normalizeComponent(ManageSyncSchedulevue_type_script_lang_js,ManageSyncSchedulevue_type_template_id_191b090e_scoped_true_render,[],!1,null,"191b090e",null).exports,EditDeviceSyncSchedulevue_type_template_id_cfaa66d0_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{appBarTitle:_vm.$tr("editSyncScheduleTitle"),route:_vm.goBackRoute,icon:_vm.icon}},[_vm.device?_c("KPageContainer",{style:_vm.pageHeight},[_c("KGrid",{staticClass:"edit-sync-schedule",attrs:{gutter:"48"}},[_c("KGridItem",[_c("h1",[_vm._v(_vm._s(_vm.$tr("editSyncScheduleTitle")))])]),_c("KGridItem",[_c("p",[_vm._v(_vm._s(_vm.device.device_name)+" ")])]),_c("KGrid",{staticClass:"align-kselects"},[_c("KGrid",[_c("KGridItem",[_c("KSelect",{staticClass:"selector",style:_vm.selectorStyle,attrs:{disabled:_vm.currentTaskRunning,options:_vm.selectArray,label:_vm.$tr("frequency")},model:{value:_vm.selectedItem,callback:function($$v){_vm.selectedItem=$$v},expression:"selectedItem"}})],1)],1),_vm.dayRequired?_c("KGrid",[_c("KGridItem",[_c("KSelect",{staticClass:"selector",style:_vm.selectorStyle,attrs:{disabled:_vm.currentTaskRunning,options:_vm.getDays,label:_vm.$tr("day")},model:{value:_vm.selectedDay,callback:function($$v){_vm.selectedDay=$$v},expression:"selectedDay"}})],1)],1):_vm._e(),_vm.timeRequired?_c("KGrid",[_c("KGridItem",[_c("KSelect",{staticClass:"selector",style:_vm.selectorStyle,attrs:{disabled:_vm.currentTaskRunning,options:_vm.SyncTime,label:_vm.$tr("time")},model:{value:_vm.selectedTime,callback:function($$v){_vm.selectedTime=$$v},expression:"selectedTime"}})],1)],1):_vm._e()],1),_c("KGridItem",[_c("p",{staticClass:"spacing"},[_vm._v("\n          "+_vm._s(_vm.$tr("serverTime"))+"\n          "+_vm._s(_vm.$formatTime(_vm.now,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))+"\n        ")]),_c("p",{staticClass:"spacing"},[_c("KCheckbox",{attrs:{checked:_vm.retryFlag,disabled:_vm.currentTaskRunning},on:{change:function($event){_vm.retryFlag=!_vm.retryFlag}}},[_vm._v("\n            "+_vm._s(_vm.$tr("checkboxLabel"))+"\n          ")])],1),_c("p",[_vm.currentTask?_c("KButton",{staticClass:"spacing",attrs:{disabled:_vm.currentTaskRunning,appearance:"basic-link"},on:{click:function($event){_vm.removeDeviceModal=!0}}},[_vm._v("\n            "+_vm._s(_vm.$tr("removeDeviceLabel"))+"\n          ")]):_vm._e()],1)])],1)],1):_vm._e(),_c("BottomAppBar",[_c("KButtonGroup",[_c("KButton",{attrs:{text:_vm.coreString("cancelAction"),appearance:"flat-button"},on:{click:_vm.goBack}}),_c("KButton",{attrs:{text:_vm.coreString("saveAction"),primary:!0,disabled:_vm.saveDisabled},on:{click:_vm.handleSaveSchedule}})],1)],1),_vm.removeDeviceModal?_c("KModal",{attrs:{title:_vm.$tr("removeDevice"),size:"medium",submitText:_vm.coreString("removeAction"),cancelText:_vm.coreString("cancelAction")},on:{cancel:_vm.closeModal,submit:_vm.handleDeleteDevice}},[_c("KGrid",[_c("KGridItem",{attrs:{layout8:{span:6},layout12:{span:10}}},[_c("p",[_vm._v(_vm._s(_vm.deviceName))])]),_c("KGridItem",{attrs:{layout8:{span:8},layout12:{span:12}}},[_c("p",[_vm._v(_vm._s(_vm.$tr("removeDeviceWarning")))]),_vm.device.available?_vm._e():_c("p",[_vm._v("\n          "+_vm._s(_vm.$tr("deviceNotConnected"))+"\n        ")])])],1)],1):_vm._e()],1)};EditDeviceSyncSchedulevue_type_template_id_cfaa66d0_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_BottomAppBar_namespaceObject=kolibriCoreAppGlobal.coreVue.components.BottomAppBar,external_kolibriCoreAppGlobal_coreVue_components_BottomAppBar_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_BottomAppBar_namespaceObject),external_kolibriCoreAppGlobal_utils_serverClock_namespaceObject=kolibriCoreAppGlobal.utils.serverClock;function EditDeviceSyncSchedulevue_type_script_lang_js_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return EditDeviceSyncSchedulevue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EditDeviceSyncSchedulevue_type_script_lang_js_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function EditDeviceSyncSchedulevue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}for(var today=new Date,daysOfWeek=[],date=new Date(today.getFullYear(),today.getMonth(),today.getDate()+(7-today.getDay())),_i=0;_i<7;_i++)daysOfWeek.push({value:_i,date:new Date(date)}),date.setDate(date.getDate()+1);var endTime=new Date;endTime.setHours(24,0,0,0);var times=[],i=0,time=new Date;for(time.setHours(0,0,0,0);time<endTime;)times.push({value:i++,time:new Date(time)}),time.setMinutes(time.getMinutes()+30);var EditDeviceSyncSchedulevue_type_script_lang_js={name:"EditDeviceSyncSchedule",components:{ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default(),BottomAppBar:external_kolibriCoreAppGlobal_coreVue_components_BottomAppBar_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{icon:{type:String,default:"back"},facilityId:{type:String,required:!0},deviceId:{type:String,required:!0},goBackRoute:{type:Object,required:!0}},data:function(){return{removeDeviceModal:!1,retryFlag:!1,device:null,now:null,selectedItem:{},tasks:[],selectedDay:{},selectedTime:{}}},computed:{pageHeight:function(){return{height:"80%",zIndex:-1}},selectorStyle:function(){return{color:this.$themeTokens.text,backgroundColor:this.$themePalette.grey.v_200,borderRadius:"5px 5px 0px 0px",paddingTop:"5px",paddingLeft:"5px",width:"300px",marginLeft:"16px"}},selectArray:function(){return[{label:this.$tr("everyHour"),value:3600},{label:this.$tr("everyDay"),value:86400},{label:this.$tr("everyWeek"),value:604800},{label:this.$tr("everyTwoWeeks"),value:1209600},{label:this.$tr("everyMonth"),value:2419200}]},getDays:function(){var _this=this;return daysOfWeek.map((function(day){return{label:_this.$formatDate(day.date,{weekday:"long"}),value:day.value}}))},SyncTime:function(){var _this2=this;return times.map((function(time){return{label:_this2.$formatTime(time.time),value:time.value,hours:time.time.getHours(),minutes:time.time.getMinutes()}}))},deviceName:function(){return this.device&&this.device.nickname&&this.device.nickname.length?this.device.nickname:this.device.device_name},currentTask:function(){return this.tasks&&this.tasks.length?this.tasks[0]:null},currentTaskRunning:function(){return this.currentTask&&this.currentTask.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.RUNNING},timeRequired:function(){return this.selectedItem.value>3600},timeIsSet:function(){return this.selectedTime&&times[this.selectedTime.value]},dayRequired:function(){return this.selectedItem.value>86400},dayIsSet:function(){return this.selectedDay&&daysOfWeek[this.selectedDay.value]},isKdp:function(){return this.deviceId===KDP_ID},taskType:function(){return this.isKdp?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCDATAPORTAL:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCPEERFULL},saveDisabled:function(){return this.currentTaskRunning||!this.timeIsSet&&this.timeRequired||!this.dayIsSet&&this.dayRequired||!this.selectedItem.value}},created:function(){var _this3=this;this.fetchDevice(),this.now=(0,external_kolibriCoreAppGlobal_utils_serverClock_namespaceObject.now)(),this.serverTimeInterval=setInterval((function(){_this3.now=(0,external_kolibriCoreAppGlobal_utils_serverClock_namespaceObject.now)()}),1e4)},beforeDestroy:function(){clearInterval(this.serverTimeInterval)},methods:{closeModal:function(){this.removeDeviceModal=!1},handleDeleteDevice:function(){var _this4=this;this.removeDeviceModal=!1,external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.deleteModel({id:this.currentTask.id}).then((function(){_this4.showSnackbarNotification("deviceRemove"),_this4.goBack()})).catch((function(){_this4.showSnackbarNotification("deviceNotRemove")}))},computeNextSync:function(){var date=new Date(this.now);if(this.timeRequired){if(!this.timeIsSet)throw new ReferenceError("Time is not set and is required");var hours=this.selectedTime.hours,minutes=this.selectedTime.minutes;(hours<date.getHours()||hours===date.getHours()&&minutes<date.getMinutes())&&date.setDate(date.getDate()+1),date.setHours(hours),date.setMinutes(minutes)}if(this.dayRequired){if(!this.dayIsSet)throw new ReferenceError("Day is not set and is required");var diff=this.selectedDay.value-date.getDay();date.getDay()>this.selectedDay.value?date.setDate(date.getDate()+7-Math.abs(diff)):date.getDay()<this.selectedDay.value&&date.setDate(date.getDate()+Math.abs(diff))}return date},handleSaveSchedule:function(){var promise,_this5=this,enqueue_args={enqueue_at:this.computeNextSync().toISOString(),repeat_interval:this.selectedItem.value,repeat:null,retry_interval:this.retryFlag?300:null};if(this.currentTask)promise=external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.saveModel({id:this.currentTask.id,data:{enqueue_args:enqueue_args},exists:!0});else{var taskParams={type:this.taskType,facility:this.facilityId,enqueue_args:enqueue_args};this.isKdp||(taskParams.device_id=this.deviceId,taskParams.baseurl=this.device.base_url),promise=external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask(taskParams)}promise.then((function(){_this5.goBack(),_this5.showSnackbarNotification("syncAdded")})).catch((function(){_this5.createTaskFailedSnackbar(),_this5.currentTask&&_this5.fetchSyncTasks()}))},goBack:function(){this.$router.push(this.goBackRoute)},pollFetchSyncTasks:function(){var _this6=this;this.pollInterval=setInterval((function(){_this6.fetchSyncTasks()}),1e4)},fetchSyncTasks:function(){var _this7=this;external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.list({queue:"facility_task"}).then((function(tasks){_this7.tasks=tasks.filter((function(task){return(_this7.isKdp||task.extra_metadata.device_id===_this7.device.id)&&task.facility_id===_this7.facilityId&&task.type===_this7.taskType&&null===task.repeat})),_this7.$nextTick((function(){if(_this7.currentTask){var enqueueAt=new Date(Date.parse(_this7.currentTask.scheduled_datetime)),day=enqueueAt.getDay(),hours=enqueueAt.getHours(),minutes=enqueueAt.getMinutes();_this7.selectedItem=_this7.selectArray.find((function(item){return item.value===_this7.currentTask.repeat_interval}))||{},_this7.selectedDay=_this7.getDays.find((function(item){return item.value===day}))||{};var _step,_iterator=EditDeviceSyncSchedulevue_type_script_lang_js_createForOfIteratorHelper(_this7.SyncTime);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _time=_step.value;if(0===_time.minutes&&(_time.hours===hours&&minutes<15||_time.hours===hours+1&&minutes>=45)){_this7.selectedTime=_time;break}if(30===_time.minutes&&_time.hours===hours&&minutes>=15&&minutes<45){_this7.selectedTime=_time;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this7.retryFlag=Boolean(_this7.currentTask.retry_interval),_this7.currentTaskRunning?_this7.pollFetchSyncTasks():(clearInterval(_this7.pollInterval),_this7.pollInterval=null)}}))}))},fetchDevice:function(){var _this8=this;if(this.isKdp)return this.device={id:KDP_ID,device_name:kdpNameTranslator.$tr("syncToKDP"),base_url:""},void this.fetchSyncTasks();external_kolibriCoreAppGlobal_resources_namespaceObject.NetworkLocationResource.fetchModel({id:this.deviceId}).then((function(device){_this8.device=device,_this8.fetchSyncTasks()}))}},$trs:{editSyncScheduleTitle:{message:"Edit device sync schedule",context:"Subtitle for the edit sync schedule page"},serverTime:{message:"Server time:",context:"Server time label"},checkboxLabel:{message:"If scheduled sync fails, keep trying",context:"Label for checkbox"},removeDevice:{message:"Remove device",context:"Title for the remove device modal"},removeDeviceWarning:{message:"You are about to remove this device from the sync schedule.",context:"Label to warn the user before removing the device"},deviceNotConnected:{message:"This device is not currently connected to your network.",context:"Message showing that the device is no longer on the network"},everyHour:{message:"Every hour",context:"Period for scheduling the sync between devices every hour"},everyDay:{message:"Every day",context:"Period for scheduling the sync between devices every day"},everyWeek:{message:"Every week",context:"Period for scheduling the sync between devices every week"},everyMonth:{message:"Every month",context:"Period for scheduling the sync between devices every month"},everyTwoWeeks:{message:"Every two weeks",context:"Period for scheduling the sync between devices every two weeks"},removeDeviceLabel:{message:"Remove device from sync schedule",context:"Button label for removing the device from the sync schedule"},frequency:{message:"Frequency",context:"Indicates often the scheduled sync occurs"},day:{message:"Day",context:"Indicates the day of the week on which the scheduled sync occurs"},time:{message:"Time",context:"Indicates the time of day at which the scheduled sync occurs"}}},EditDeviceSyncSchedule=normalizeComponent(EditDeviceSyncSchedulevue_type_script_lang_js,EditDeviceSyncSchedulevue_type_template_id_cfaa66d0_scoped_true_render,[],!1,null,"cfaa66d0",null).exports,external_kolibriCoreAppGlobal_client_namespaceObject=kolibriCoreAppGlobal.client,external_kolibriCoreAppGlobal_client_default=__webpack_require__.n(external_kolibriCoreAppGlobal_client_namespaceObject),external_kolibriCoreAppGlobal_utils_samePageCheckGenerator_namespaceObject=kolibriCoreAppGlobal.utils.samePageCheckGenerator,external_kolibriCoreAppGlobal_utils_samePageCheckGenerator_default=__webpack_require__.n(external_kolibriCoreAppGlobal_utils_samePageCheckGenerator_namespaceObject),external_kolibriCoreAppGlobal_utils_bytesForHumans_namespaceObject=kolibriCoreAppGlobal.utils.bytesForHumans,external_kolibriCoreAppGlobal_utils_bytesForHumans_default=__webpack_require__.n(external_kolibriCoreAppGlobal_utils_bytesForHumans_namespaceObject);function handlers_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return handlers_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return handlers_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function handlers_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getDeviceInfo(){var requests=[external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:deviceinfo"]()}),external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:devicename"]()})];return Promise.all(requests).then((function(_ref){var _ref2=handlers_slicedToArray(_ref,2),infoResponse=_ref2[0],nameResponse=_ref2[1],data=infoResponse.data;data.server_time=new Date(data.server_time),data.free_space=data.content_storage_free_space,data.content_storage_free_space=external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(data.content_storage_free_space),data.device_name=nameResponse.data.name;var server=infoResponse.headers.server,isAppContext=external_kolibriCoreAppGlobal_coreVue_composables_useUser_default()().isAppContext;return server.includes("0.0.0.0")?get(isAppContext)?data.server_type="Kolibri app server":data.server_type="Kolibri internal server":data.server_type=server,data}))}var groupBy=__webpack_require__(7987),groupBy_default=__webpack_require__.n(groupBy),mapValues=__webpack_require__(5630),mapValues_default=__webpack_require__.n(mapValues),head=__webpack_require__(8398),head_default=__webpack_require__.n(head);function managePermissions_handlers_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return managePermissions_handlers_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return managePermissions_handlers_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function managePermissions_handlers_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function userPermissions_handlers_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return userPermissions_handlers_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return userPermissions_handlers_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function userPermissions_handlers_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function fetchUserPermissions(userId){var permissionsPromise=external_kolibriCoreAppGlobal_resources_namespaceObject.DevicePermissionsResource.fetchModel({id:userId,force:!0}),userPromise=external_kolibriCoreAppGlobal_resources_namespaceObject.FacilityUserResource.fetchModel({id:userId});return permissionsPromise.then((function(permissions){return userPromise.then((function(user){return{permissions:permissions,user:user}}))})).catch((function(error){if(404===error.response.status)return userPromise.then((function(user){return{permissions:{is_superuser:!1,can_manage_content:!1},user:user}}))}))}var DeleteExportChannelsPagevue_type_template_id_76d0f66c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{appBarTitle:_vm.appBarTitle,route:_vm.backRoute,loading:_vm.loading}},[_vm.loading?_vm._e():_c("KPageContainer",{staticClass:"device-container"},[_c("FilteredChannelListContainer",{attrs:{channels:_vm.allChannels,selectedChannels:_vm.selectedChannels,selectAllCheckbox:!0},on:{"update:selectedChannels":function($event){_vm.selectedChannels=$event},"update:selected-channels":function($event){_vm.selectedChannels=$event}},scopedSlots:_vm._u([{key:"header",fn:function(){return[_c("h1",[_vm._v(_vm._s(_vm.$tr("channelsOnDevice")))])]},proxy:!0},{key:"default",fn:function(ref){var showItem=ref.showItem,handleChange=ref.handleChange,itemIsSelected=ref.itemIsSelected;return _vm._l(_vm.allChannels,(function(channel){return _c("ChannelPanel",{directives:[{name:"show",rawName:"v-show",value:showItem(channel),expression:"showItem(channel)"}],key:channel.id,attrs:{channel:channel,selectedMessage:_vm.channelSelectedMessage(channel),checked:itemIsSelected(channel)},on:{checkboxchange:handleChange}})}))}}],null,!1,3452274242)}),_vm.showModal?_c(_vm.exportMode?"SelectDriveModal":"DeleteChannelModal",_vm._b({tag:"component",on:{cancel:function($event){_vm.showModal=!1},submit:_vm.handleClickModalSubmit}},"component",_vm.modalProps,!1)):_vm._e(),_c("SelectionBottomBar",{attrs:{objectType:"channel",disabled:0===_vm.selectedChannels.length,actionType:_vm.actionType,selectedObjects:_vm.selectedChannels,fileSize:_vm.fileSize},on:{"update:fileSize":function($event){_vm.fileSize=$event},"update:file-size":function($event){_vm.fileSize=$event},clickconfirm:_vm.handleClickConfirm}})],1)],1)};DeleteExportChannelsPagevue_type_template_id_76d0f66c_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_namespaceObject=kolibriCoreAppGlobal.coreVue.mixins.responsiveWindowMixin,external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_namespaceObject),deviceChannel=new kolibriCoreAppGlobal.lib.apiResource.Resource({name:"device_channel",namespace:"kolibri.plugins.device"});function useContentTasks(){var $store=(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.getCurrentInstance)().proxy.$store,polling=useIntervalFn((function(){$store.dispatch("manageContent/refreshTaskList")}),1e3);function startTaskPolling(){$store.getters.canManageContent&&polling.resume()}return(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.onMounted)(startTaskPolling),(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.onUnmounted)(polling.pause),{stopTaskPolling:function(){polling.pause()},startTaskPolling:startTaskPolling}}var TaskSnackbarStrings=(0,external_kolibriCoreAppGlobal_utils_i18n_namespaceObject.createTranslator)("TaskSnackbarStrings",{taskStarted:{message:"Task started",context:"Message displays when a task has started."},taskFailed:{message:"Task could not be started",context:"Displays if a task action could not be started."},taskFinished:{message:"Task has finished",context:"Message displays when a task has finished."},viewTasksAction:{message:"View tasks",context:"Option to view the task manager."},clearTaskAction:{message:"Clear task",context:"Action to clear a task from the list of tasks."}}),taskNotificationMixin={data:function(){return{showSnackbarWhenTaskHasFinished:!0}},computed:{watchedTaskId:function(){return this.$store.state.manageContent.watchedTaskId},watchedTaskHasFinished:function(){return this.$store.getters["manageContent/taskFinished"](this.watchedTaskId)}},watch:{watchedTaskHasFinished:function(val){val&&val===this.watchedTaskId&&(this.showSnackbarWhenTaskHasFinished&&this.createTaskFinishedSnackbar(),"function"==typeof this.onWatchedTaskFinished&&this.onWatchedTaskFinished())}},methods:{notifyAndWatchTask:function(taskData){this.startWatchingTask(taskData),this.createTaskStartedSnackbar(),this.$router.push({name:PageNames.MANAGE_TASKS})},createTaskFailedSnackbar:function(){this.$store.dispatch("createSnackbar",TaskSnackbarStrings.$tr("taskFailed"))},createTaskFinishedSnackbar:function(){this.$store.commit("CORE_CREATE_SNACKBAR",{text:TaskSnackbarStrings.$tr("taskFinished"),autoDismiss:!0})},createTaskStartedSnackbar:function(){this.$store.commit("CORE_CREATE_SNACKBAR",{text:TaskSnackbarStrings.$tr("taskStarted"),autoDismiss:!0})},startWatchingTask:function(taskData){Array.isArray(taskData)?this.$store.commit("manageContent/SET_WATCHED_TASK_ID",taskData[0].id):this.$store.commit("manageContent/SET_WATCHED_TASK_ID",taskData.id)}}},SelectionBottomBarvue_type_template_id_2ae6192a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("BottomAppBar",["manage"===_vm.actionType?[_c("KButtonGroup",[_c("span",{staticClass:"message"},[_vm._v(_vm._s(_vm.selectedMessage))]),_c("KButton",{attrs:{disabled:_vm.$attrs.disabled||_vm.buttonsDisabled,text:_vm.coreString("deleteAction"),primary:!1},on:{click:function($event){return _vm.$emit("selectoption","DELETE")}}}),_c("KButton",{attrs:{disabled:_vm.$attrs.disabled||_vm.buttonsDisabled,text:_vm.$tr("exportAction"),primary:!0},on:{click:function($event){return _vm.$emit("selectoption","EXPORT")}}})],1)]:[_c("span",{staticClass:"message"},[_vm._v(_vm._s(_vm.selectedMessage))]),_c("KButton",{attrs:{disabled:_vm.$attrs.disabled||_vm.buttonsDisabled,text:_vm.confirmButtonLabel,primary:!0},on:{click:function($event){return _vm.$emit("clickconfirm")}}})]],2)};SelectionBottomBarvue_type_template_id_2ae6192a_scoped_true_render._withStripped=!0;var sumBy=__webpack_require__(4344),sumBy_default=__webpack_require__.n(sumBy),isEmpty=__webpack_require__(1984),isEmpty_default=__webpack_require__.n(isEmpty),SelectionBottomBar=normalizeComponent({name:"SelectionBottomBar",components:{BottomAppBar:external_kolibriCoreAppGlobal_coreVue_components_BottomAppBar_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default()],props:{selectedObjects:{type:Array,default:function(){return[]}},resourceCounts:{type:Object,default:function(){return{}},validator:function(value){return!!isEmpty_default()(value)||"number"==typeof value.count&&"number"==typeof value.fileSize}},objectType:{type:String,default:null,validator:function(value){return"channel"===value||"resource"===value}},actionType:{type:String,default:null,validator:function(value){return"import"===value||"export"===value||"delete"===value||"manage"===value}}},computed:{confirmButtonLabel:function(){return{import:this.$tr("importAction"),export:this.$tr("exportAction"),delete:this.$tr("deleteAction")}[this.actionType]},buttonsDisabled:function(){return"resource"===this.objectType?0===this.resourceCounts.count:0===this.selectedObjects},selectedObjectsFileSize:function(){return"channel"!==this.objectType||"export"!==this.actionType&&"delete"!==this.actionType?"channel"===this.objectType&&"import"===this.actionType?sumBy_default()(this.selectedObjects,"total_file_size"):0:sumBy_default()(this.selectedObjects,"on_device_file_size")},bytesText:function(){return 0===this.selectedObjects.length?"":external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(this.selectedObjectsFileSize)},selectedMessage:function(){if("channel"===this.objectType){var count=this.selectedObjects.length;return 0===count?this.$tr("channelsSelectedNoFileSize",{count:0}):this.selectedObjectsFileSize?this.$tr("channelsSelectedWithFileSize",{count:count,bytesText:this.bytesText}):this.$tr("channelsSelectedNoFileSize",{count:count})}var _this$resourceCounts=this.resourceCounts,_count=_this$resourceCounts.count,fileSize=_this$resourceCounts.fileSize;return 0===_count?this.$tr("zeroResourcesSelected"):this.$tr("someResourcesSelected",{bytesText:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(fileSize),count:_count})}},watch:{selectedObjectsFileSize:function(value){this.$emit("update:fileSize",value)}},$trs:{importAction:{message:"Import",context:"Refers to a button the user uses to import resources."},exportAction:{message:"Export",context:"Refers to a button the user uses to export resources."},deleteAction:{message:"Delete",context:"Refers to a button the user uses to delete resources."},channelsSelectedNoFileSize:{message:"{count, number} {count, plural, one {channel selected} other {channels selected}}",context:"Indicates the amount of channels selected to import. For example:\n\n'7 channels selected'"},channelsSelectedWithFileSize:{message:"{count} {count, plural, one {channel selected} other {channels selected}} ({bytesText})",context:"Indicates the amount of channels selected to import along with the file size. For example:\n\n'7 channels (22 GB)'"},zeroResourcesSelected:{message:"No resources selected",context:"Indicates that the user has selected no resources."},someResourcesSelected:{message:"{count} {count, plural, one {resource selected} other {resources selected}} ({bytesText})",context:"Indicates the amount of resources selected to import along with the file size. For example:\n\n'727 resources selected (22 GB)'"}}},SelectionBottomBarvue_type_template_id_2ae6192a_scoped_true_render,[],!1,null,"2ae6192a",null).exports,DeleteChannelModalvue_type_template_id_6f5541b6_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.title,submitText:_vm.coreString("deleteAction"),cancelText:_vm.coreString("cancelAction")},on:{submit:function($event){return _vm.$emit("submit")},cancel:function($event){return _vm.$emit("cancel")}}},[_vm.channelTitle?_c("p",[_vm._v("\n    "+_vm._s(_vm.$tr("confirmationQuestion",{channelTitle:_vm.channelTitle}))+"\n  ")]):1===_vm.numberOfChannels?_c("p",[_vm._v("\n    "+_vm._s(_vm.$tr("confirmationQuestionOneChannel"))+"\n  ")]):_c("p",[_vm._v("\n    "+_vm._s(_vm.$tr("confirmationQuestionMultipleChannels"))+"\n  ")]),_c("p",[_vm._v(_vm._s(_vm.coreString("cannotUndoActionWarning")))])])};DeleteChannelModalvue_type_template_id_6f5541b6_scoped_true_render._withStripped=!0;var DeleteChannelModal=normalizeComponent({name:"DeleteChannelModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{channelTitle:{type:String,default:null},numberOfChannels:{type:Number,default:1}},computed:{title:function(){return 1===this.numberOfChannels?this.$tr("titleSingleChannel"):this.$tr("titleMultipleChannels")}},$trs:{confirmationQuestion:{message:"Are you sure you want to delete '{channelTitle}' from your device?",context:"Confirmation of delete message."},confirmationQuestionOneChannel:{message:"Are you sure you want to delete this channel from your device?",context:"A confirmation that appears when a user tries to delete a single channel."},confirmationQuestionMultipleChannels:{message:"Are you sure you want to delete these channels from your device?",context:"A confirmation that appears when a user tries to delete multiple channels"},titleSingleChannel:{message:"Delete channel",context:"Title of window that displays when a user tries to delete a single channel."},titleMultipleChannels:{message:"Delete channels",context:"Title of window that displays when a user tries to delete a channel or channels."}}},DeleteChannelModalvue_type_template_id_6f5541b6_scoped_true_render,[],!1,null,"6f5541b6",null).exports,SelectDriveModalvue_type_template_id_1c4ef244_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.title,size:"medium",submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction"),submitDisabled:""===_vm.selectedDriveId||_vm.notEnoughFreeSpace},on:{submit:_vm.goForward,cancel:_vm.handleClickCancel}},[_vm.notEnoughFreeSpace?_c("UiAlert",{attrs:{type:"error",dismissible:!1,removeIcon:!0}},[_vm._v("\n    "+_vm._s(_vm.$tr("notEnoughFreeSpaceWarning"))+"\n  ")]):_vm._e(),"ERROR"===_vm.driveStatus?_c("UiAlert",{attrs:{type:"error",dismissible:!1}},[_vm._v("\n    "+_vm._s(_vm.$tr("problemFindingLocalDrives"))+"\n  ")]):_vm._e(),_c("transition",{attrs:{mode:"out-in"}},["LOADING"===_vm.driveStatus?_c("UiAlert",{attrs:{type:"info",dismissible:!1}},[_c("span",{staticClass:"finding-local-drives"},[_vm._v("\n        "+_vm._s(_vm.$tr("findingLocalDrives"))+"\n      ")])]):_vm._e(),""===_vm.driveStatus?_c("DriveList",{attrs:{drives:_vm.enabledDrives,mode:_vm.driveListMode},model:{value:_vm.selectedDriveId,callback:function($$v){_vm.selectedDriveId=$$v},expression:"selectedDriveId"}}):_vm._e()],1)],1)};SelectDriveModalvue_type_template_id_1c4ef244_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_UiAlert_namespaceObject=kolibriCoreAppGlobal.coreVue.components.UiAlert,external_kolibriCoreAppGlobal_coreVue_components_UiAlert_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_UiAlert_namespaceObject),DriveListvue_type_template_id_5c4e737c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"drive-list"},[0===_vm.drives.length?_c("div",[_c("UiAlert",{attrs:{type:"info",dismissible:!1}},[_vm._v("\n      "+_vm._s(_vm.noDrivesText)+"\n    ")])],1):_c("div",[_c("h2",[_vm._v(_vm._s(_vm.$tr("drivesFound")))]),_vm._l(_vm.drives,(function(drive){return _c("KRadioButton",{key:drive.id,attrs:{label:_vm.enabledDriveLabel(drive),value:drive.id,currentValue:_vm.value},on:{change:function($event){return _vm.$emit("input",drive.id)}}})}))],2)])};DriveListvue_type_template_id_5c4e737c_scoped_true_render._withStripped=!0;var DriveList_component=normalizeComponent({name:"DriveList",components:{UiAlert:external_kolibriCoreAppGlobal_coreVue_components_UiAlert_default()},props:{drives:{type:Array,required:!0},mode:{type:String,required:!0},value:{type:String,required:!0}},data:function(){return{selectedDrive:""}},computed:{noDrivesText:function(){return"IMPORT"===this.mode?this.$tr("noImportableDrives"):"IMPORT_MORE"===this.mode?this.$tr("noDriveWithSelectedChannelError"):this.$tr("noExportableDrives")}},mounted:function(){this.selectedDrive=this.value},methods:{enabledDriveLabel:function(drive){var driveLabel=drive.name;return this.enabledMsg&&(driveLabel+=" (".concat(this.enabledMsg(drive),")")),driveLabel}},$trs:{drivesFound:{message:"Drives found",context:"Refers to importing and exporting channels from external USB or disk drives that Kolibri can recognize and export channels to."},noImportableDrives:{message:"No USB or network drives with Kolibri resources are connected to the server.",context:"Error message that refers to importing resources. If the drive being used doesn't have Kolibri resources on it, then this message will display."},noDriveWithSelectedChannelError:{message:"No drives with the selected channel are connected to the server",context:"Refers to importing and exporting channels from external USB or disk drives. If no drives are found this error message displays."},noExportableDrives:{message:"Could not find a writable drive connected to the server",context:"Error message that displays if Kolibri can't find a drive to export data to."}}},DriveListvue_type_template_id_5c4e737c_scoped_true_render,[],!1,null,"5c4e737c",null);function SelectDriveModalvue_type_script_lang_js_typeof(o){return SelectDriveModalvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},SelectDriveModalvue_type_script_lang_js_typeof(o)}function SelectDriveModalvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function SelectDriveModalvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SelectDriveModalvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){SelectDriveModalvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SelectDriveModalvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function SelectDriveModalvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=SelectDriveModalvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=SelectDriveModalvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==SelectDriveModalvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var SelectDriveModal=normalizeComponent({name:"SelectDriveModal",components:{DriveList:DriveList_component.exports,UiAlert:external_kolibriCoreAppGlobal_coreVue_components_UiAlert_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{exportFileSize:{type:Number,default:null},manageMode:{type:Boolean,required:!1}},data:function(){return{driveStatus:"",selectedDriveId:""}},computed:SelectDriveModalvue_type_script_lang_js_objectSpread(SelectDriveModalvue_type_script_lang_js_objectSpread(SelectDriveModalvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent/wizard",["isImportingMore"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent/wizard",["driveList"])),{},{transferType:function(){return this.manageMode?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALEXPORT:this.$store.state.manageContent.wizard.transferType},driveCanBeUsedForTransfer:function(){return this.manageMode?function(_ref){return _ref.drive.writable}:this.$store.getters["manageContent/wizard/driveCanBeUsedForTransfer"]},inImportMode:function(){return this.transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT},title:function(){return this.$tr("selectDrive")},notEnoughFreeSpace:function(){return!(!this.exportFileSize||!this.selectedDriveId)&&find_default()(this.driveList,{id:this.selectedDriveId}).freespace<this.exportFileSize},enabledDrives:function(){var _this=this;return this.driveList.filter((function(drive){return _this.driveCanBeUsedForTransfer({drive:drive,transferType:_this.transferType})}))},driveListMode:function(){return this.inImportMode?this.isImportingMore?"IMPORT_MORE":"IMPORT":"EXPORT"}}),mounted:function(){var _this2=this;this.driveStatus="LOADING",this.refreshDriveList().catch((function(){_this2.driveStatus="ERROR"})).then((function(){_this2.driveStatus="",_this2.enabledDrives.length>0&&(_this2.selectedDriveId=_this2.enabledDrives[0].id)}))},methods:SelectDriveModalvue_type_script_lang_js_objectSpread(SelectDriveModalvue_type_script_lang_js_objectSpread(SelectDriveModalvue_type_script_lang_js_objectSpread(SelectDriveModalvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)("manageContent",["refreshDriveList"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)("manageContent/wizard",["goForwardFromSelectDriveModal"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapMutations)("manageContent/wizard",{resetContentWizardState:"RESET_STATE"})),{},{goForward:function(){this.manageMode?this.$emit("submit",{driveId:this.selectedDriveId}):this.goForwardFromSelectDriveModal({driveId:this.selectedDriveId,forExport:!this.inImportMode})},handleClickCancel:function(){this.manageMode?this.$emit("cancel"):this.resetContentWizardState()}}),$trs:{findingLocalDrives:{message:"Finding local drives",context:"Message related to searching for local drives."},problemFindingLocalDrives:{message:"There was a problem finding local drives.",context:"Error message that displays when a user has selected a drive that can't be found."},selectDrive:{message:"Select a drive",context:"Refers to choosing a drive from which to import resources."},notEnoughFreeSpaceWarning:{message:"Not enough space available. Free up space on the drive or select fewer resources",context:"Warning that appears when a user has selected a drive without enough space for the selected resources"}}},SelectDriveModalvue_type_template_id_1c4ef244_scoped_true_render,[],!1,null,"1c4ef244",null).exports,WithCheckboxvue_type_template_id_6b412f47_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"channel-card",class:{"channel-card-sm":_vm.windowIsSmall},style:{borderTopColor:_vm.$themePalette.grey.v_200}},[_c("ChannelDetails",{attrs:{channel:_vm.channel},scopedSlots:_vm._u([{key:"beforethumbnail",fn:function(){return[_c("KCheckbox",{staticClass:"checkbox",attrs:{label:_vm.channel.name,showLabel:!1,checked:_vm.$attrs.checked},on:{change:function($event){return _vm.$emit("checkboxchange",{channel:_vm.channel,isSelected:$event})}}})]},proxy:!0},{key:"abovedescription",fn:function(){return[_vm.resourcesOnDevice?_c("p",[_vm._v("\n        "+_vm._s(_vm.$tr("resourcesOnDevice"))+"\n      ")]):_vm._e()]},proxy:!0}])}),_c("div",{staticClass:"col-3"},[_vm.selectedMessage?_c("p",{staticClass:"selected"},[_vm._v("\n      "+_vm._s(_vm.selectedMessage)+"\n    ")]):_vm._e()])],1)};WithCheckboxvue_type_template_id_6b412f47_scoped_true_render._withStripped=!0;var ChannelDetailsvue_type_template_id_189bddc2_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"channel-detail-panel",class:{"channel-detail-panel-sm":_vm.windowIsSmall}},[_c("div",{staticClass:"col-1"},[_vm._t("beforethumbnail"),_vm.channel.thumbnail?_c("img",{staticClass:"thumbnail",attrs:{src:_vm.channel.thumbnail}}):_c("KIcon",{staticClass:"thumbnail-svg",style:{backgroundColor:_vm.$themePalette.grey.v_200},attrs:{icon:"channel"}})],2),_c("div",{staticClass:"col-2"},[_c("div",{staticClass:"col-2-row-1"},[_c("div",[_c("h2",{staticClass:"channel-name",attrs:{dir:"auto"}},[_vm._v("\n          "+_vm._s(_vm.channel.name)+"\n        ")]),_vm._t("belowname"),_c("p",{staticClass:"version",style:{color:_vm.$themeTokens.annotation}},[_vm._v("\n          "+_vm._s(_vm.$tr("versionNumber",{v:_vm.channelVersion||_vm.channel.version}))+"\n        ")])],2)]),_c("div",[_vm._t("abovedescription"),_c("p",{staticClass:"description",attrs:{dir:"auto"}},[_vm.channel.description?_c("span",[_vm._v(_vm._s(_vm.channel.description))]):_c("span",{style:{color:_vm.$themeTokens.annotation}},[_vm._v("\n          "+_vm._s(_vm.$tr("defaultDescription"))+"\n        ")])]),_c("p",{staticClass:"coach-content"},[_c("CoachContentLabel",{attrs:{value:_vm.channel.num_coach_contents,isTopic:!0}})],1),_vm._t("belowdescription")],2)]),_vm._t("append")],2)};ChannelDetailsvue_type_template_id_189bddc2_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_CoachContentLabel_namespaceObject=kolibriCoreAppGlobal.coreVue.components.CoachContentLabel,external_kolibriCoreAppGlobal_coreVue_components_CoachContentLabel_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_CoachContentLabel_namespaceObject),ChannelDetails=normalizeComponent({name:"ChannelDetails",components:{CoachContentLabel:external_kolibriCoreAppGlobal_coreVue_components_CoachContentLabel_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default()],props:{channel:{type:Object,default:function(){return{}}},channelVersion:{type:[String,Number],default:null}},$trs:{versionNumber:{message:"Version {v, number, integer}",context:"Indicates the channel version. This can be updated when new resources are made available in a channel."},defaultDescription:{message:"(No description)",context:"This text will display only if a description for the channel has not been written by the resource creator."}}},ChannelDetailsvue_type_template_id_189bddc2_scoped_true_render,[],!1,null,"189bddc2",null).exports,WithCheckbox=normalizeComponent({name:"WithCheckbox",components:{ChannelDetails:ChannelDetails},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default()],props:{channel:{type:Object,default:function(){return{}}},selectedMessage:{type:String,default:null},resourcesOnDevice:{type:Boolean,default:!1}},$trs:{resourcesOnDevice:{message:"Resources on device",context:"Indicates that the learning resources are on the device being used at that moment."}}},WithCheckboxvue_type_template_id_6b412f47_scoped_true_render,[],!1,null,"6b412f47",null).exports,FilteredChannelListContainervue_type_template_id_29df2c05_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{class:{"fclc-sm":!_vm.windowIsLarge}},[_vm._t("header"),_vm._t("abovechannels"),_c("KGrid",{staticClass:"top-panel"},[_vm.channels.length>0?[_c("KGridItem",{attrs:{layout12:{span:4}}},[_c("KSelect",{staticClass:"filter-lang",attrs:{options:_vm.languageFilterOptions,label:_vm.coreString("languageLabel"),inline:!0},model:{value:_vm.languageFilter,callback:function($$v){_vm.languageFilter=$$v},expression:"languageFilter"}})],1),_c("KGridItem",{staticClass:"filter-title",attrs:{layout12:{span:5}}},[_c("FilterTextbox",{attrs:{placeholder:_vm.$tr("titleFilterPlaceholder"),throttleInput:500},model:{value:_vm.titleFilter,callback:function($$v){_vm.titleFilter=$$v},expression:"titleFilter"}})],1)]:_vm._e(),_c("KGridItem",{attrs:{layout12:{span:3}}},[_c("p",{staticClass:"count-msg",attrs:{"data-test":"available"}},[_vm._v("\n        "+_vm._s(_vm.channelsCountMsg)+"\n      ")])])],2),_vm.selectAllCheckbox?[_vm.filteredItems.length>0?_c("KCheckbox",{staticClass:"select-all-checkbox",attrs:{label:_vm.$tr("selectAll"),checked:_vm.selectAllIsChecked},on:{change:function($event){return _vm.handleChangeSelectAll({isSelected:$event})}}}):_vm._e()]:_vm._e(),_vm._t("default",null,null,{filteredItems:_vm.filteredItems,showItem:_vm.showItem,itemIsSelected:_vm.itemIsSelected,handleChange:_vm.handleChange}),0===_vm.filteredItems.length?_c("div",{staticClass:"no-match"},[_vm._v("\n    "+_vm._s(_vm.noMatchMsg)+"\n  ")]):_vm._e()],2)};FilteredChannelListContainervue_type_template_id_29df2c05_scoped_true_render._withStripped=!0;var differenceBy=__webpack_require__(2809),differenceBy_default=__webpack_require__.n(differenceBy),unionBy=__webpack_require__(7572),unionBy_default=__webpack_require__.n(unionBy),uniqBy=__webpack_require__(1407),uniqBy_default=__webpack_require__.n(uniqBy),external_kolibriCoreAppGlobal_coreVue_components_FilterTextbox_namespaceObject=kolibriCoreAppGlobal.coreVue.components.FilterTextbox;function FilteredChannelListContainervue_type_script_lang_js_typeof(o){return FilteredChannelListContainervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},FilteredChannelListContainervue_type_script_lang_js_typeof(o)}function FilteredChannelListContainervue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function FilteredChannelListContainervue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=FilteredChannelListContainervue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=FilteredChannelListContainervue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==FilteredChannelListContainervue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function FilteredChannelListContainervue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return FilteredChannelListContainervue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return FilteredChannelListContainervue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FilteredChannelListContainervue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FilteredChannelListContainervue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var FilteredChannelListContainervue_type_script_lang_js={name:"FilteredChannelListContainer",components:{FilterTextbox:__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_FilterTextbox_namespaceObject)()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{channels:{type:Array,default:function(){return[]}},selectAllCheckbox:{type:Boolean,default:!1},selectedChannels:{type:Array,default:function(){return[]}}},data:function(){return{languageFilter:{},titleFilter:"",channelsCopy:FilteredChannelListContainervue_type_script_lang_js_toConsumableArray(this.channels)}},computed:{selectAllIsChecked:function(){return 0===differenceBy_default()(this.filteredItems,this.selectedChannels,"id").length},showItem:function(){return function(channel){return Boolean(find_default()(this.filteredItems,{id:channel.id}))}.bind(this)},itemIsSelected:function(){return function(channel){return Boolean(find_default()(this.selectedChannels,{id:channel.id}))}.bind(this)},allLanguagesOption:function(){return{label:this.$tr("allLanguages"),value:"ALL"}},languageFilterOptions:function(){var codes=uniqBy_default()(this.channelsCopy,"lang_code").map((function(_ref){var lang_name=_ref.lang_name;return{value:_ref.lang_code,label:lang_name}})).filter((function(x){return x.value}));return[this.allLanguagesOption].concat(FilteredChannelListContainervue_type_script_lang_js_toConsumableArray(codes))},channelsCountMsg:function(){return this.$tr("numChannelsAvailable",{count:this.filteredItems.length})},filteredItems:function(){return this.channelsCopy.filter(this.channelPassesFilters)},noMatchMsg:function(){return""===this.titleFilter&&"ALL"===this.languageFilter.value||0!==this.filteredItems.length?"":this.$tr("noMatchingItems")}},watch:{channels:function(newVal,oldVal){newVal.length!==oldVal.length&&(this.channelsCopy=FilteredChannelListContainervue_type_script_lang_js_toConsumableArray(newVal))}},beforeMount:function(){this.languageFilter=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FilteredChannelListContainervue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){FilteredChannelListContainervue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FilteredChannelListContainervue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},this.allLanguagesOption)},methods:{handleChange:function(_ref2){var channel=_ref2.channel;_ref2.isSelected?this.itemIsSelected(channel)||this.$emit("update:selectedChannels",[].concat(FilteredChannelListContainervue_type_script_lang_js_toConsumableArray(this.selectedChannels),[channel])):this.$emit("update:selectedChannels",this.selectedChannels.filter((function(_ref3){return _ref3.id!==channel.id}))),this.$emit("update:selected")},handleChangeSelectAll:function(_ref4){_ref4.isSelected?this.$emit("update:selectedChannels",unionBy_default()(this.selectedChannels,this.filteredItems,"id")):this.$emit("update:selectedChannels",differenceBy_default()(this.selectedChannels,this.filteredItems,"id"))},channelPassesFilters:function(channel){var languageMatches=!0,titleMatches=!0;("ALL"!==this.languageFilter.value&&(languageMatches=channel.lang_code===this.languageFilter.value),this.titleFilter)&&(titleMatches=this.titleFilter.split(/\s+/).map((function(val){return val.toLowerCase()})).every((function(token){return channel.name.toLowerCase().includes(token)})));return languageMatches&&titleMatches}},$trs:{titleFilterPlaceholder:{message:"Search for a channel",context:"Refers to text in the search field."},allLanguages:{message:"All languages",context:"Refers to a filter option when exporting channels on a device. The user can either export channels in all languages or choose specific ones from a list."},numChannelsAvailable:{message:"{count, number, integer} {count, plural, one {channel} other {channels}} available",context:"Indicates the number of channels available. For example:\n\n'4 channels available'"},noMatchingItems:{message:"There are no channels matching these filters",context:"When using the filter options, this message will display if there are no channels that match the filter options used."},selectAll:{message:"Select all on page",context:"Option to select all of the channels that appear on the page in the 'Channels on device' section."}}},FilteredChannelListContainer=normalizeComponent(FilteredChannelListContainervue_type_script_lang_js,FilteredChannelListContainervue_type_template_id_29df2c05_scoped_true_render,[],!1,null,"29df2c05",null).exports;function DeleteExportChannelsPagevue_type_script_lang_js_typeof(o){return DeleteExportChannelsPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},DeleteExportChannelsPagevue_type_script_lang_js_typeof(o)}function DeleteExportChannelsPagevue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return DeleteExportChannelsPagevue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return DeleteExportChannelsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DeleteExportChannelsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DeleteExportChannelsPagevue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function DeleteExportChannelsPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function DeleteExportChannelsPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DeleteExportChannelsPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){DeleteExportChannelsPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DeleteExportChannelsPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function DeleteExportChannelsPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=DeleteExportChannelsPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=DeleteExportChannelsPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==DeleteExportChannelsPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DeleteExportChannelsPagevue_type_script_lang_js={name:"DeleteExportChannelsPage",metaInfo:function(){return{title:this.deleteMode?this.$tr("deleteAppBarTitle"):this.$tr("exportAppBarTitle")}},components:{ChannelPanel:WithCheckbox,FilteredChannelListContainer:FilteredChannelListContainer,ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default(),SelectionBottomBar:SelectionBottomBar,DeleteChannelModal:DeleteChannelModal,SelectDriveModal:SelectDriveModal},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default(),taskNotificationMixin],setup:function(){useContentTasks()},props:{actionType:{type:String,required:!0,validator:function(value){return"delete"===value||"export"===value}}},data:function(){return{allChannels:[],selectedChannels:[],showModal:!1,loading:!0,fileSize:null}},computed:DeleteExportChannelsPagevue_type_script_lang_js_objectSpread(DeleteExportChannelsPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent",["channelIsBeingDeleted"])),{},{appBarTitle:function(){return this.exportMode?this.$tr("exportAppBarTitle"):this.$tr("deleteAppBarTitle")},backRoute:function(){return{name:PageNames.MANAGE_CONTENT_PAGE}},exportMode:function(){return"export"===this.actionType},deleteMode:function(){return"delete"===this.actionType},modalProps:function(){return this.exportMode?{exportFileSize:this.fileSize,manageMode:!0}:{numberOfChannels:this.selectedChannels.length}}}),beforeMount:function(){this.fetchData()},methods:{fetchData:function(){var _this=this;return deviceChannel.fetchCollection({getParams:{include_fields:"on_device_file_size"},force:!0}).then((function(channels){_this.allChannels=DeleteExportChannelsPagevue_type_script_lang_js_toConsumableArray(channels.filter((function(c){return c.available&&!_this.channelIsBeingDeleted(c)}))),_this.loading=!1}))},deleteChannels:function(){var _this2=this,selectedCopy=DeleteExportChannelsPagevue_type_script_lang_js_toConsumableArray(this.selectedChannels);return this.allChannels=this.allChannels.filter((function(c){return!find_default()(_this2.selectedChannels,{id:c.id})})),external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTasks(this.selectedChannels.map((function(x){return{type:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECHANNEL,channel_id:x.id,channel_name:x.name}}))).then((function(tasks){_this2.notifyAndWatchTask(tasks),_this2.selectedChannels=[]})).catch((function(){_this2.createTaskFailedSnackbar(),_this2.selectedChannels=DeleteExportChannelsPagevue_type_script_lang_js_toConsumableArray(selectedCopy),_this2.loading=!0,_this2.fetchData()}))},exportChannels:function(params){var _this3=this;return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTasks(this.selectedChannels.map((function(_ref){var id=_ref.id,name=_ref.name;return{type:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKEXPORT,channel_id:id,channel_name:name,drive_id:params.driveId}}))).then((function(tasks){_this3.notifyAndWatchTask(tasks)})).catch((function(){_this3.createTaskFailedSnackbar()}))},handleClickConfirm:function(){this.showModal=!0},handleClickModalSubmit:function(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.showModal=!1,this.deleteMode?this.deleteChannels():this.exportChannels(params)},channelIsSelected:function(channel){return Boolean(find_default()(this.selectedChannels,{id:channel.id}))},channelSelectedMessage:function(channel){return this.channelIsSelected(channel)?this.$tr("channelSelectedMessage",{bytesText:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(channel.on_device_file_size)}):""}},$trs:{deleteAppBarTitle:{message:"Delete channels",context:"Accessed via the 'Options' button."},exportAppBarTitle:{message:"Export channels",context:"Accessed via the 'Options' button. Admins can export Kolibri channels on a local drive in order to share with another device. "},channelsOnDevice:{message:"Channels on device",context:"Indicates the channels which are on a device."},channelSelectedMessage:{message:"{bytesText} selected",context:"Indicates the size of the channels selected in bytes (GB or MB)"}}},DeleteExportChannelsPage=normalizeComponent(DeleteExportChannelsPagevue_type_script_lang_js,DeleteExportChannelsPagevue_type_template_id_76d0f66c_scoped_true_render,[],!1,null,"76d0f66c",null).exports,DeviceInfoPagevue_type_template_id_6c1f450c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("DeviceAppBarPage",{attrs:{title:_vm.pageTitle}},[_vm.isPageLoading?_vm._e():_c("KPageContainer",{staticClass:"device-container"},[_c("div",[_c("h1",[_vm._v(_vm._s(_vm.$tr("header")))]),_c("table",{class:_vm.windowIsSmall?"mobile-table":""},[_c("tr",[_c("th",[_vm._v("\n            "+_vm._s(_vm.$tr("url",{count:_vm.deviceInfo.urls.length}))+"\n          ")]),_c("td",{class:_vm.windowIsSmall?"mobile":""},_vm._l(_vm.deviceInfo.urls,(function(url,index){return _c("KExternalLink",{key:index,attrs:{text:url,href:url,primary:!0,openInNewTab:!0,appearance:"basic-link"}})})),1)]),_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$tr("freeDisk")))]),_c("td",[_vm._v(_vm._s(_vm.deviceInfo.content_storage_free_space))])]),_c("tr",[_c("th",[_vm._v("\n            "+_vm._s(_vm.$tr("kolibriVersion"))+"\n          ")]),_c("td",{class:_vm.windowIsSmall?"mobile":""},[_vm._v("\n            "+_vm._s(_vm.deviceInfo.version)+"\n          ")])]),_c("tr",[_c("th",[_vm._v(_vm._s(_vm.coreString("deviceNameLabel")))]),_c("td",[_vm._v("\n            "+_vm._s(_vm.deviceNameWithId)+"\n            "),_c("KButton",{staticClass:"edit-button",attrs:{text:_vm.coreString("editAction"),appearance:"basic-link"},on:{click:function($event){_vm.showDeviceNameModal=!0}}})],1)])]),_c("h1",[_vm._v(_vm._s(_vm.$tr("advanced")))]),_c("p",[_vm._v(_vm._s(_vm.$tr("advancedDescription")))]),_c("div",[_c("KButton",{attrs:{text:_vm.buttonText,appearance:"basic-link"},on:{click:function($event){_vm.advancedShown=!_vm.advancedShown}}})],1),_vm.advancedShown?_c("TechnicalTextBlock",{staticClass:"bottom-section",attrs:{dir:"auto",text:_vm.infoText}}):_vm._e(),_vm.showDeviceNameModal?_c("DeviceNameModal",{attrs:{deviceName:_vm.deviceName},on:{submit:_vm.handleSubmitDeviceName,cancel:function($event){_vm.showDeviceNameModal=!1}}}):_vm._e()],1)])],1)};DeviceInfoPagevue_type_template_id_6c1f450c_scoped_true_render._withStripped=!0;var TechnicalTextBlockvue_type_template_id_216ad586_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("textarea",{staticClass:"error-log",style:[_vm.dynamicHeightStyle,{backgroundColor:_vm.$themePalette.grey.v_200,border:_vm.$themePalette.grey.v_300}],attrs:{readonly:"",wrap:"soft","aria-hidden":"true"},domProps:{value:_vm.text}}),_c("pre",{ref:"textBox",staticClass:"visuallyhidden"},[_vm._v(_vm._s(_vm.text))]),_c("div",[_vm.clipboardCapable?_c("KButton",{ref:"copyButton",style:{marginTop:"8px",marginBottom:"8px"},attrs:{primary:!1,text:_vm.$tr("copyToClipboardButtonPrompt")}}):_vm._e()],1)])};TechnicalTextBlockvue_type_template_id_216ad586_scoped_true_render._withStripped=!0;var clipboard=__webpack_require__(6584),clipboard_default=__webpack_require__.n(clipboard);function TechnicalTextBlockvue_type_script_lang_js_typeof(o){return TechnicalTextBlockvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},TechnicalTextBlockvue_type_script_lang_js_typeof(o)}function TechnicalTextBlockvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function TechnicalTextBlockvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=TechnicalTextBlockvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=TechnicalTextBlockvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==TechnicalTextBlockvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var TechnicalTextBlockvue_type_script_lang_js={name:"TechnicalTextBlock",props:{text:{type:String,default:""},maxHeight:{type:Number,default:null},minHeight:{type:Number,default:72}},computed:{clipboardCapable:function(){return clipboard_default().isSupported()},dynamicHeightStyle:function(){return{height:"".concat(16+18*this.text.split("\n").length,"px"),maxHeight:"".concat(this.maxHeight,"px"),minHeight:"".concat(this.minHeight,"px")}}},mounted:function(){var _this=this;this.clipboardCapable&&(this.clipboard=new(clipboard_default())(this.$refs.copyButton.$el,{text:function(){return _this.text},container:this.$refs.textBox}),this.clipboard.on("success",(function(){_this.createSnackbar(_this.$tr("copiedToClipboardConfirmation"))})))},destroyed:function(){this.clipboard&&this.clipboard.destroy()},methods:function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?TechnicalTextBlockvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){TechnicalTextBlockvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TechnicalTextBlockvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)(["createSnackbar"])),$trs:{copyToClipboardButtonPrompt:{message:"Copy to clipboard",context:"Button which allows the user to copy content to the clipboard.\n\nA clipboard is a temporary storage area where material cut or copied from a file is kept for pasting into another file."},copiedToClipboardConfirmation:{message:"Copied to clipboard",context:"Message displayed when some content is copied to the clipboard.\n\nA clipboard is a temporary storage area where material cut or copied from a file is kept for pasting into another file."}}},TechnicalTextBlock=normalizeComponent(TechnicalTextBlockvue_type_script_lang_js,TechnicalTextBlockvue_type_template_id_216ad586_scoped_true_render,[],!1,null,"216ad586",null).exports,DeviceAppBarPagevue_type_template_id_4eb0fd50_render=function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("AppBarPage",{attrs:{title:this.title},scopedSlots:this._u([{key:"subNav",fn:function(){return[_c("DeviceTopNav")]},proxy:!0}])},[_c("DeprecationWarningBanner",{staticStyle:{"margin-bottom":"1em"}}),_c("div",[this._t("default")],2)],1)};DeviceAppBarPagevue_type_template_id_4eb0fd50_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_AppBarPage_namespaceObject=kolibriCoreAppGlobal.coreVue.components.AppBarPage,external_kolibriCoreAppGlobal_coreVue_components_AppBarPage_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_AppBarPage_namespaceObject),DeviceTopNavvue_type_template_id_41236d09_render=function(){var _h=this.$createElement,_c=this._self._c||_h;return this.links.length>0?_c("HorizontalNavBarWithOverflowMenu",{attrs:{navigationLinks:this.links}}):this._e()};DeviceTopNavvue_type_template_id_41236d09_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_HorizontalNavBarWithOverflowMenu_namespaceObject=kolibriCoreAppGlobal.coreVue.components.HorizontalNavBarWithOverflowMenu,external_kolibriCoreAppGlobal_coreVue_components_HorizontalNavBarWithOverflowMenu_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_HorizontalNavBarWithOverflowMenu_namespaceObject),deviceStrings=(0,external_kolibriCoreAppGlobal_utils_i18n_namespaceObject.createTranslator)("CommonDeviceStrings",{deviceManagementTitle:{message:"Device",context:"The device is the physical or virtual machine that has the Kolibri server installed on it."},emptyTasksMessage:{message:"There are no tasks to display",context:"Shown as an empty state on pages that display device tasks"},newResourceLabel:{message:"New",context:"Label that is shown with resources that were added after upgrading the channel."},newChannelLabel:{message:"New",context:"Refers to CHANNEL; indicates that it was recently updated, imported, and unlocked"},newEnabledPluginsState:{message:"When you uncheck a page, it will become invisible to users even if they have permission to access it.",context:"Description for restarting the server."},unlistedChannelLabel:{message:"Unlisted channel",context:"Label for channels that are not listed as public and require knowing a special token to import them"},notEnoughSpaceForChannelsWarning:{message:"Not enough space available on your device. Free up disk space or select fewer resources",context:"Warning that appears when there is not enough space on the user's device for the selected resources"},permissionsLabel:{message:"Permissions",context:"Title of tab in 'Device' section."},primaryStorageLabel:{message:"Newly downloaded resources will be added to the primary storage location",context:"Label for primary storage location."}});function deviceString(key,args){return deviceStrings.$tr(key,args)}var commonDeviceStrings={methods:{deviceString:deviceString}};function DeviceTopNavvue_type_script_lang_js_typeof(o){return DeviceTopNavvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},DeviceTopNavvue_type_script_lang_js_typeof(o)}function DeviceTopNavvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function DeviceTopNavvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DeviceTopNavvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){DeviceTopNavvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DeviceTopNavvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function DeviceTopNavvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=DeviceTopNavvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=DeviceTopNavvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==DeviceTopNavvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DeviceTopNav=normalizeComponent({name:"DeviceTopNav",components:{HorizontalNavBarWithOverflowMenu:external_kolibriCoreAppGlobal_coreVue_components_HorizontalNavBarWithOverflowMenu_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),commonDeviceStrings],computed:DeviceTopNavvue_type_script_lang_js_objectSpread(DeviceTopNavvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["canManageContent","isSuperuser","isLearnerOnlyImport"])),{},{links:function(){var list=[];return[{title:this.coreString("channelsLabel"),link:this.$router.getRoute("MANAGE_CONTENT_PAGE"),icon:"channel",color:this.$themeTokens.textInverted,condition:this.canManageContent},{title:this.deviceString("permissionsLabel"),link:this.$router.getRoute("MANAGE_PERMISSIONS_PAGE"),icon:"permissions",color:this.$themeTokens.textInverted,condition:this.isSuperuser},{title:this.coreString("facilitiesLabel"),link:this.$router.getRoute("FACILITIES_PAGE"),icon:"facility",color:this.$themeTokens.textInverted,condition:this.isSuperuser&&!this.isLearnerOnlyImport},{title:this.coreString("infoLabel"),link:this.$router.getRoute("DEVICE_INFO_PAGE"),icon:"deviceInfo",color:this.$themeTokens.textInverted,condition:this.isSuperuser},{title:this.coreString("settingsLabel"),link:this.$router.getRoute("DEVICE_SETTINGS_PAGE"),icon:"settings",color:this.$themeTokens.textInverted,condition:this.isSuperuser}].forEach((function(linkDefs){linkDefs.condition&&list.push(linkDefs)})),list.flat()}})},DeviceTopNavvue_type_template_id_41236d09_render,[],!1,null,null,null).exports,DeprecationWarningBannervue_type_template_id_71834e9c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.showBanner,expression:"showBanner"}],staticClass:"alert",style:{backgroundColor:_vm.$themePalette.yellow.v_100}},[_c("div",{staticStyle:{display:"flex"}},[_c("div",[_c("KIcon",{staticClass:"icon",attrs:{icon:"warning",color:_vm.$themePalette.amber.v_a400}})],1),_c("div",{staticClass:"error-message"},[_vm.py27Deprecated?_c("p",[_vm._v("\n        "+_vm._s(_vm.coreString("pythonSupportWillBeDropped"))+"\n      ")]):_vm._e(),_vm.currentUserOnIE11?_c("p",[_vm._v("\n        "+_vm._s(_vm.coreString("currentDeviceUsingIE11"))+"\n      ")]):_vm._e(),_vm.userDevicesUsingIE11?_c("p",[_vm._v("\n        "+_vm._s(_vm.coreString("userDevicesUsingIE11"))+"\n      ")]):_vm._e(),_vm.currentUserOnIE11||_vm.userDevicesUsingIE11?_c("p",[_vm._v("\n        "+_vm._s(_vm.coreString("browserSupportWillBeDroppedIE11"))+"\n      ")]):_vm._e()])])])};DeprecationWarningBannervue_type_template_id_71834e9c_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_utils_browserInfo_namespaceObject=kolibriCoreAppGlobal.utils.browserInfo,DeprecationWarningBanner=normalizeComponent({name:"DeprecationWarningBanner",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],computed:{showBanner:function(){return this.currentUserOnIE11||this.userDevicesUsingIE11||this.py27Deprecated},userDevicesUsingIE11:function(){return plugin_data_src.deprecationWarnings.ie11},py27Deprecated:function(){return plugin_data_src.deprecationWarnings.py27},currentUserOnIE11:function(){return"IE"===external_kolibriCoreAppGlobal_utils_browserInfo_namespaceObject.browser.name}}},DeprecationWarningBannervue_type_template_id_71834e9c_scoped_true_render,[],!1,null,"71834e9c",null).exports,DeviceAppBarPage=normalizeComponent({name:"DeviceAppBarPage",components:{AppBarPage:external_kolibriCoreAppGlobal_coreVue_components_AppBarPage_default(),DeprecationWarningBanner:DeprecationWarningBanner,DeviceTopNav:DeviceTopNav},props:{title:{type:String,required:!0}}},DeviceAppBarPagevue_type_template_id_4eb0fd50_render,[],!1,null,null,null).exports,DeviceNameModalvue_type_template_id_2fd3aae8_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.coreString("deviceNameLabel"),submitText:_vm.coreString("saveAction"),cancelText:_vm.coreString("cancelAction")},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}}},[_c("p",[_vm._v("\n    "+_vm._s(_vm.$tr("deviceNameExplanation"))+"\n  ")]),_c("KTextbox",{ref:"name",attrs:{type:"text",label:_vm.coreString("deviceNameLabel"),autofocus:!0,invalid:_vm.nameIsInvalid,invalidText:_vm.nameIsInvalidText,maxlength:50},on:{blur:function($event){_vm.nameBlurred=!0}},model:{value:_vm.name,callback:function($$v){_vm.name="string"==typeof $$v?$$v.trim():$$v},expression:"name"}})],1)};DeviceNameModalvue_type_template_id_2fd3aae8_scoped_true_render._withStripped=!0;var DeviceNameModal_component=normalizeComponent({name:"DeviceNameModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{deviceName:{type:String,default:""}},data:function(){return{name:this.deviceName,nameBlurred:!1,formSubmitted:!1}},computed:{nameIsInvalidText:function(){return(this.nameBlurred||this.formSubmitted)&&""===this.name?this.coreString("requiredFieldError"):""},nameIsInvalid:function(){return Boolean(this.nameIsInvalidText)}},methods:{handleSubmit:function(){this.formSubmitted=!0,this.nameIsInvalid?this.$refs.name.focus():this.$emit("submit",this.name)}},$trs:{deviceNameExplanation:{message:"Give a unique and meaningful name to this device so you and others in your network can easily recognize it",context:"Explanation of what the device name is"}}},DeviceNameModalvue_type_template_id_2fd3aae8_scoped_true_render,[],!1,null,"2fd3aae8",null);function DeviceInfoPagevue_type_script_lang_js_typeof(o){return DeviceInfoPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},DeviceInfoPagevue_type_script_lang_js_typeof(o)}function DeviceInfoPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function DeviceInfoPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DeviceInfoPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){DeviceInfoPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DeviceInfoPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function DeviceInfoPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=DeviceInfoPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=DeviceInfoPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==DeviceInfoPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DeviceInfoPage=normalizeComponent({name:"DeviceInfoPage",metaInfo:function(){return{title:this.$tr("header")}},components:{DeviceAppBarPage:DeviceAppBarPage,DeviceNameModal:DeviceNameModal_component.exports,TechnicalTextBlock:TechnicalTextBlock},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default()],data:function(){return{advancedShown:!1,showDeviceNameModal:!1}},computed:DeviceInfoPagevue_type_script_lang_js_objectSpread(DeviceInfoPagevue_type_script_lang_js_objectSpread(DeviceInfoPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["isPageLoading"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("deviceInfo",["deviceInfo","deviceName"])),{},{buttonText:function(){return this.advancedShown?this.$tr("hide"):this.coreString("showAction")},infoText:function(){return["Version:           ".concat(this.deviceInfo.version),"OS:                ".concat(this.deviceInfo.os),"Python:            ".concat(this.deviceInfo.python_version),"Installer:         ".concat(this.deviceInfo.installer),"Server:            ".concat(this.deviceInfo.server_type),"Database:          ".concat(this.deviceInfo.database_path),"Free disk space:   ".concat(this.deviceInfo.content_storage_free_space),"Server time:       ".concat(this.deviceInfo.server_time),"Server timezone:   ".concat(this.deviceInfo.server_timezone),"Device ID:         ".concat(this.deviceInfo.device_id)].join("\n")},deviceNameWithId:function(){return this.$tr("deviceNameWithId",{deviceName:this.deviceName,deviceId:this.deviceInfo.device_id.slice(0,4)})},pageTitle:function(){return deviceString("deviceManagementTitle")}}),methods:{handleSubmitDeviceName:function(newName){var _this=this;this.showDeviceNameModal=!1,this.$store.dispatch("deviceInfo/updateDeviceName",newName).then((function(){_this.$store.dispatch("createSnackbar",_this.coreString("changesSavedNotification"))})).catch((function(){_this.$store.dispatch("createSnackbar",_this.coreString("changesNotSavedNotification"))}))}},$trs:{header:{message:"Device info",context:"Title of the Device > Info page."},kolibriVersion:{message:"Kolibri version",context:"Indicates the version of Kolibri currently running on the device."},url:{message:"Server {count, plural, one {URL} other {URLs}}",context:"Indicates the server URL. (In plural if there is more than one URL)"},freeDisk:{message:"Free disk space",context:"In the 'Advanced' section this indicates how much disk space is free on the Device."},advanced:{message:"Advanced",context:"Option on the Device > Info tab which shows more detailed information about the device."},advancedDescription:{message:"This information may be helpful for troubleshooting or error reporting",context:"Description of the 'Advanced' section on the 'Device info' page."},hide:{message:"Hide",context:"Option to show or hide the 'Advanced' information section of the 'Device info' page."},deviceNameWithId:{message:"{deviceName} ({deviceId})",context:"DO NOT TRANSLATE\nCopy the source string."}}},DeviceInfoPagevue_type_template_id_6c1f450c_scoped_true_render,[],!1,null,"6c1f450c",null).exports,DeviceSettingsPagevue_type_template_id_48bf9f8a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("DeviceAppBarPage",{attrs:{title:_vm.pageTitle},scopedSlots:_vm._u([{key:"subNav",fn:function(){return[_c("DeviceTopNav")]},proxy:!0}])},[_vm.isPageLoading?_vm._e():_c("KPageContainer",{staticClass:"device-container"},[_vm.showDisabledAlert&&_vm.alertDismissed?_c("UiAlert",{attrs:{type:"warning"},on:{dismiss:function($event){_vm.alertDismissed=!1}}},[_vm._v("\n      "+_vm._s(_vm.disabledAlertText)+"\n\n    ")]):_vm._e(),_c("section",[_c("h1",[_vm._v("\n        "+_vm._s(_vm.$tr("pageHeader"))+"\n      ")]),_c("p",[_vm._v("\n        "+_vm._s(_vm.$tr("pageDescription"))+"\n        "),!_vm.isMultiFacilitySuperuser&&_vm.getFacilitySettingsPath()?_c("KExternalLink",{attrs:{text:_vm.$tr("facilitySettings"),href:_vm.getFacilitySettingsPath()}}):_vm._e()],1)]),_c("section",[_c("div",{staticClass:"fieldset"},[_c("KSelect",{staticStyle:{"max-width":"300px"},attrs:{label:_vm.$tr("selectedLanguageLabel"),options:_vm.languageOptions,disabled:void 0===_vm.language.value,floatingLabel:!1},model:{value:_vm.language,callback:function($$v){_vm.language=$$v},expression:"language"}})],1),_c("div",{staticClass:"fieldset"},[_c("label",{staticClass:"fieldset-label"},[_vm._v(_vm._s(_vm.$tr("externalDeviceSettings")))]),_c("KCheckbox",{attrs:{label:_vm.$tr("unlistedChannels"),checked:_vm.allowPeerUnlistedChannelImport},on:{change:function($event){_vm.allowPeerUnlistedChannelImport=$event}}}),_vm.isAppContext?_c("KCheckbox",{attrs:{checked:_vm.allowOtherBrowsersToConnect},on:{change:function($event){_vm.allowOtherBrowsersToConnect=$event}}},[_c("span",[_vm._v(" "+_vm._s(_vm.$tr("allowExternalConnectionsApp"))+"\n            "),_vm.allowOtherBrowsersToConnect?_c("p",{staticClass:"description",style:{color:_vm.$themeTokens.annotation}},[_vm._v("\n              "+_vm._s(_vm.$tr("allowExternalConnectionsAppDescription"))+"\n            ")]):_vm._e()])]):_vm._e()],1),_c("div",{staticClass:"fieldset"},[_c("label",{staticClass:"fieldset-label"},[_vm._v(_vm._s(_vm.$tr("landingPageLabel")))]),_c("KRadioButton",{attrs:{"data-test":"landingPageButton",label:_vm.$tr("learnerAppPageChoice"),value:_vm.landingPageChoices.LEARN,currentValue:_vm.landingPage},on:{input:_vm.handleLandingPageChange}}),_c("KRadioButton",{attrs:{"data-test":"signInPageButton",label:_vm.$tr("signInPageChoice"),value:_vm.landingPageChoices.SIGN_IN,currentValue:_vm.landingPage},on:{input:_vm.handleLandingPageChange}}),_c("div",{staticClass:"fieldset",staticStyle:{"margin-left":"32px"}},[_c("KRadioButton",{attrs:{"data-test":"allowGuestAccessButton",label:_vm.$tr("allowGuestAccess"),value:_vm.SignInPageOptions.ALLOW_GUEST_ACCESS,currentValue:_vm.signInPageOption,disabled:_vm.disableSignInPageOptions},on:{input:_vm.handleSignInPageChange}}),_c("KRadioButton",{attrs:{"data-test":"disallowGuestAccessButton",label:_vm.$tr("disallowGuestAccess"),value:_vm.SignInPageOptions.DISALLOW_GUEST_ACCESS,currentValue:_vm.signInPageOption,disabled:_vm.disableSignInPageOptions},on:{input:_vm.handleSignInPageChange}}),_c("KRadioButton",{attrs:{"data-test":"lockedContentButton",label:_vm.$tr("lockedContent"),value:_vm.SignInPageOptions.LOCKED_CONTENT,currentValue:_vm.signInPageOption,disabled:_vm.disableSignInPageOptions},on:{input:_vm.handleSignInPageChange}})],1)],1),_vm.canCheckMeteredConnection?_c("div",{staticClass:"fieldset"},[_c("h2",[_c("label",[_vm._v(_vm._s(_vm.$tr("allowDownloadOnMeteredConnection")))])]),_c("p",{staticClass:"info-description"},[_vm._v("\n          "+_vm._s(_vm.$tr("DownloadOnMeteredConnectionDescription"))+"\n        ")]),_c("KRadioButton",{attrs:{label:_vm.$tr("doNotAllowDownload"),value:_vm.meteredConnectionDownloadOptions.DISALLOW_DOWNLOAD_ON_METERED_CONNECTION,currentValue:_vm.meteredConnectionDownloadOption},on:{input:_vm.handleMeteredConnectionDownloadChange}}),_c("KRadioButton",{attrs:{label:_vm.$tr("allowDownload"),value:_vm.meteredConnectionDownloadOptions.ALLOW_DOWNLOAD_ON_METERED_CONNECTION,currentValue:_vm.meteredConnectionDownloadOption},on:{input:_vm.handleMeteredConnectionDownloadChange}})],1):_vm._e(),_c("div",[_c("h2",[_vm._v("\n          "+_vm._s(_vm.$tr("primaryStorage"))+"\n        ")]),_c("p",{staticClass:"info-description"},[_vm._v("\n          "+_vm._s(_vm.$tr("primaryStorageDescription"))+"\n        ")]),_c("p",[_vm._v("\n          "+_vm._s(_vm.primaryStorageLocation)+"\n          "),_c("KButton",{directives:[{name:"show",rawName:"v-show",value:_vm.secondaryStorageLocations.length>=1,expression:"(secondaryStorageLocations.length >= 1)"}],class:{disabled:!_vm.multipleWritablePaths},attrs:{text:_vm.$tr("changeLocation"),primary:!0,appearance:"basic-link",disabled:!_vm.multipleWritablePaths||_vm.isRemoteContent||!_vm.canRestart},on:{click:function($event){_vm.showChangePrimaryLocationModal=!0}}})],1),0===_vm.secondaryStorageLocations.length?_c("KButton",{attrs:{text:_vm.$tr("addLocation"),disabled:_vm.isRemoteContent||!_vm.canRestart,appearance:"raised-button",secondary:""},on:{click:function($event){_vm.showAddStorageLocationModal=!0}}}):_vm._e()],1),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.secondaryStorageLocations.length>0,expression:"secondaryStorageLocations.length > 0"}]},[_c("h2",[_vm._v("\n          "+_vm._s(_vm.$tr("secondaryStorage"))+"\n        ")]),_c("p",{directives:[{name:"show",rawName:"v-show",value:_vm.multipleReadOnlyPaths,expression:"multipleReadOnlyPaths"}],staticClass:"info-description"},[_vm._v("\n          "+_vm._s(_vm.$tr("secondaryStorageDescription"))+"\n        ")]),_vm._l(_vm.secondaryStorageLocations,(function(path){return _c("p",{key:path.index},[_vm._v("\n          "+_vm._s(path)+" "+_vm._s(_vm.isWritablePath(path))+"\n        ")])})),_c("KButton",{attrs:{hasDropdown:"",secondary:"",appearance:"raised-button",disabled:_vm.isRemoteContent||!_vm.canRestart,text:_vm.coreString("optionsLabel")},scopedSlots:_vm._u([{key:"menu",fn:function(){return[_c("KDropdownMenu",{attrs:{options:_vm.storageLocationOptions},on:{select:function($event){return _vm.handleSelect($event)}}})]},proxy:!0}],null,!1,300712223)})],2),_c("div",{staticClass:"fieldset"},[_c("h2",[_c("label",[_vm._v(_vm._s(_vm.$tr("autoDownload")))])]),_c("KCheckbox",{attrs:{label:_vm.$tr("enableAutoDownload"),checked:_vm.enableAutomaticDownload,description:_vm.$tr("enableAutoDownloadDescription"),disabled:_vm.isRemoteContent},on:{change:function($event){return _vm.handleCheckAutodownload("enableAutomaticDownload",$event)}}}),_c("div",{staticClass:"fieldset left-margin"},[_c("KCheckbox",{attrs:{label:_vm.$tr("allowLearnersDownloadResources"),checked:_vm.allowLearnerDownloadResources,description:_vm.$tr("allowLearnersDownloadDescription"),disabled:_vm.isRemoteContent},on:{change:function($event){return _vm.handleCheckAutodownload("allowLearnerDownloadResources",$event)}}}),_c("KCheckbox",{attrs:{label:_vm.$tr("setStorageLimit"),checked:_vm.setLimitForAutodownload,description:_vm.$tr("setStorageLimitDescription"),disabled:_vm.isRemoteContent},on:{change:function($event){return _vm.handleCheckAutodownload("setLimitForAutodownload",$event)}}}),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.setLimitForAutodownload,expression:"setLimitForAutodownload"}],staticClass:"left-margin limit-for-autodownload",class:_vm.$computedClass(_vm.limitForAutodownloadStyle),attrs:{disabled:_vm.isRemoteContent}},[_c("KTextbox",{ref:"autoDownloadLimit",staticClass:"download-limit-textbox",attrs:{disabled:_vm.notEnoughFreeSpace||_vm.isRemoteContent,type:"number",label:_vm.$tr("sizeInGigabytesLabel"),min:0,max:_vm.toGigabytes(_vm.freeSpace),invalid:_vm.notEnoughFreeSpace,invalidText:_vm.$tr("notEnoughFreeSpace"),floatingLabel:!1},on:{input:_vm.updateLimitForAutodownload},model:{value:_vm.limitForAutodownloadInput,callback:function($$v){_vm.limitForAutodownloadInput=$$v},expression:"limitForAutodownloadInput"}}),_c("div",{staticClass:"slider-section",class:_vm.$computedClass(_vm.sliderSectionStyle)},[_c("p",{staticClass:"slider-min-max"},[_vm._v("\n                0\n              ")]),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.limitForAutodownload,expression:"limitForAutodownload"}],class:_vm.$computedClass(_vm.sliderStyle),attrs:{id:"slider",disabled:_vm.notEnoughFreeSpace||_vm.isRemoteContent,type:"range",min:"0",max:_vm.freeSpace,step:"1"},domProps:{value:_vm.limitForAutodownload},on:{input:_vm.updateLimitForAutodownloadInput,__r:function($event){_vm.limitForAutodownload=$event.target.value}}}),_c("p",{staticClass:"slider-min-max"},[_vm._v("\n                "+_vm._s(_vm.toGigabytes(_vm.freeSpace))+"\n              ")])])],1)],1)],1),_c("div",{staticClass:"fieldset"},[_c("h2",[_vm._v("\n          "+_vm._s(_vm.$tr("enabledPages"))+"\n        ")]),_c("p",{staticClass:"info-description"},[_vm._v("\n          "+_vm._s(_vm.deviceString("newEnabledPluginsState"))+"\n        ")]),_vm._l(_vm.dataPlugins,(function(plugin){return _c("KCheckbox",{key:plugin.id,attrs:{label:plugin.name,checked:plugin.enabled,disabled:!_vm.canRestart},on:{change:function($event){plugin.enabled=$event}}})}))],2)]),_vm.isMultiFacilitySuperuser?_c("section",[_c("h2",[_vm._v(_vm._s(_vm.$tr("configureFacilitySettingsHeader")))]),_c("ul",{staticClass:"ul-reset"},[_vm._l(_vm.facilities,(function(facility,idx){return _c("li",{key:idx},[_c("KExternalLink",{attrs:{text:facility.name,href:_vm.getFacilitySettingsPath(facility.id),icon:"facility"}})],1)}))],2)]):_vm._e(),_vm.isAppContext?_c("section",{staticClass:"android-bar"},[_c("KButton",{attrs:{text:_vm.coreString("saveChangesAction"),appearance:"raised-button",primary:"","data-test":"saveButtonAndroid"},on:{click:_vm.handleClickSave}})],1):_c("BottomAppBar",[_c("KButtonGroup",[_c("KButton",{attrs:{text:_vm.coreString("saveChangesAction"),appearance:"raised-button",primary:"","data-test":"saveButton"},on:{click:_vm.handleClickSave}})],1)],1),_vm.showChangePrimaryLocationModal?_c("PrimaryStorageLocationModal",{attrs:{primaryPath:_vm.primaryStorageLocation,storageLocations:_vm.storageLocations.filter((function(el){return el.writable}))},on:{cancel:function($event){_vm.showChangePrimaryLocationModal=!1},submit:_vm.changePrimaryLocation}}):_vm._e(),_vm.showAddStorageLocationModal?_c("AddStorageLocationModal",{attrs:{paths:_vm.storageLocations},on:{cancel:function($event){_vm.showAddStorageLocationModal=!1},submit:_vm.addStorageLocation}}):_vm._e(),_vm.showRemoveStorageLocationModal?_c("RemoveStorageLocationModal",{attrs:{storageLocations:_vm.secondaryStorageLocations},on:{cancel:function($event){_vm.showRemoveStorageLocationModal=!1},submit:_vm.removeStorageLocation}}):_vm._e(),_vm.showRestartModal?_c("ServerRestartModal",{attrs:{path:_vm.restartPath,changedSetting:_vm.restartSetting},on:{cancel:function($event){_vm.showRestartModal=!1},submit:_vm.handleServerRestart}}):_vm._e(),_vm.restarting?_c("ServerRestartModal",{attrs:{restarting:!0}}):_vm._e()],1)],1)};DeviceSettingsPagevue_type_template_id_48bf9f8a_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_lib_logging_namespaceObject=kolibriCoreAppGlobal.lib.logging,external_kolibriCoreAppGlobal_lib_logging_default=__webpack_require__.n(external_kolibriCoreAppGlobal_lib_logging_namespaceObject),external_kolibriCoreAppGlobal_utils_sortLanguages_namespaceObject=kolibriCoreAppGlobal.utils.sortLanguages,external_kolibriCoreAppGlobal_utils_sortLanguages_default=__webpack_require__.n(external_kolibriCoreAppGlobal_utils_sortLanguages_namespaceObject),external_kolibriCoreAppGlobal_coreVue_composables_useKResponsiveWindow_namespaceObject=kolibriCoreAppGlobal.coreVue.composables.useKResponsiveWindow,external_kolibriCoreAppGlobal_coreVue_composables_useKResponsiveWindow_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_composables_useKResponsiveWindow_namespaceObject),external_kolibriCoreAppGlobal_utils_appCapabilities_namespaceObject=kolibriCoreAppGlobal.utils.appCapabilities;function getFreeSpaceOnServer(){return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:deviceinfo"]()}).then((function(response){return{freeSpace:response.data.content_storage_free_space}}))}var external_kolibriCoreAppGlobal_heartbeat_namespaceObject=kolibriCoreAppGlobal.heartbeat,external_kolibriCoreAppGlobal_heartbeat_default=__webpack_require__.n(external_kolibriCoreAppGlobal_heartbeat_namespaceObject),external_kolibriCoreAppGlobal_utils_clientFactory_namespaceObject=kolibriCoreAppGlobal.utils.clientFactory,external_kolibriCoreAppGlobal_utils_clientFactory_default=__webpack_require__.n(external_kolibriCoreAppGlobal_utils_clientFactory_namespaceObject),restarting=(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.ref)(!1),canRestart=plugin_data_src.canRestart,baseClient=external_kolibriCoreAppGlobal_utils_clientFactory_default()();function restart(){if(!canRestart)return Promise.reject("Device restart is not supported with current server configuration");restarting.value=!0,external_kolibriCoreAppGlobal_heartbeat_default().stopPolling();var statusPromise=external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:devicerestart"](),method:"POST"}).then((function(resp){return Boolean(resp.data)})),checkStatus=function checkStatus(expectedStatus){return statusPromise.then((function(status){if(status!==expectedStatus)return statusPromise=new Promise((function(resolve){setTimeout((function(){baseClient({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:devicerestart"]()}).then((function(resp){return Boolean(resp.data)})).catch((function(){return!0})).then(resolve)}),500)})),checkStatus(expectedStatus)}))};return checkStatus(!0).then((function(){return checkStatus(!1).then((function(){external_kolibriCoreAppGlobal_heartbeat_default().startPolling(),restarting.value=!1}))}))}function useDeviceRestart(){return{restarting:restarting,restart:restart,canRestart:canRestart}}var isEqual=__webpack_require__(9586),isEqual_default=__webpack_require__.n(isEqual),pickBy=__webpack_require__(9348),pickBy_default=__webpack_require__.n(pickBy);function api_typeof(o){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},api_typeof(o)}function api_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return api_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||api_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function api_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return api_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?api_arrayLikeToArray(o,minLen):void 0}}function api_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function api_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function api_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?api_ownKeys(Object(t),!0).forEach((function(r){api_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):api_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function api_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=api_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=api_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==api_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var url=external_kolibriCoreAppGlobal_urls_default()["kolibri:core:devicesettings"](),_dataCache={};function getPathPermissions(path){return external_kolibriCoreAppGlobal_client_default()({url:"".concat(external_kolibriCoreAppGlobal_urls_default()["kolibri:core:pathpermission"]()),params:{path:path}})}function getPathsPermissions(paths){var _step,pathsInfo=[],_iterator=function(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=api_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(paths);try{var _loop=function(){var path=_step.value;getPathPermissions(path).then((function(permissions){pathsInfo.push({path:path,writable:permissions.data.writable})}))};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}return pathsInfo}var PrimaryStorageLocationModalvue_type_template_id_ee75616a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("changePrimaryLocation"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction")},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}}},[_c("p",{staticClass:"description"},[_vm._v("\n    "+_vm._s(_vm.deviceString("primaryStorageLabel"))+"\n  ")]),_vm._l(_vm.storageLocations,(function(path){return _c("KRadioButton",{key:path.index,attrs:{value:path.path,label:path.path},model:{value:_vm.selectedPath,callback:function($$v){_vm.selectedPath=$$v},expression:"selectedPath"}})}))],2)};PrimaryStorageLocationModalvue_type_template_id_ee75616a_scoped_true_render._withStripped=!0;var PrimaryStorageLocationModal=normalizeComponent({name:"PrimaryStorageLocationModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),commonDeviceStrings],props:{storageLocations:{type:Array,required:!0},primaryPath:{type:String,required:!0}},data:function(){return{selectedPath:this.primaryPath}},methods:{handleSubmit:function(){this.selectedPath!==this.primaryPath?this.$emit("submit",this.selectedPath):this.$emit("cancel")}},$trs:{changePrimaryLocation:{message:"Change primary storage location",context:"Prompt for changing the primary storage location."}}},PrimaryStorageLocationModalvue_type_template_id_ee75616a_scoped_true_render,[],!1,null,"ee75616a",null).exports,AddStorageLocationModalvue_type_template_id_af4c6c4a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("newStorageLocation"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction")},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}}},[_c("p",{staticClass:"description"},[_vm._v("\n    "+_vm._s(_vm.$tr("newStorageLocationDescription"))+"\n  ")]),_c("KTextbox",{ref:"autoDownloadLimit",attrs:{type:"text",label:_vm.$tr("filePath"),invalid:_vm.invalidPath,invalidText:_vm.showError,showInvalidText:!0},on:{input:function($event){_vm.invalidPath=!1}},model:{value:_vm.path,callback:function($$v){_vm.path=$$v},expression:"path"}})],1)};AddStorageLocationModalvue_type_template_id_af4c6c4a_scoped_true_render._withStripped=!0;var AddStorageLocationModal=normalizeComponent({name:"AddStorageLocationModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{paths:{type:Array,required:!0}},data:function(){return{path:null,invalidPath:!1,errorType:null}},computed:{showError:function(){return"directory"===this.errorType?this.$tr("errorInvalidFolder"):this.$tr("errorExistingFolder")}},methods:{handleSubmit:function(){var _this=this;getPathPermissions(this.path).then((function(permissions){var writable=permissions.data.writable;if(_this.paths.filter((function(el){return el.path===_this.path})).length>0)return _this.invalidPath=!0,void(_this.errorType="exists");_this.invalidPath=!permissions.data.directory,permissions.data.directory?_this.$emit("submit",permissions.data.path,writable):_this.errorType="directory"}))}},$trs:{newStorageLocation:{message:"New storage location file path",context:"Prompt for adding a new storage location."},newStorageLocationDescription:{message:"Copy and paste a file path from your Kolibri server that contains Kolibri channels. By default, channels exported to a drive from Kolibri will be in a content folder called KOLIBRI_DATA_DIR.",context:"Description for adding a storage location."},filePath:{message:"File path",context:"Label for new storage location input"},errorInvalidFolder:{message:"This is not a valid folder in the server",context:"Error text for new storage location input"},errorExistingFolder:{message:"This folder is already in the list of storage locations",context:"Error text for new storage location input"}}},AddStorageLocationModalvue_type_template_id_af4c6c4a_scoped_true_render,[],!1,null,"af4c6c4a",null).exports,RemoveStorageLocationModalvue_type_template_id_9dd8bbda_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("removeStorageLocation"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction")},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}}},[_c("p",{staticClass:"description"},[_vm._v("\n    "+_vm._s(_vm.$tr("removeStorageLocationDescription"))+"\n  ")]),_c("p",[_vm._v(_vm._s(_vm.$tr("deleteFilesDescription")))]),_vm._l(_vm.storageLocations,(function(path){return _c("KRadioButton",{key:path.index,attrs:{value:path,label:path},model:{value:_vm.selectedPath,callback:function($$v){_vm.selectedPath=$$v},expression:"selectedPath"}})}))],2)};RemoveStorageLocationModalvue_type_template_id_9dd8bbda_scoped_true_render._withStripped=!0;var RemoveStorageLocationModal=normalizeComponent({name:"RemoveStorageLocationModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{storageLocations:{type:Array,required:!0}},data:function(){return{selectedPath:this.storageLocations[0]}},methods:{handleSubmit:function(){var _this=this;getPathPermissions(this.selectedPath).then((function(permissions){var writable=permissions.data.writable;permissions.data.directory&&_this.$emit("submit",_this.selectedPath,writable)}))}},$trs:{removeStorageLocation:{message:"Removing storage location",context:"Prompt for removing a storage location."},removeStorageLocationDescription:{message:"When you remove a storage location, Kolibri will not be able to access it, but resources will not be deleted from your device.",context:"Description for removing a storage location."},deleteFilesDescription:{message:"If you want to delete the files from your device after removing the storage location, you will need to manually do so from your device's file system.",context:"Description for deleting a file after removing a storage location."}}},RemoveStorageLocationModalvue_type_template_id_9dd8bbda_scoped_true_render,[],!1,null,"9dd8bbda",null).exports,ServerRestartModalvue_type_template_id_49c736b3_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("serverRestart"),submitText:_vm.restarting?null:_vm.coreString("continueAction"),cancelText:_vm.restarting?null:_vm.coreString("cancelAction")},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}}},["add"===_vm.changedSetting?_c("p",{staticClass:"description"},[_vm._v("\n    "+_vm._s(_vm.$tr("selectedPath",{path:_vm.path.path}))+"\n  ")]):_vm._e(),_c("p",{staticClass:"description"},[_vm._v("\n    "+_vm._s(_vm.getMessage())+"\n  ")]),_vm.restarting?[_vm._v("\n    \n    "),_c("KCircularLoader"),_vm._v("\n    \n  ")]:_vm._e(),"add"===_vm.changedSetting&&!0===_vm.path.writable?_c("div",[_c("KCheckbox",{attrs:{checked:_vm.confirmationChecked,label:_vm.$tr("makePrimary"),description:_vm.deviceString("primaryStorageLabel")},on:{change:function($event){_vm.confirmationChecked=$event}}})],1):_vm._e()],2)};ServerRestartModalvue_type_template_id_49c736b3_scoped_true_render._withStripped=!0;var ServerRestartModal=normalizeComponent({name:"ServerRestartModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),commonDeviceStrings],props:{changedSetting:{type:String,default:null},path:{type:Object,required:!1,default:null},restarting:{type:Boolean,default:!1}},data:function(){return{confirmationChecked:!1}},methods:{getMessage:function(){if(!this.changedSetting)return this.$tr("serverRestartDescription");var message="";switch(this.changedSetting){case"primary":message=this.$tr("newPrimaryLocationRestartDescription");break;case"remove":message=this.$tr("removeLocationRestartDescription");break;case"add":message=this.$tr("newLocationRestartDescription");break;case"plugin":message=this.deviceString("newEnabledPluginsState")}return"primary"===this.changedSetting?message:message+" "+this.$tr("serverRestartDescription")},handleSubmit:function(){"add"===this.changedSetting?this.$emit("submit",this.confirmationChecked):this.$emit("submit")}},$trs:{serverRestart:{message:"Server restart",context:"Prompt for removing a storage location."},newLocationRestartDescription:{message:"Server needs to restart to add a new storage location.",context:"Reason to restart the server."},newPrimaryLocationRestartDescription:{message:"Server needs to restart to add a new storage location. Anyone using Kolibri on this server at this time will temporarily be unable to access it.",context:"Reason to restart the server."},removeLocationRestartDescription:{message:"Removing a storage location will restart this server.",context:"Reason to restart the server."},serverRestartDescription:{message:"Anyone using Kolibri on this server right now will temporarily be unable to use it.",context:"Description for restarting the server."},enableOrDisableRequiresRefresh:{message:"When you enable or disable a page, Kolibri will restart, and you must refresh the browser to see the changes. Anyone using Kolibri on this server at this time will be temporarily disconnected.",context:"Changing enabled pages"},serverNeedsRestart:{message:"The server will need to restart. Do this during low server usage times to avoid disruptions.",context:""},selectedPath:{message:"Selected: {path}",context:"Label for the selected path."},makePrimary:{message:"Make this the primary storage location",context:"Checkbox to make primary storage location."}}},ServerRestartModalvue_type_template_id_49c736b3_scoped_true_render,[],!1,null,"49c736b3",null).exports;function DeviceSettingsPagevue_type_script_lang_js_typeof(o){return DeviceSettingsPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},DeviceSettingsPagevue_type_script_lang_js_typeof(o)}function DeviceSettingsPagevue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return DeviceSettingsPagevue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return DeviceSettingsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DeviceSettingsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DeviceSettingsPagevue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function DeviceSettingsPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function DeviceSettingsPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DeviceSettingsPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){DeviceSettingsPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DeviceSettingsPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function DeviceSettingsPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=DeviceSettingsPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=DeviceSettingsPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==DeviceSettingsPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var logging=external_kolibriCoreAppGlobal_lib_logging_default().getLogger("kolibri/plugins/device/assets/src/views/DeviceSettingsPage/index.vue?vue&type=script&lang=js"),SignInPageOptions=Object.freeze({LOCKED_CONTENT:"LOCKED_CONTENT",DISALLOW_GUEST_ACCESS:"DISALLOW_GUEST_ACCESS",ALLOW_GUEST_ACCESS:"ALLOW_GUEST_ACCESS"}),DeviceSettingsPagevue_type_script_lang_js={name:"DeviceSettingsPage",metaInfo:function(){return{title:this.$tr("pageHeader")}},components:{DeviceAppBarPage:DeviceAppBarPage,BottomAppBar:external_kolibriCoreAppGlobal_coreVue_components_BottomAppBar_default(),PrimaryStorageLocationModal:PrimaryStorageLocationModal,AddStorageLocationModal:AddStorageLocationModal,RemoveStorageLocationModal:RemoveStorageLocationModal,ServerRestartModal:ServerRestartModal,UiAlert:external_kolibriCoreAppGlobal_coreVue_components_UiAlert_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),commonDeviceStrings],setup:function(){var _useDeviceRestart=useDeviceRestart(),canRestart=_useDeviceRestart.canRestart,restart=_useDeviceRestart.restart,restarting=_useDeviceRestart.restarting,_usePlugins=function(){var plugins=(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.ref)(null),fetchPlugins=Promise.resolve(external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:plugins-list"]()}).then((function(response){plugins.value=response.data})));function togglePlugin(pluginId,value){var pluginIndex=plugins.value.findIndex((function(plugin){return plugin.id===pluginId}));return-1!==pluginIndex?plugins.value[pluginIndex].enabled!==value?external_kolibriCoreAppGlobal_client_default()({method:"PATCH",url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:plugins-detail"](pluginId),data:{enabled:value}}).then((function(response){plugins.value.splice(pluginIndex,1,response.data)})):Promise.resolve():Promise.reject(new Error("Plugin ".concat(pluginId," not found")))}return{plugins:plugins,fetchPlugins:fetchPlugins,enablePlugin:function(pluginId){return togglePlugin(pluginId,!0)},disablePlugin:function(pluginId){return togglePlugin(pluginId,!1)},togglePlugin:togglePlugin}}(),plugins=_usePlugins.plugins,fetchPlugins=_usePlugins.fetchPlugins,togglePlugin=_usePlugins.togglePlugin,windowIsSmall=external_kolibriCoreAppGlobal_coreVue_composables_useKResponsiveWindow_default()().windowIsSmall,dataPlugins=(0,external_kolibriCoreAppGlobal_lib_vueCompositionApi_namespaceObject.ref)(null);return fetchPlugins.then((function(){dataPlugins.value=plugins.value.map((function(plugin){return DeviceSettingsPagevue_type_script_lang_js_objectSpread({},plugin)}))})),{canRestart:canRestart,restart:restart,restarting:restarting,dataPlugins:dataPlugins,checkPluginChanges:function(){return!dataPlugins.value.every((function(plugin,index){return plugin.enabled===plugins.value[index].enabled}))},checkAndTogglePlugins:function(){dataPlugins.value.forEach((function(plugin,index){plugin.enabled!==plugins.value[index].enabled&&togglePlugin(plugin.id,plugin.enabled)}))},windowIsSmall:windowIsSmall}},data:function(){return{language:{},landingPage:"",allowPeerUnlistedChannelImport:null,allowOtherBrowsersToConnect:null,landingPageChoices:LandingPageChoices,signInPageOption:"",SignInPageOptions:SignInPageOptions,extraSettings:{},meteredConnectionDownloadOption:"",meteredConnectionDownloadOptions:MeteredConnectionDownloadOptions,primaryStorageLocation:null,secondaryStorageLocations:[],storageLocations:{},enableAutomaticDownload:null,allowLearnerDownloadResources:null,setLimitForAutodownload:null,limitForAutodownload:"0",freeSpace:null,deviceUrls:[],showChangePrimaryLocationModal:!1,showAddStorageLocationModal:!1,showRemoveStorageLocationModal:!1,browserDefaultOption:{value:null,label:this.$tr("browserDefaultLanguage")},restartPath:{},restartSetting:null,showRestartModal:!1,writablePaths:0,readOnlyPaths:0,alertDismissed:!0}},computed:DeviceSettingsPagevue_type_script_lang_js_objectSpread(DeviceSettingsPagevue_type_script_lang_js_objectSpread(DeviceSettingsPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["isAppContext","isPageLoading","snackbarIsVisible"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("deviceInfo",["isRemoteContent"])),{},{pageTitle:function(){return this.deviceString("deviceManagementTitle")},facilities:function(){return this.$store.getters.facilities},isMultiFacilitySuperuser:function(){return this.$store.getters.isSuperuser&&this.facilities.length>1},languageOptions:function(){var languages=external_kolibriCoreAppGlobal_utils_sortLanguages_default()(Object.values(external_kolibriCoreAppGlobal_utils_i18n_namespaceObject.availableLanguages),external_kolibriCoreAppGlobal_utils_i18n_namespaceObject.currentLanguage).map((function(language){return{value:language.id,label:language.lang_name}}));return languages.splice(1,0,this.browserDefaultOption),languages},disableSignInPageOptions:function(){return this.landingPage!==LandingPageChoices.SIGN_IN},storageLocationOptions:function(){return[this.$tr("addStorageLocation"),this.$tr("removeStorageLocation")]},notEnoughFreeSpace:function(){return 0===this.freeSpace},multipleWritablePaths:function(){var _this=this;return Object.values(this.storageLocations).forEach((function(el){!0===el.writable&&(_this.writablePaths+=1)})),this.writablePaths>=2},multipleReadOnlyPaths:function(){var _this2=this;return Object.values(this.storageLocations).forEach((function(el){!1===el.writable&&(_this2.readOnlyPaths+=1)})),this.readOnlyPaths>=1},limitForAutodownloadStyle:function(){return{alignItems:this.windowIsSmall?"start":"center",flexDirection:this.windowIsSmall?"column":"row"}},sliderSectionStyle:function(){return{paddingLeft:this.windowIsSmall?"0px":"20px"}},sliderStyle:function(){var width=this.windowIsSmall?"35vw":"12vw";return this.notEnoughFreeSpace?{background:"linear-gradient(to right, ".concat(this.$themeTokens.primary," 0%, ").concat(this.$themeTokens.primary,"\n          ").concat(0,"%, ").concat(this.$themeTokens.fineLine," ").concat(0,"%, ").concat(this.$themeTokens.fineLine," 100%)"),"::-webkit-slider-thumb":{background:this.$themeTokens.fineLine},width:width}:{background:"linear-gradient(to right, ".concat(this.$themeTokens.primary," 0%, ").concat(this.$themeTokens.primary,"\n          ").concat((this.limitForAutodownload-0)/(this.freeSpace-0)*100,"%,\n          ").concat(this.$themeTokens.fineLine," ").concat((this.limitForAutodownload-0)/(this.freeSpace-0)*100,"%, ").concat(this.$themeTokens.fineLine," 100%)"),"::-webkit-slider-thumb":{background:this.$themeTokens.primary},width:width}},canCheckMeteredConnection:function(){return(0,external_kolibriCoreAppGlobal_utils_appCapabilities_namespaceObject.checkCapability)("check_is_metered")},showDisabledAlert:function(){return this.isRemoteContent||!this.canRestart},disabledAlertText:function(){return!this.canRestart&&this.isRemoteContent?this.$tr("alertDisabledOptions"):this.canRestart?this.isRemoteContent?this.$tr("alertDisabledPaths"):this.$tr("alertDisabledOptions"):this.$tr("alertDisabledPlugins")},limitForAutodownloadInput:{get:function(){return this.toGigabytes(this.limitForAutodownload)},set:function(value){this.limitForAutodownload=this.toBytes(value)}}}),created:function(){this.setDeviceURLs(),null===this.freeSpace&&this.setFreeSpace()},beforeMount:function(){var _this3=this;this.getDeviceSettings().then((function(settings){var _settings$languageId=settings.languageId,languageId=void 0===_settings$languageId?null:_settings$languageId,_settings$landingPage=settings.landingPage,landingPage=void 0===_settings$landingPage?"":_settings$landingPage,_settings$allowGuestA=settings.allowGuestAccess,allowGuestAccess=void 0!==_settings$allowGuestA&&_settings$allowGuestA,_settings$allowLearne=settings.allowLearnerUnassignedResourceAccess,allowLearnerUnassignedResourceAccess=void 0!==_settings$allowLearne&&_settings$allowLearne,_settings$allowPeerUn=settings.allowPeerUnlistedChannelImport,allowPeerUnlistedChannelImport=void 0===_settings$allowPeerUn?null:_settings$allowPeerUn,_settings$allowOtherB=settings.allowOtherBrowsersToConnect,allowOtherBrowsersToConnect=void 0===_settings$allowOtherB?null:_settings$allowOtherB,_settings$primaryStor=settings.primaryStorageLocation,primaryStorageLocation=void 0===_settings$primaryStor?null:_settings$primaryStor,_settings$secondarySt=settings.secondaryStorageLocations,secondaryStorageLocations=void 0===_settings$secondarySt?[]:_settings$secondarySt,_settings$extraSettin=settings.extraSettings,extraSettings=void 0===_settings$extraSettin?{}:_settings$extraSettin,match=find_default()(_this3.languageOptions,{value:languageId});_this3.language=match?DeviceSettingsPagevue_type_script_lang_js_objectSpread({},match):_this3.browserDefaultOption,settings.landingPage===LandingPageChoices.SIGN_IN&&_this3.setSignInPageOption(settings),_this3.setExtraSettings(extraSettings),Object.assign(_this3,{landingPage:landingPage,allowGuestAccess:allowGuestAccess,allowLearnerUnassignedResourceAccess:allowLearnerUnassignedResourceAccess,allowPeerUnlistedChannelImport:allowPeerUnlistedChannelImport,allowOtherBrowsersToConnect:allowOtherBrowsersToConnect,primaryStorageLocation:primaryStorageLocation,secondaryStorageLocations:secondaryStorageLocations,extraSettings:extraSettings}),_this3.storageLocations=getPathsPermissions([].concat(DeviceSettingsPagevue_type_script_lang_js_toConsumableArray(_this3.secondaryStorageLocations),[_this3.primaryStorageLocation]))})).then((function(){return _this3.$store.dispatch("notLoading")}))},methods:{setSignInPageOption:function(settings){!1===settings.allowLearnerUnassignedResourceAccess?this.signInPageOption=SignInPageOptions.LOCKED_CONTENT:!0===settings.allowGuestAccess?this.signInPageOption=SignInPageOptions.ALLOW_GUEST_ACCESS:!1===settings.allowGuestAccess&&(this.signInPageOption=SignInPageOptions.DISALLOW_GUEST_ACCESS)},setExtraSettings:function(extraSettings){var _this4=this,_extraSettings$allow_=extraSettings.allow_download_on_metered_connection,allow_download_on_metered_connection=void 0!==_extraSettings$allow_&&_extraSettings$allow_,_extraSettings$allow_2=extraSettings.allow_learner_download_resources,allow_learner_download_resources=void 0!==_extraSettings$allow_2&&_extraSettings$allow_2,_extraSettings$enable=extraSettings.enable_automatic_download,enable_automatic_download=void 0===_extraSettings$enable||_extraSettings$enable,_extraSettings$limit_=extraSettings.limit_for_autodownload,limit_for_autodownload=void 0===_extraSettings$limit_?0:_extraSettings$limit_,_extraSettings$set_li=extraSettings.set_limit_for_autodownload,set_limit_for_autodownload=void 0!==_extraSettings$set_li&&_extraSettings$set_li;this.meteredConnectionDownloadOption=!1===allow_download_on_metered_connection?MeteredConnectionDownloadOptions.DISALLOW_DOWNLOAD_ON_METERED_CONNECTION:MeteredConnectionDownloadOptions.ALLOW_DOWNLOAD_ON_METERED_CONNECTION,this.allowLearnerDownloadResources=allow_learner_download_resources,this.enableAutomaticDownload=enable_automatic_download,!1===set_limit_for_autodownload?null===this.freeSpace?this.setFreeSpace().then((function(){_this4.limitForAutodownload=parseInt(.8*_this4.freeSpace).toString()})):this.limitForAutodownload=parseInt(.8*this.freeSpace).toString():this.limitForAutodownload=limit_for_autodownload.toString(),this.setLimitForAutodownload=set_limit_for_autodownload},getContentSettings:function(){return this.landingPage===LandingPageChoices.LEARN||this.signInPageOption===SignInPageOptions.ALLOW_GUEST_ACCESS?{allowGuestAccess:!0,allowLearnerUnassignedResourceAccess:!0}:this.signInPageOption===SignInPageOptions.DISALLOW_GUEST_ACCESS?{allowGuestAccess:!1,allowLearnerUnassignedResourceAccess:!0}:this.signInPageOption===SignInPageOptions.LOCKED_CONTENT?{allowGuestAccess:!1,allowLearnerUnassignedResourceAccess:!1}:void 0},getExtraSettings:function(){var newExtraSettings={allow_download_on_metered_connection:this.meteredConnectionDownloadOption!==MeteredConnectionDownloadOptions.DISALLOW_DOWNLOAD_ON_METERED_CONNECTION,allow_learner_download_resources:!1!==this.enableAutomaticDownload&&this.allowLearnerDownloadResources,enable_automatic_download:this.enableAutomaticDownload,limit_for_autodownload:this.notEnoughFreeSpace||!1===this.setLimitForAutodownload?0:parseInt(this.limitForAutodownload),set_limit_for_autodownload:!1!==this.enableAutomaticDownload&&!this.notEnoughFreeSpace&&this.setLimitForAutodownload};Object.assign(this.extraSettings,newExtraSettings)},setDeviceURLs:function(){var _this5=this;return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:deviceinfo"]()}).then((function(response){return{deviceUrls:response.data.urls}})).then((function(_ref){var deviceUrls=_ref.deviceUrls;_this5.deviceUrls=deviceUrls}))},setFreeSpace:function(){var _this6=this;return getFreeSpaceOnServer().then((function(_ref2){var freeSpace=_ref2.freeSpace;_this6.freeSpace=freeSpace}))},handleLandingPageChange:function(option){this.landingPage=option,this.signInPageOption=option===LandingPageChoices.LEARN?"":SignInPageOptions.ALLOW_GUEST_ACCESS},handleSignInPageChange:function(option){this.signInPageOption=option},handleMeteredConnectionDownloadChange:function(option){this.meteredConnectionDownloadOption=option},getFacilitySettingsPath:function(){var facilityId=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",getUrl=external_kolibriCoreAppGlobal_urls_default()["kolibri:kolibri.plugins.facility:facility_management"];return getUrl?facilityId?getUrl()+"#/".concat(facilityId,"/settings"):getUrl()+"#/settings":""},handleCheckAutodownload:function(option,value){switch(option){case"enableAutomaticDownload":this.enableAutomaticDownload=value,value||(this.allowLearnerDownloadResources=!1,this.setLimitForAutodownload=!1);break;case"allowLearnerDownloadResources":this.allowLearnerDownloadResources=value;break;case"setLimitForAutodownload":this.setLimitForAutodownload=value}this.enableAutomaticDownload=this.enableAutomaticDownload||this.allowLearnerDownloadResources||this.setLimitForAutodownload},handleClickSave:function(){this.checkPluginChanges()?(this.restartSetting="plugin",this.showRestartModal=!0):(this.restartSetting=null,this.handleSave())},handleSave:function(){var _this7=this,_this$getContentSetti=this.getContentSettings(),allowGuestAccess=_this$getContentSetti.allowGuestAccess,allowLearnerUnassignedResourceAccess=_this$getContentSetti.allowLearnerUnassignedResourceAccess;this.getExtraSettings();var pluginsChanged=this.checkPluginChanges();this.checkAndTogglePlugins(),this.saveDeviceSettings({languageId:this.language.value,landingPage:this.landingPage,allowGuestAccess:allowGuestAccess,allowLearnerUnassignedResourceAccess:allowLearnerUnassignedResourceAccess,allowPeerUnlistedChannelImport:this.allowPeerUnlistedChannelImport,allowOtherBrowsersToConnect:this.allowOtherBrowsersToConnect,extraSettings:this.extraSettings,secondaryStorageLocations:this.secondaryStorageLocations,primaryStorageLocation:this.primaryStorageLocation}).then((function(didSave){return(didSave=didSave||pluginsChanged)&&(_this7.$store.commit("CORE_CREATE_SNACKBAR",{text:_this7.$tr("saveSuccessNotification"),autoDismiss:!0,duration:2e3}),_this7.showRestartModal=!1,_this7.canRestart&&null!==_this7.restartSetting)?(_this7.restartSetting=null,_this7.restart().then((function(){return didSave}))):didSave})).then((function(shouldReload){if(shouldReload)if(_this7.snackbarIsVisible)var unwatch=_this7.$watch("snackbarIsVisible",(function(){unwatch&&unwatch(),window.location.reload()}));else window.location.reload()})).catch((function(err){logging.error(err),_this7.$store.dispatch("createSnackbar",_this7.$tr("saveFailureNotification"))}))},getDeviceSettings:function(){return external_kolibriCoreAppGlobal_client_default()({url:url}).then((function(_ref){var data=_ref.data;return Object.assign(_dataCache,data),{languageId:data.language_id,landingPage:data.landing_page,allowGuestAccess:data.allow_guest_access,allowLearnerUnassignedResourceAccess:data.allow_learner_unassigned_resource_access,allowPeerUnlistedChannelImport:data.allow_peer_unlisted_channel_import,allowOtherBrowsersToConnect:data.allow_other_browsers_to_connect,extraSettings:api_objectSpread({},data.extra_settings),primaryStorageLocation:data.primary_storage_location,secondaryStorageLocations:api_toConsumableArray(data.secondary_storage_locations)}}))},saveDeviceSettings:function(settings){var serverSettings={language_id:settings.languageId,landing_page:settings.landingPage,allow_guest_access:settings.allowGuestAccess,allow_learner_unassigned_resource_access:settings.allowLearnerUnassignedResourceAccess,allow_peer_unlisted_channel_import:settings.allowPeerUnlistedChannelImport,allow_other_browsers_to_connect:settings.allowOtherBrowsersToConnect,extra_settings:settings.extraSettings,primary_storage_location:settings.primaryStorageLocation,secondary_storage_locations:settings.secondaryStorageLocations},data=pickBy_default()(serverSettings,(function(value,key){return!isEqual_default()(value,_dataCache[key])}));return 0===Object.keys(data).length?Promise.resolve(!1):external_kolibriCoreAppGlobal_client_default()({url:url,method:"PATCH",data:data}).then((function(response){return Object.assign(_dataCache,response.data),!0}))},handleSelect:function(selectedOption){selectedOption===this.$tr("addStorageLocation")?(this.showAddStorageLocationModal=!0,this.showRemoveStorageLocationModal=!1):selectedOption===this.$tr("removeStorageLocation")&&(this.showRemoveStorageLocationModal=!0,this.showAddStorageLocationModal=!1)},changePrimaryLocation:function(path){this.restartPath={path:path,writable:!0},this.restartSetting="primary",this.showRestartModal=!0,this.showChangePrimaryLocationModal=!1},addStorageLocation:function(path,writable){this.restartPath={path:path,writable:writable},this.restartSetting="add",this.showRestartModal=!0,this.showAddStorageLocationModal=!1},removeStorageLocation:function(path,writable){this.restartPath={path:path,writable:writable},this.restartSetting="remove",this.showRestartModal=!0,this.showRemoveStorageLocationModal=!1},handleServerRestart:function(confirmationChecked){var _this8=this;switch(this.showRestartModal=!1,this.restartSetting){case"plugin":this.handleSave();break;case"primary":this.secondaryStorageLocations.push(this.primaryStorageLocation),this.secondaryStorageLocations=this.secondaryStorageLocations.filter((function(el){return el!==_this8.restartPath.path})),this.primaryStorageLocation=this.restartPath.path,this.handleSave();break;case"add":this.storageLocations.push(this.restartPath),!0===confirmationChecked?(this.secondaryStorageLocations.push(this.primaryStorageLocation),this.secondaryStorageLocations=this.secondaryStorageLocations.filter((function(el){return el!==_this8.restartPath.path})),this.primaryStorageLocation=this.restartPath.path):this.secondaryStorageLocations.push(this.restartPath.path),this.handleSave();break;case"remove":this.storageLocations=this.storageLocations.filter((function(el){return el.path!==_this8.restartPath.path})),this.secondaryStorageLocations=this.secondaryStorageLocations.filter((function(el){return el!==_this8.restartPath.path})),this.handleSave()}},isWritablePath:function(path){var found=this.storageLocations.find((function(el){return el.path===path}));return void 0===found||found.writable?"":this.$tr("readOnly")},updateLimitForAutodownload:function(){this.limitForAutodownload=this.toBytes(this.limitForAutodownloadInput)},updateLimitForAutodownloadInput:function(){this.limitForAutodownloadInput=this.toGigabytes(this.limitForAutodownload)},toBytes:function(gigabytes){return parseInt(Math.round(gigabytes*Math.pow(10,9)))},toGigabytes:function(bytes){return parseInt(Math.round(bytes/Math.pow(10,9)))}},$trs:{browserDefaultLanguage:{message:"Browser default",context:"Indicates that the language used for the device will be the same as the default language of the user's browser."},pageDescription:{message:"The changes you make here will affect this device only.",context:"Description on 'Device settings' page."},pageHeader:{message:"Device settings",context:"Title of page where user can configure device settings."},saveFailureNotification:{message:"Settings have not been updated",context:"Error message that displays if device settings are not saved correctly."},saveSuccessNotification:{message:"Settings have been updated",context:"Notification that displays if device settings have been saved correctly.\n"},selectedLanguageLabel:{message:"Default language",context:"Option that allows user to set the default language of the device."},facilitySettings:{message:"You can also configure facility settings",context:"Text link on the 'Device settings' page that links to the 'Facility settings' page. It is used when there is only one facility on device."},allowGuestAccess:{message:"Allow users to explore resources without signing in",context:"Option on the 'Device settings' page."},disallowGuestAccess:{message:"Learners must sign in to explore resources",context:"Option on 'Device Settings' page."},lockedContent:{message:"Signed in learners should only see resources assigned to them in classes",context:"Option on the 'Device settings' page."},landingPageLabel:{message:"Default landing page",context:"This option allows the admin to configure the default landing page for learners to be either the 'Sign-in' page or the 'Learn' page."},signInPageChoice:{message:"Sign-in page",context:"Refers to an option to set the default Kolibri landing page."},learnerAppPageChoice:{message:"Learn page",context:'This refers to the page you reach when you click "Learn" in the main side nav.'},unlistedChannels:{message:"Allow other devices on this network to view and import my unlisted channels",context:"Option on 'Device settings' page."},configureFacilitySettingsHeader:{message:"Configure facility settings",context:"Option on 'Device settings' page to switch to the 'Facility settings' page. Will display a list of facilities if user manages more than one facility."},allowExternalConnectionsApp:{message:"Allow others in the network to access Kolibri on this device using a browser",context:"Description of a device setting option. This option is visible only When Kolibri runs on an Android app"},allowExternalConnectionsAppDescription:{message:"If learners are allowed to sign in with no password on this device, enabling this may allow external devices to view the user data, which could be a potential security concern.",context:"Warns the user of the potential security risk if this setting is enabled together with users accesing without password"},externalDeviceSettings:{message:"External devices",context:"Label for device settings controlling how Kolibri interacts with other devices."},allowDownloadOnMeteredConnection:{message:"Download on mobile connection",context:"Label for device setting that allows user to determine whether or not to download data on mobile connections"},DownloadOnMeteredConnectionDescription:{message:"If users on this device are using Kolibri with a limited data plan, they may have to pay extra charges on a mobile connection.",context:"Warns the user of potential extra charges if using Kolibri with a limited data plan."},doNotAllowDownload:{message:"Do not allow download on a mobile connection",context:"Option to not allow downloads on mobile connections."},allowDownload:{message:"Allow download on a mobile connection",context:"Option to allow downloads on mobile connections."},primaryStorage:{message:"Primary storage location",context:"Option to allow downloads on mobile connections."},primaryStorageDescription:{message:"Kolibri channels are stored here. Newly downloaded resources will be added to this location.",context:"Informs user of storage location for Kolibri channels and new resources"},secondaryStorage:{message:"Other storage locations",context:"Secondary storage paths for users to store downloaded resources"},secondaryStorageDescription:{message:"Kolibri will display channels stored in these locations. Read-only locations cannot be the primary storage location.",context:"Informs user of limits for read-only locations"},autoDownload:{message:"Auto-download",context:"Label for Auto-download section"},enableAutoDownload:{message:"Enable auto-download",context:"Option on 'Device settings' page."},enableAutoDownloadDescription:{message:"Kolibri will automatically download assigned lessons, quizzes, and other resources on the 'My downloads' list.",context:"Enable auto download description."},allowLearnersDownloadResources:{message:"Allow learners to download resources",context:"Option on 'Device settings' page."},allowLearnersDownloadDescription:{message:"Allow users to explore resources they don't have, and mark them for Kolibri to automatically download when available in their network.",context:"Description for 'Allow learners to download resources' option under 'Auto-download' section."},setStorageLimit:{message:"Set storage limit for auto-download and learner-initiated downloads",context:"Option on 'Device settings' page."},sizeInGigabytesLabel:{message:"GB",context:"Indicates the gigabyte unit of digital information when referring to the storage space available on a device.\n\nSee https://en.wikipedia.org/wiki/Gigabyte"},setStorageLimitDescription:{message:"Kolibri will not auto-download more than a set amount of remaining storage on the device",context:"Description for 'Set storage limit' option under 'Auto-download' section."},addStorageLocation:{message:"Add storage location",context:"Menu option for storage paths"},removeStorageLocation:{message:"Remove storage location",context:"Menu option for storage paths"},addLocation:{message:"Add location",context:"Label for a button used to add storage location"},changeLocation:{message:"Change",context:"Label to change primary storage location"},notEnoughFreeSpace:{message:"No available storage",context:"Error text that is provided if there is not enough free storage on device"},readOnly:{message:"(read-only)",context:"Label for read-only storage locations"},enabledPages:{message:"Enabled pages",context:"Label for enabled pages section"},alertDisabledOptions:{message:"Some configuration options are disabled due to the way Kolibri has been set up.",context:"Alert text that is provided if some options are disabled"},alertDisabledPaths:{message:"This Kolibri is not set up to manage its own resource files locally.",context:"Alert text that is provided if some storage locations are disabled"},alertDisabledPlugins:{message:"This Kolibri is not able to initiate a restart from the user interface - management of the enabled pages will have to happen from the command line, and Kolibri will have to be restarted manually.",context:"Alert text that is provided if some plugins are disabled"}}},DeviceSettingsPage=normalizeComponent(DeviceSettingsPagevue_type_script_lang_js,DeviceSettingsPagevue_type_template_id_48bf9f8a_scoped_true_render,[],!1,null,"48bf9f8a",null).exports,FacilitiesPagevue_type_template_id_59232c05_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("DeviceAppBarPage",{attrs:{title:_vm.pageTitle}},[_c("KPageContainer",{staticClass:"device-container"},[_c("HeaderWithOptions",{attrs:{headerText:_vm.coreString("facilitiesLabel")},scopedSlots:_vm._u([{key:"options",fn:function(){return[_c("KButtonGroup",[_vm.isAnyFacilityRegistered?_c("KButton",{staticStyle:{"margin-top":"16px","margin-bottom":"-16px"},attrs:{text:_vm.$tr("syncAllAction")},on:{click:function($event){_vm.showSyncAllModal=!0}}}):_vm._e(),_c("KButton",{staticStyle:{"margin-top":"16px","margin-bottom":"-16px"},attrs:{text:_vm.getCommonSyncString("importFacilityAction"),primary:""},on:{click:function($event){_vm.showImportModal=!0}}})],1)]},proxy:!0}])}),_vm.activeFacilityTasks.length>0?_c("TasksBar",{attrs:{tasks:_vm.activeFacilityTasks,taskManagerLink:{name:"FACILITIES_TASKS_PAGE"}},on:{clearall:_vm.handleClickClearAll}}):_vm._e(),_c("CoreTable",{attrs:{dataLoading:_vm.loadingFacilities},scopedSlots:_vm._u([{key:"headers",fn:function(){return[_c("th",[_vm._v(_vm._s(_vm.coreString("facilityLabel")))])]},proxy:!0},{key:"tbody",fn:function(){return[_vm.windowIsSmall?_c("tbody",[_vm._l(_vm.facilities,(function(facility,idx){return[_c("tr",{key:idx,staticStyle:{border:"0 !important"}},[_c("td",[_c("FacilityNameAndSyncStatus",{attrs:{facility:facility,isSyncing:_vm.facilityIsSyncing(facility),isDeleting:_vm.facilityIsDeleting(facility),syncHasFailed:facility.syncHasFailed,goToRoute:_vm.manageSync(facility.id)}})],1)]),_c("tr",{key:idx+_vm.facilities.length},[_c("td",{staticStyle:{padding:"0 0 16px 0"}},[_c("KButtonGroup",{staticStyle:{"margin-left":"-16px","margin-right":"-16px","max-width":"100%"}},[_c("KButton",{attrs:{text:_vm.coreString("syncAction"),disabled:_vm.facilityIsSyncing(facility),appearance:"flat-button"},on:{click:function($event){_vm.facilityForSync=facility}}}),_c("KButton",{attrs:{hasDropdown:"",appearance:"flat-button",text:_vm.coreString("optionsLabel"),disabled:_vm.facilityIsSyncing(facility)},scopedSlots:_vm._u([{key:"menu",fn:function(){return[_c("KDropdownMenu",{attrs:{options:_vm.facilityOptions(facility)},on:{select:function($event){return _vm.handleOptionSelect($event.value,facility)}}})]},proxy:!0}],null,!0)})],1)],1)])]}))],2):_c("tbody",_vm._l(_vm.facilities,(function(facility,idx){return _c("tr",{key:idx},[_c("td",[_c("FacilityNameAndSyncStatus",{attrs:{facility:facility,isSyncing:_vm.facilityIsSyncing(facility),isDeleting:_vm.facilityIsDeleting(facility),syncHasFailed:facility.syncHasFailed,goToRoute:_vm.manageSync(facility.id)}})],1),_c("td",{staticClass:"button-col"},[_c("KButtonGroup",[_c("KButton",{attrs:{text:_vm.coreString("syncAction"),disabled:_vm.facilityIsSyncing(facility),appearance:"flat-button"},on:{click:function($event){_vm.facilityForSync=facility}}}),_c("KButton",{attrs:{hasDropdown:"",appearance:"flat-button",text:_vm.coreString("optionsLabel"),disabled:_vm.facilityIsSyncing(facility)},scopedSlots:_vm._u([{key:"menu",fn:function(){return[_c("KDropdownMenu",{attrs:{options:_vm.facilityOptions()},on:{select:function($event){return _vm.handleOptionSelect($event.value,facility)}}})]},proxy:!0}],null,!0)})],1)],1)])})),0)]},proxy:!0}])}),Boolean(_vm.facilityForRemoval)?_c("RemoveFacilityModal",{attrs:{facility:_vm.facilityForRemoval},on:{success:_vm.handleRemoveSuccess,cancel:function($event){_vm.facilityForRemoval=null}}}):_vm._e(),_vm.showSyncAllModal?_c("SyncAllFacilitiesModal",{attrs:{facilities:_vm.facilities},on:{success:_vm.handleSyncAllSuccess,cancel:function($event){_vm.showSyncAllModal=!1}}}):_vm._e(),_vm.showImportModal?_c("ImportFacilityModalGroup",{on:{success:_vm.handleStartImportSuccess,cancel:function($event){_vm.showImportModal=!1}}}):_vm._e(),Boolean(_vm.facilityForRegister)?[_vm.kdpProject?_c("ConfirmationRegisterModal",{attrs:{targetFacility:_vm.facilityForRegister,projectName:_vm.kdpProject.name,token:_vm.kdpProject.token},on:{success:_vm.handleConfirmationSuccess,cancel:_vm.clearRegistrationState}}):_c("RegisterFacilityModal",{attrs:{facility:_vm.facilityForRegister,displaySkipOption:!1},on:{success:_vm.handleValidateSuccess,cancel:_vm.clearRegistrationState,skip:_vm.handleKDPSync}})]:_vm._e(),Boolean(_vm.facilityForSync)?_c("SyncFacilityModalGroup",{attrs:{facilityForSync:_vm.facilityForSync},on:{close:function($event){_vm.facilityForSync=null},syncKDP:_vm.handleKDPSync,syncPeer:_vm.handlePeerSync}}):_vm._e()],2)],1)};FacilitiesPagevue_type_template_id_59232c05_scoped_true_render._withStripped=!0;var some=__webpack_require__(606),some_default=__webpack_require__.n(some),TasksBarvue_type_template_id_85d5ac6e_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"progress-bar"},[_vm.totalTasks>0?_c("p",[_vm._v("\n    "+_vm._s(_vm.tasksString)+"\n  ")]):_vm._e(),_c("p",[_vm.totalTasks>0?_c("KLinearLoader",{staticClass:"k-linear-loader",style:{backgroundColor:_vm.$themeTokens.fineLine},attrs:{delay:!1,progress:_vm.progress,type:"determinate"}}):_vm._e()],1),_c("p",[_vm.showClearCompletedButton?_c("KButton",{attrs:{appearance:"basic-link",text:_vm.getTaskString("clearCompletedTasksAction")},on:{click:function($event){return _vm.$emit("clearall")}}}):_vm._e(),_c("span",[_vm._v("")]),_c("KRouterLink",{attrs:{appearance:"basic-link",text:_vm.$tr("taskManagerLink"),to:_vm.taskManagerLink}})],1)])};TasksBarvue_type_template_id_85d5ac6e_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_mixins_commonTaskStrings_namespaceObject=kolibriCoreAppGlobal.coreVue.mixins.commonTaskStrings,external_kolibriCoreAppGlobal_coreVue_mixins_commonTaskStrings_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_mixins_commonTaskStrings_namespaceObject),TasksBar=normalizeComponent({name:"TasksBar",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonTaskStrings_default()],props:{tasks:{type:Array,required:!0},taskManagerLink:{type:Object,required:!0}},computed:{showClearCompletedButton:function(){return some_default()(this.tasks,(function(task){return task.clearable}))},totalTasks:function(){return this.tasks.length},clearableTasks:function(){return this.tasks.filter((function(t){return t.clearable}))},inProgressTasks:function(){return this.tasks.filter((function(t){return!t.clearable}))},progress:function(){return(this.clearableTasks.length+sumBy_default()(this.inProgressTasks,"percentage"))/this.totalTasks*100},tasksString:function(){return this.$tr("someTasksComplete",{done:this.clearableTasks.length,total:this.totalTasks})}},$trs:{someTasksComplete:{message:"{done, number} of {total, plural, one {{total, number} task completed} other {{total, number} tasks completed}}",context:"Indicates the amount of tasks completed. For example:\n\n'7 tasks completed'"},taskManagerLink:{message:"View task manager",context:"Text link on the Device > Channel section which tasks user to a page where they can see all the current tasks and their statuses."}}},TasksBarvue_type_template_id_85d5ac6e_scoped_true_render,[],!1,null,"85d5ac6e",null).exports,HeaderWithOptionsvue_type_template_id_a03eed4e_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KGrid",[_c("KGridItem",{attrs:{layout8:{span:4},layout12:{span:6}}},[_vm._t("header",(function(){return[_c("h1",[_vm._v(_vm._s(_vm.headerText))])]}))],2),_c("KGridItem",{staticClass:"buttons",style:{padding:_vm.windowIsSmall?"0 8px 16px":"0"},attrs:{layout8:{span:4,alignment:"right"},layout12:{span:6,alignment:"right"}}},[_vm._t("options")],2)],1)};HeaderWithOptionsvue_type_template_id_a03eed4e_scoped_true_render._withStripped=!0;var HeaderWithOptions=normalizeComponent({name:"HeaderWithOptions",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default()],props:{headerText:{type:String,default:null}}},HeaderWithOptionsvue_type_template_id_a03eed4e_scoped_true_render,[],!1,null,"a03eed4e",null).exports,RemoveFacilityModalvue_type_template_id_7ff8323a_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.header,cancelText:_vm.cancelText,submitText:_vm.submitText,submitDisabled:_vm.submitDisabled},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}}},[_vm.canRemove?[_c("p",{style:{color:_vm.$themeTokens.error}},[_vm._v("\n      "+_vm._s(_vm.$tr("willLoseAccessWarning",{facilityName:_vm.facilityName}))+"\n    ")]),_c("p",[_vm._v("\n      "+_vm._s(_vm.$tr("facilityReloadExplanation"))+"\n    ")]),_c("KCheckbox",{attrs:{checked:_vm.confirmationChecked,label:_vm.$tr("removingFacilityConfirmation")},on:{change:function($event){_vm.confirmationChecked=$event}}})]:[_c("p",[_vm._v("\n      "+_vm._s(_vm.$tr("cannotRemoveOwnFacilityExplanation"))+"\n    ")]),_c("p",[_vm._v("\n      "+_vm._s(_vm.$tr("signInAsOtherAdminExplanation",{facilityName:_vm.facilityName}))+"\n    ")])]],2)};RemoveFacilityModalvue_type_template_id_7ff8323a_render._withStripped=!0;var RemoveFacilityModal=normalizeComponent({name:"RemoveFacilityModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default()],props:{facility:{type:Object,required:!0}},data:function(){return{confirmationChecked:!1}},computed:{header:function(){return this.canRemove?this.$tr("removeFacilityHeader"):this.$tr("cannotRemoveFacilityHeader")},submitText:function(){return this.canRemove?this.coreString("removeAction"):null},submitDisabled:function(){return!this.canRemove||!this.confirmationChecked},cancelText:function(){return this.canRemove?this.coreString("cancelAction"):this.coreString("closeAction")},facilityName:function(){return this.formatNameAndId(this.facility.name,this.facility.id)},canRemove:function(){return this.$store.state.core.session.facility_id!==this.facility.id}},methods:{handleSubmit:function(){var _this=this;this.canRemove?external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask({type:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETEFACILITY,facility:this.facility.id}).then((function(data){_this.$emit("success",data.id)})).catch((function(error){_this.$store.dispatch("handleApiError",{error:error})})):this.$emit("cancel")}},$trs:{removeFacilityHeader:{message:"Remove facility from this device",context:"Title of the modal window where the user confirms the removal of a facility from the device"},cannotRemoveFacilityHeader:{message:"Cannot remove facility",context:"Title of the modal window if user is unable to remove the facility"},willLoseAccessWarning:{message:"You will lose access to all '{facilityName}' data.",context:"Warning message on the 'Remove facility from this device' window."},facilityReloadExplanation:{message:"If you have synced this facility to Kolibri Data Portal or to another device on your local network, you may be able to load it back to this device.",context:"Modal description text when removing a facility that has previously been synced"},removingFacilityConfirmation:{message:"I understand the consequences of removing the facility",context:"Confirmation message on the 'Remove facility from this device' window."},cannotRemoveOwnFacilityExplanation:{message:"Super admins cannot remove facilities they are a member of.",context:"Modal description text."},signInAsOtherAdminExplanation:{message:"You cannot remove the facility that your user is a member of. To remove '{facilityName}', create a super admin in a different facility and sign in as them.",context:"Modal description text"}}},RemoveFacilityModalvue_type_template_id_7ff8323a_render,[],!1,null,null,null).exports,SyncAllFacilitiesModalvue_type_template_id_b371ea7c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("syncAllFacilityDataHeader")},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}},scopedSlots:_vm._u([{key:"actions",fn:function(){return[_c("KButtonGroup",[_c("KButton",{attrs:{text:_vm.coreString("cancelAction")},on:{click:function($event){return _vm.$emit("cancel")}}}),_c("span",{ref:"syncbutton"},[_c("KButton",{attrs:{text:_vm.coreString("syncAction"),primary:"",type:"submit",disabled:!_vm.isConnected}})],1)],1)]},proxy:!0}])},[_c("p",[_vm._v("\n    "+_vm._s(_vm.$tr("syncExplanation"))+"\n  ")]),_vm.isConnected?_vm._e():_c("p",[_vm._v("\n    "+_vm._s(_vm.$tr("mustBeConnectedToInternet"))+"\n  ")])])};SyncAllFacilitiesModalvue_type_template_id_b371ea7c_scoped_true_render._withStripped=!0;var SyncAllFacilitiesModal=normalizeComponent({name:"SyncAllFacilitiesModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{facilities:{type:Array,required:!0}},data:function(){return{isConnected:!0}},mounted:function(){this.setConnectionStatus()},methods:{handleSubmit:function(){this.setConnectionStatus(),this.isConnected&&this.startSyncAllTask()},setConnectionStatus:function(){this.isConnected=window.navigator.onLine},startSyncAllTask:function(){var _this=this;return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTasks(this.facilities.map((function(f){return{type:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCDATAPORTAL,facility:f.id}}))).then((function(){_this.$emit("success")})).catch((function(error){_this.$store.dispatch("handleApiError",{error:error})}))}},$trs:{syncAllFacilityDataHeader:{message:"Sync all facility data",context:"Title of the modal window"},syncExplanation:{message:"This will sync all registered facilities on this device to Kolibri Data Portal.",context:"Modal description text"},mustBeConnectedToInternet:{message:"You must be connected to the internet.",context:"Modal description text"},currentlyOfflineTooltip:{message:"You are currently offline",context:"Floating notification message that appears over the 'Sync' button and indicates why is it not active"},noFacilitiesTooltip:{message:"There are no registered facilities on this device",context:"Floating notification message that appears over the 'Sync' button and indicates why is it not active"}}},SyncAllFacilitiesModalvue_type_template_id_b371ea7c_scoped_true_render,[],!1,null,"b371ea7c",null).exports,ImportFacilityModalGroupvue_type_template_id_44e7b40b_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.atSelectAddress?_c("SelectDeviceModalGroup",{on:{submit:_vm.handleAddressSubmit,cancel:_vm.closeModal}}):_vm.atSelectFacility?_c("SelectFacilityModal",{attrs:{device:_vm.device},on:{submit:_vm.handleFacilitySubmit,cancel:_vm.closeModal}}):_vm.atCredentials?_c("FacilityAdminCredentialsModal",{attrs:{facility:_vm.facility,device:_vm.device},on:{submit:_vm.handleCredentialsSubmit,cancel:_vm.closeModal}}):_vm._e()],1)};ImportFacilityModalGroupvue_type_template_id_44e7b40b_scoped_true_render._withStripped=!0;var SelectFacilityModalvue_type_template_id_01e5da94_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.getCommonSyncString("selectFacilityTitle"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction"),submitDisabled:!_vm.selectedId},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}}},[_vm._t("description",(function(){return[_vm._v("\n    "+_vm._s(_vm.deviceInfoMsg)+"\n  ")]})),_c("RadioButtonGroup",{attrs:{items:_vm.facilities,currentValue:_vm.selectedId,itemLabel:function(fac){return _vm.formatNameAndId(fac.name,fac.id)},itemValue:function(fac){return fac.id}},on:{"update:currentValue":function($event){_vm.selectedId=$event},"update:current-value":function($event){_vm.selectedId=$event}}})],2)};function SelectFacilityModalvue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return SelectFacilityModalvue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return SelectFacilityModalvue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SelectFacilityModalvue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SelectFacilityModalvue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}SelectFacilityModalvue_type_template_id_01e5da94_scoped_true_render._withStripped=!0;var SelectFacilityModal=normalizeComponent({name:"SelectFacilityModal",components:{RadioButtonGroup:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.RadioButtonGroup},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default()],props:{device:{type:Object,required:!0}},data:function(){return{facilities:[],selectedId:""}},computed:{deviceInfoMsg:function(){return this.coreString("commaSeparatedPair",{item1:this.formatNameAndId(this.device.name,this.device.id),item2:this.device.baseurl})}},beforeMount:function(){var _this=this;this.fetchNetworkLocationFacilities(this.device.id).then((function(data){_this.facilities=SelectFacilityModalvue_type_script_lang_js_toConsumableArray(data.facilities)}))},methods:{handleSubmit:function(){var _this2=this,selected=this.facilities.find((function(fac){return fac.id===_this2.selectedId}));this.$emit("submit",selected)}}},SelectFacilityModalvue_type_template_id_01e5da94_scoped_true_render,[],!1,null,"01e5da94",null).exports,FacilityAdminCredentialsModalvue_type_template_id_1af84f1d_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.getCommonSyncString("adminCredentialsTitle"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction"),submitDisabled:_vm.formDisabled},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}}},[_c("FacilityAdminCredentialsForm",{ref:"credentialsForm",attrs:{facility:_vm.facility,device:_vm.device,disabled:_vm.formDisabled}})],1)};FacilityAdminCredentialsModalvue_type_template_id_1af84f1d_scoped_true_render._withStripped=!0;var FacilityAdminCredentialsModal=normalizeComponent({name:"FacilityAdminCredentialsModal",components:{FacilityAdminCredentialsForm:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.FacilityAdminCredentialsForm},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default()],props:{device:{type:Object,required:!0},facility:{type:Object,required:!0}},data:function(){return{formDisabled:!1}},methods:{handleSubmit:function(){var _this=this;this.formDisabled=!0,this.$refs.credentialsForm.startImport().then((function(taskId){taskId?_this.$emit("submit",taskId):_this.formDisabled=!1}))}}},FacilityAdminCredentialsModalvue_type_template_id_1af84f1d_scoped_true_render,[],!1,null,"1af84f1d",null).exports,Steps=Object.freeze({SELECT_ADDRESS:"SELECT_ADDRESS",SELECT_FACILITY:"SELECT_FACILITY",CREDENTIALS:"CREDENTIALS"}),ImportFacilityModalGroup=normalizeComponent({name:"ImportFacilityModalGroup",components:{SelectDeviceModalGroup:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.SelectDeviceModalGroup,SelectFacilityModal:SelectFacilityModal,FacilityAdminCredentialsModal:FacilityAdminCredentialsModal},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default()],data:function(){return{step:Steps.SELECT_ADDRESS,facility:{},device:{}}},computed:{atSelectAddress:function(){return this.step===Steps.SELECT_ADDRESS},atSelectFacility:function(){return this.step===Steps.SELECT_FACILITY},atCredentials:function(){return this.step===Steps.CREDENTIALS}},methods:{handleAddressSubmit:function(address){this.device={id:address.id,name:address.nickname||address.device_name,baseurl:address.base_url},this.step=Steps.SELECT_FACILITY},handleFacilitySubmit:function(facility){this.facility=facility,this.step=Steps.CREDENTIALS},handleCredentialsSubmit:function(taskId){this.$emit("success",taskId)},closeModal:function(){this.$emit("cancel")}}},ImportFacilityModalGroupvue_type_template_id_44e7b40b_scoped_true_render,[],!1,null,"44e7b40b",null).exports;function isSyncTask(task){return task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCDATAPORTAL||task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.SYNCPEERFULL}function taskFacilityMatch(task,facility){return task.facility_id===facility.id}function isActiveTask(task){return null!==task.repeat||task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.RUNNING}var facilityTasksQueue={data:function(){return{facilityTasks:[],isPolling:!0}},methods:{isSyncTask:isSyncTask,pollFacilityTasks:function(){var _this=this;external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.list({queue:"facility_task"}).then((function(tasks){_this.facilityTasks=tasks,_this.isPolling&&setTimeout((function(){return _this.pollFacilityTasks()}),2e3)}))},clearCompletedFacilityTasks:function(){return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clearAll("facility_task")}},beforeMount:function(){this.pollFacilityTasks()},beforeDestroy:function(){this.isPolling=!1},computed:{activeFacilityTasks:function(){return this.facilityTasks.filter(isActiveTask)},facilityIsSyncing:function(){return function(facility){var inProcessSyncTasks=this.activeFacilityTasks.filter((function(t){return isSyncTask(t)&&!t.clearable}));return Boolean(inProcessSyncTasks.find((function(task){return taskFacilityMatch(task,facility)})))}},facilityIsDeleting:function(){return function(facility){return Boolean(this.facilityTasks.find((function(task){return task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETEFACILITY&&taskFacilityMatch(task,facility)&&!task.clearable})))}}}};function FacilitiesPagevue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return FacilitiesPagevue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return FacilitiesPagevue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FacilitiesPagevue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FacilitiesPagevue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Options=Object.freeze({REGISTER:"REGISTER",REMOVE:"REMOVE",MANAGESYNC:"MANAGE SYNC"}),FacilitiesPage=normalizeComponent({name:"FacilitiesPage",metaInfo:function(){return{title:this.coreString("facilitiesLabel")}},components:{DeviceAppBarPage:DeviceAppBarPage,ConfirmationRegisterModal:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.ConfirmationRegisterModal,CoreTable:external_kolibriCoreAppGlobal_coreVue_components_CoreTable_default(),HeaderWithOptions:HeaderWithOptions,FacilityNameAndSyncStatus:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.FacilityNameAndSyncStatus,ImportFacilityModalGroup:ImportFacilityModalGroup,RegisterFacilityModal:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.RegisterFacilityModal,RemoveFacilityModal:RemoveFacilityModal,SyncFacilityModalGroup:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.SyncFacilityModalGroup,SyncAllFacilitiesModal:SyncAllFacilitiesModal,TasksBar:TasksBar},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default(),facilityTasksQueue,external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default()],data:function(){return{showSyncAllModal:!1,showImportModal:!1,facilities:[],facilityForSync:null,facilityForRemoval:null,facilityForRegister:null,kdpProject:null,taskIdsToWatch:[],loadingFacilities:!0}},computed:{pageTitle:function(){return deviceString("deviceManagementTitle")},isAnyFacilityRegistered:function(){return some_default()(this.facilities,(function(facility){return facility.dataset.registered}))}},watch:{facilityTasks:function(newTasks){var _this=this,_loop=function(){var task=newTasks[index];if(_this.taskIdsToWatch.includes(task.id)){if(task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.COMPLETED)_this.fetchFacilites(),task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETEFACILITY&&_this.showFacilityRemovedSnackbar(task.facility_name),_this.taskIdsToWatch=_this.taskIdsToWatch.filter((function(x){return x!==task.id}));else if(_this.isSyncTask(task)&&task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.FAILED){var match=_this.facilities.find((function(_ref){return _ref.id===task.facility}));match&&_this.$set(match,"syncHasFailed",!0)}}else task.clearable||_this.taskIdsToWatch.push(task.id)};for(var index in newTasks)_loop()}},beforeMount:function(){var _this2=this;this.fetchFacilites().then((function(){return _this2.loadingFacilities=!1})).catch((function(){return _this2.loadingFacilities=!1}))},methods:{facilityOptions:function(){return[{label:this.coreString("manageSyncAction"),value:Options.MANAGESYNC},{label:this.coreString("registerAction"),value:Options.REGISTER},{label:this.coreString("removeAction"),value:Options.REMOVE}]},handleOptionSelect:function(option,facility){if(option===Options.REMOVE)this.facilityForRemoval=facility;else if(option===Options.REGISTER)this.facilityForRegister=facility;else if(option===Options.MANAGESYNC){var route=this.manageSync(facility.id);this.$router.push(route)}},fetchFacilites:function(){var _this3=this;return external_kolibriCoreAppGlobal_resources_namespaceObject.FacilityResource.fetchCollection({force:!0}).then((function(facilities){_this3.facilities=FacilitiesPagevue_type_script_lang_js_toConsumableArray(facilities)}))},handleClickClearAll:function(){Promise.all([this.fetchFacilites(),this.clearCompletedFacilityTasks()])},handleValidateSuccess:function(_ref2){var name=_ref2.name,token=_ref2.token;this.kdpProject={name:name,token:token}},handleConfirmationSuccess:function(){this.fetchFacilites(),this.clearRegistrationState()},clearRegistrationState:function(){this.facilityForRegister=null,this.kdpProject=null},handleStartSyncSuccess:function(task){this.taskIdsToWatch.push(task.id),this.facilityTasks.push(task),this.facilityForSync=null},handleSyncAllSuccess:function(){this.showSyncAllModal=!1},handleStartImportSuccess:function(){this.$router.push({name:"FACILITIES_TASKS_PAGE"}),this.showImportModal=!1},manageSync:function(facilityId){return{name:PageNames.MANAGE_SYNC_SCHEDULE,facilityId:facilityId,params:{facilityId:facilityId}}},showFacilityRemovedSnackbar:function(facilityName){this.$store.dispatch("createSnackbar",this.$tr("facilityRemovedSnackbar",{facilityName:facilityName}))},handleRemoveSuccess:function(taskId){this.taskIdsToWatch.push(taskId),this.facilityForRemoval=null},handleKDPSync:function(facility){var _this4=this;this.facilityForSync=null,this.facilityForRegister=null,this.startKdpSyncTask(facility.id).then((function(task){_this4.handleStartSyncSuccess(task)})).catch((function(){_this4.$emit("failure")}))},handlePeerSync:function(peerData,facility){var _this5=this;this.facilityForSync=null,this.startPeerSyncTask({facility:facility.id,device_id:peerData.id}).then((function(task){_this5.handleStartSyncSuccess(task)})).catch((function(){_this5.$emit("failure")}))}},$trs:{syncAllAction:{message:"Sync all",context:"Label for a button used to synchronize all facilities at once with the data portal"},facilityRemovedSnackbar:{message:"Removed '{facilityName}' from this device",context:"Notification that appears after a facility has been deleted. For example, \"Removed 'Zuk Village' from this device'."}}},FacilitiesPagevue_type_template_id_59232c05_scoped_true_render,[],!1,null,"59232c05",null).exports,FacilitiesTasksPagevue_type_template_id_45b9356a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{appBarTitle:_vm.$tr("facilitiesTaskManagerTitle"),route:_vm.backRoute}},[_c("KPageContainer",{staticClass:"device-container"},[_c("HeaderWithOptions",{attrs:{headerText:_vm.coreString("tasksLabel")},scopedSlots:_vm._u([{key:"options",fn:function(){return[_vm.someClearableTasks?_c("KButton",{attrs:{text:_vm.getTaskString("clearCompletedTasksAction")},on:{click:_vm.handleClickClearAll}}):_vm._e()]},proxy:!0}])}),0===_vm.facilityTasks.length?_c("p",[_vm._v("\n      "+_vm._s(_vm.deviceString("emptyTasksMessage"))+"\n    ")]):_vm._e(),_c("div",_vm._l(_vm.activeFacilityTasks,(function(task,idx){return _c("FacilityTaskPanel",{key:idx,staticClass:"task-panel",style:{borderBottomColor:_vm.$themePalette.grey.v_200},attrs:{task:task},on:{cancel:function($event){return _vm.cancel(task)},clear:function($event){return _vm.clear(task)},retry:function($event){return _vm.retry(task)}}})})),1)],1)],1)};FacilitiesTasksPagevue_type_template_id_45b9356a_scoped_true_render._withStripped=!0;var FacilitiesTasksPage=normalizeComponent({name:"FacilitiesTasksPage",metaInfo:function(){return{title:this.coreString("tasksLabel")}},components:{FacilityTaskPanel:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.FacilityTaskPanel,HeaderWithOptions:HeaderWithOptions,ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonTaskStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default(),facilityTasksQueue,commonDeviceStrings],data:function(){return{}},computed:{backRoute:function(){return{name:PageNames.FACILITIES_PAGE}},someClearableTasks:function(){return Boolean(this.activeFacilityTasks.find((function(task){return task.clearable})))}},methods:{handleClickClearAll:function(){this.clearCompletedFacilityTasks()},cancel:function(task){return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.cancel(task.id)},clear:function(task){return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clear(task.id)},retry:function(task){return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.restart(task.id)}},$trs:{facilitiesTaskManagerTitle:{message:"Facilities - Task manager",context:"Title of the page that displays all the tasks in the task manager."}}},FacilitiesTasksPagevue_type_template_id_45b9356a_scoped_true_render,[],!1,null,"45b9356a",null).exports,ManageContentPagevue_type_template_id_7904c19d_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("DeviceAppBarPage",{attrs:{title:_vm.pageTitle}},[_c("transition",{attrs:{name:"delay<-entry"}},[!_vm.channelListLoading&&_vm.welcomeModalVisible?_c("PostSetupModalGroup",{on:{cancel:_vm.hideWelcomeModal}}):_vm._e()],1),_c("KPageContainer",{staticClass:"device-container"},[_c("div",[_c("HeaderWithOptions",{attrs:{headerText:_vm.coreString("channelsLabel")},scopedSlots:_vm._u([{key:"options",fn:function(){return[_c("KButtonGroup",[_vm.channelsAreInstalled?_c("KButton",{style:{margin:"16px 8px -16px 0"},attrs:{hasDropdown:"",appearance:"raised-button",text:_vm.coreString("optionsLabel")},scopedSlots:_vm._u([{key:"menu",fn:function(){return[_c("KDropdownMenu",{attrs:{position:"bottom left",options:_vm.dropdownOptions},on:{select:_vm.handleSelect}})]},proxy:!0}],null,!1,3972369525)}):_vm._e(),_c("KButton",{staticStyle:{"margin-top":"16px","margin-bottom":"-16px"},attrs:{text:_vm.$tr("import"),primary:!0},on:{click:function($event){return _vm.startImportWorkflow()}}})],1)]},proxy:!0}])}),_vm.managedTasks.length>0?_c("TasksBar",{attrs:{tasks:_vm.managedTasks,taskManagerLink:{name:"MANAGE_TASKS"}},on:{clearall:_vm.handleClickClearAll}}):_vm._e(),_vm.channelsAreInstalled||_vm.channelListLoading?_vm._e():_c("p",[_vm._v("\n        "+_vm._s(_vm.$tr("emptyChannelListMessage"))+"\n      ")]),_c("div",{staticClass:"channels-list"},[_vm.channelListLoading?_c("KCircularLoader"):_c("div",_vm._l(_vm.sortedChannels,(function(channel){return _c("ChannelPanel",{key:channel.id,attrs:{channel:channel,disabled:_vm.channelIsBeingDeleted(channel.id),showNewLabel:_vm.showNewLabel(channel.id)},on:{select_delete:function($event){_vm.deleteChannelId=channel.id},select_manage:function($event){return _vm.handleSelectManage(channel.id)}}})})),1)],1),_c("SelectTransferSourceModal",{attrs:{pageName:_vm.pageName}}),_vm.deleteChannelId?_c("DeleteChannelModal",{attrs:{channelTitle:_vm.selectedChannelTitle},on:{submit:_vm.handleDeleteChannel,cancel:function($event){_vm.deleteChannelId=null}}}):_vm._e()],1)])],1)};ManageContentPagevue_type_template_id_7904c19d_scoped_true_render._withStripped=!0;var lodash_get=__webpack_require__(9631),get_default=__webpack_require__.n(lodash_get),sortBy=__webpack_require__(1113),sortBy_default=__webpack_require__.n(sortBy),PostSetupModalGroupvue_type_template_id_ab577ce2_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.step===_vm.Steps.WELCOME&&_vm.isUserLoggedIn?_c("WelcomeModal",{attrs:{importedFacility:_vm.importedFacility,isOnMyOwnUser:_vm.isOnMyOwnUser},on:{submit:_vm.handleSubmit}}):_vm._e(),_vm.step===_vm.Steps.PERMISSIONS_CHANGE?_c("PermissionsChangeModal",{attrs:{newRole:"superadmin"}}):_vm.step===_vm.Steps.SELECT_SOURCE_FACILITY_PEER?_c("SelectDeviceForm",{attrs:{title:_vm.getCommonSyncString("selectSourceTitle")},on:{submit:_vm.handleSubmit,cancel:function($event){return _vm.$emit("cancel")}},scopedSlots:_vm._u([{key:"underbuttons",fn:function(){return[_c("KButton",{attrs:{text:_vm.$tr("chooseAnotherSourceLabel"),appearance:"basic-link"},on:{click:_vm.startNormalImportWorkflow}})]},proxy:!0}])}):_vm._e()],1)};function manageContentLinks_typeof(o){return manageContentLinks_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},manageContentLinks_typeof(o)}function manageContentLinks_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function manageContentLinks_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?manageContentLinks_ownKeys(Object(t),!0).forEach((function(r){manageContentLinks_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):manageContentLinks_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function manageContentLinks_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=manageContentLinks_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=manageContentLinks_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==manageContentLinks_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function selectContentTopicLink(topicNode,query,channelId){return{name:ContentWizardPages.SELECT_CONTENT,params:{node:topicNode,scrollTo:".content-tree-viewer"},query:manageContentLinks_objectSpread(manageContentLinks_objectSpread({},query),{},{node_id:channelId===topicNode.id?void 0:topicNode.id})}}function availableChannelsPageLink(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},driveId=params.driveId,addressId=params.addressId;return{name:ContentWizardPages.AVAILABLE_CHANNELS,query:{drive_id:driveId,address_id:addressId}}}function selectContentPageLink(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},channelId=params.channelId,driveId=params.driveId,addressId=params.addressId;return{name:ContentWizardPages.SELECT_CONTENT,params:{channel_id:channelId},query:{drive_id:driveId,address_id:addressId}}}function manageContentPageLink(){return{name:PageNames.MANAGE_CONTENT_PAGE}}PostSetupModalGroupvue_type_template_id_ab577ce2_scoped_true_render._withStripped=!0;var WelcomeModalvue_type_template_id_2d8fe5ae_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("welcomeModalHeader"),submitText:_vm.coreString("continueAction")},on:{submit:function($event){return _vm.$emit("submit")}}},_vm._l(_vm.paragraphs,(function(paragraph,idx){return _c("p",{key:idx,staticClass:"paragraph"},[_vm._v("\n    "+_vm._s(paragraph)+"\n  ")])})),0)};WelcomeModalvue_type_template_id_2d8fe5ae_scoped_true_render._withStripped=!0;var WelcomeModal=normalizeComponent({name:"WelcomeModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],setup:function(){return{isLearnerOnlyImport:external_kolibriCoreAppGlobal_coreVue_composables_useUser_default()().isLearnerOnlyImport}},props:{importedFacility:{type:Object,default:null},isOnMyOwnUser:{type:Boolean,required:!1,default:!1}},computed:{paragraphs:function(){if(this.isLearnerOnlyImport){var facility=this.importedFacility;this.$store.getters.facilities.length>0&&null===facility&&(facility=this.$store.getters.facilities[0]);var sndParagraph=null===facility?this.$tr("learnOnlyDeviceWelcomeMessage2"):this.$tr("postSyncWelcomeMessage2",{facilityName:facility.name});return[this.$tr("learnOnlyDeviceWelcomeMessage1"),sndParagraph]}return this.isOnMyOwnUser?[this.coreString("nothingInLibraryLearner")]:this.importedFacility?[this.$tr("postSyncWelcomeMessage1"),this.$tr("postSyncWelcomeMessage2",{facilityName:this.importedFacility.name})]:[this.$tr("welcomeModalContentDescription"),this.$tr("welcomeModalPermissionsDescription")]}},render:function(createElement){return window.setTimeout(createElement,750)},$trs:{welcomeModalHeader:{message:"Welcome to Kolibri!",context:"Title of welcome window which displays on first sign in as a super admin."},welcomeModalContentDescription:{message:"The first thing you should do is import some resources from the Channels tab.",context:"Text that appears on welcome window when a super admin sets up a facility for the first time."},welcomeModalPermissionsDescription:{message:"The super admin account you created during setup has special permissions to do this. Learn more in the Permissions tab later.",context:"Text that appears on welcome window when a super admin sets up a facility for the first time.\n"},postSyncWelcomeMessage1:{message:"The first thing you should do is import some channels to this device.",context:"Welcome message for user which appears if there are no channels on the device. This is similar to the 'The first thing you should do is import some resources from the Channels tab' string."},postSyncWelcomeMessage2:{message:"The learner reports, lessons, and quizzes in '{facilityName}' will not display properly until you import the resources associated with them.",context:"Welcome message for user indicating that they need to import resources."},learnOnlyDeviceWelcomeMessage1:{message:"The first thing you should do is import some channels to this device",context:"Welcome message for user which appears after provisioning a Learner Only Device.\n\nThis is similar to the 'The first thing you should do is import some resources from the Channels tab' string."},learnOnlyDeviceWelcomeMessage2:{message:"The user reports, lessons, and quizzes will not display properly until you import the resources associated with them.",context:"Welcome message for user indicating that they need to import resources."}}},WelcomeModalvue_type_template_id_2d8fe5ae_scoped_true_render,[],!1,null,"2d8fe5ae",null).exports,PermissionsChangeModalvue_type_template_id_284b3817_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("header"),submitText:_vm.coreString("continueAction")},on:{submit:function($event){return _vm.$emit("submit")}}},_vm._l(_vm.paragraphs,(function(paragraph,idx){return _c("p",{key:idx,staticClass:"paragraph"},[_vm._v("\n    "+_vm._s(paragraph)+"\n  ")])})),0)};PermissionsChangeModalvue_type_template_id_284b3817_scoped_true_render._withStripped=!0;var PermissionsChangeModal=normalizeComponent({name:"PermissionsChangeModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{newRole:{type:String,required:!0}},computed:{paragraphs:function(){return"superadmin"===this.newRole?[this.$tr("superAdminMessage1"),this.$tr("superAdminMessage2")]:[this.$tr("manageContentMessage1")]}},render:function(createElement){return window.setTimeout(createElement,750)},$trs:{header:{message:"Your permissions have changed",context:"Modal window title"},superAdminMessage1:{message:"Your role has been changed to Super Admin.",context:"Description of permission. This window displays if a user's permissions are changed."},superAdminMessage2:{message:"You can now manage channels and the permissions of other users. Learn more in the Permissions tab.",context:"Description of permission. This window displays if a user's permissions are changed."},manageContentMessage1:{message:"You have been given permissions to manage channels and resources on this device.",context:"Description of permission. This window displays if a user's permissions are changed."}}},PermissionsChangeModalvue_type_template_id_284b3817_scoped_true_render,[],!1,null,"284b3817",null).exports;function PostSetupModalGroupvue_type_script_lang_js_typeof(o){return PostSetupModalGroupvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},PostSetupModalGroupvue_type_script_lang_js_typeof(o)}function PostSetupModalGroupvue_type_script_lang_js_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return PostSetupModalGroupvue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PostSetupModalGroupvue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PostSetupModalGroupvue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PostSetupModalGroupvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function PostSetupModalGroupvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?PostSetupModalGroupvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){PostSetupModalGroupvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):PostSetupModalGroupvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function PostSetupModalGroupvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=PostSetupModalGroupvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=PostSetupModalGroupvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==PostSetupModalGroupvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var PostSetupModalGroupvue_type_script_lang_js_Steps=Object.freeze({WELCOME:"WELCOME",PERMISSIONS_CHANGE:"PERMISSIONS_CHANGE",SELECT_SOURCE_FACILITY_PEER:"SELECT_SOURCE_FACILITY_PEER",SELECT_SOURCE_NORMAL:"SELECT_SOURCE_NORMAL"}),PostSetupModalGroup=normalizeComponent({name:"PostSetupModalGroup",components:{PermissionsChangeModal:PermissionsChangeModal,WelcomeModal:WelcomeModal,SelectDeviceForm:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.SelectDeviceForm},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonSyncElements_default()],props:{isOnMyOwnUser:{type:Boolean,required:!1}},data:function(){return{step:PostSetupModalGroupvue_type_script_lang_js_Steps.WELCOME,Steps:PostSetupModalGroupvue_type_script_lang_js_Steps}},computed:PostSetupModalGroupvue_type_script_lang_js_objectSpread(PostSetupModalGroupvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["isUserLoggedIn"])),{},{importedFacility:function(){var facility=PostSetupModalGroupvue_type_script_lang_js_slicedToArray(this.$store.state.core.facilities,1)[0];return facility&&null!==facility.last_successful_sync?facility:null}}),methods:{startNormalImportWorkflow:function(){this.$emit("cancel"),this.$store.dispatch("manageContent/startImportWorkflow")},handleSubmit:function(data){if(this.step===PostSetupModalGroupvue_type_script_lang_js_Steps.WELCOME)this.importedFacility?this.step=PostSetupModalGroupvue_type_script_lang_js_Steps.SELECT_SOURCE_FACILITY_PEER:this.$emit("cancel");else if(this.step===PostSetupModalGroupvue_type_script_lang_js_Steps.SELECT_SOURCE_FACILITY_PEER){this.$emit("cancel");var newRoute=availableChannelsPageLink({addressId:data.id});newRoute.query.setup=!0,this.$router.push(newRoute)}}},$trs:{chooseAnotherSourceLabel:{message:"Choose another source",context:"Button that opens the modal to choose source for content import workflow from Kolibri Studio or an attached local drive"}}},PostSetupModalGroupvue_type_template_id_ab577ce2_scoped_true_render,[],!1,null,"ab577ce2",null).exports,SelectTransferSourceModalvue_type_template_id_d57b9df0_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.atSelectImportSource?_c("SelectImportSourceModal",{attrs:{manageMode:_vm.manageMode},on:{submit:_vm.nextState,cancel:_vm.emitCancel}}):_vm._e(),_vm.atSelectDrive?_c("SelectDriveModal",{attrs:{manageMode:_vm.manageMode},on:{submit:_vm.nextState,cancel:_vm.emitCancel}}):_vm._e(),_vm.atSelectNetworkAddress?_c("SelectNetworkDeviceModal",{attrs:{manageMode:_vm.manageMode},on:{submit:_vm.nextState,cancel:_vm.emitCancel}}):_vm._e()],1)};SelectTransferSourceModalvue_type_template_id_d57b9df0_scoped_true_render._withStripped=!0;var SelectNetworkDeviceModalvue_type_template_id_325cbbb6_scoped_true_render=function(){var _h=this.$createElement;return(this._self._c||_h)("SelectDeviceModalGroup",{attrs:{filterByChannelId:this.filterByChannelId},on:{cancel:this.handleCancel,submit:this.handleSelectAddressSubmit}})};function SelectNetworkDeviceModalvue_type_script_lang_js_typeof(o){return SelectNetworkDeviceModalvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},SelectNetworkDeviceModalvue_type_script_lang_js_typeof(o)}function SelectNetworkDeviceModalvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function SelectNetworkDeviceModalvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SelectNetworkDeviceModalvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){SelectNetworkDeviceModalvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SelectNetworkDeviceModalvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function SelectNetworkDeviceModalvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=SelectNetworkDeviceModalvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=SelectNetworkDeviceModalvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==SelectNetworkDeviceModalvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}SelectNetworkDeviceModalvue_type_template_id_325cbbb6_scoped_true_render._withStripped=!0;var SelectNetworkDeviceModal=normalizeComponent({name:"SelectNetworkDeviceModal",components:{SelectDeviceModalGroup:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.SelectDeviceModalGroup},props:{manageMode:{type:Boolean,required:!1}},data:function(){return{}},computed:SelectNetworkDeviceModalvue_type_script_lang_js_objectSpread(SelectNetworkDeviceModalvue_type_script_lang_js_objectSpread(SelectNetworkDeviceModalvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent/wizard",["isImportingMore"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent/wizard",["transferredChannel"])),{},{filterByChannelId:function(){return this.isImportingMore?this.transferredChannel.id:""}}),methods:SelectNetworkDeviceModalvue_type_script_lang_js_objectSpread(SelectNetworkDeviceModalvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapMutations)("manageContent/wizard",{resetContentWizardState:"RESET_STATE"})),{},{handleSelectAddressSubmit:function(address){var addressId=address.id;this.manageMode?this.$emit("submit",{addressId:addressId}):this.isImportingMore?this.$router.push(selectContentPageLink({addressId:addressId,channelId:this.transferredChannel.id})):this.$router.push(availableChannelsPageLink({addressId:addressId}))},handleCancel:function(){this.manageMode?this.$emit("cancel"):this.resetContentWizardState()}})},SelectNetworkDeviceModalvue_type_template_id_325cbbb6_scoped_true_render,[],!1,null,"325cbbb6",null).exports,SelectImportSourceModalvue_type_template_id_99f61d4a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("SelectSourceModal",{attrs:{submitDisabled:_vm.formIsDisabled,showLoadingMessage:_vm.formIsDisabled&&!_vm.initialDelay},on:{submit:_vm.handleSubmit,cancel:_vm.handleCancel}},[_c("KRadioButton",{attrs:{label:_vm.$tr("network"),value:_vm.ContentSources.KOLIBRI_STUDIO,disabled:_vm.kolibriStudioIsOffline||_vm.formIsDisabled,autofocus:!_vm.kolibriStudioIsOffline,description:_vm.$tr("studioDescription")},model:{value:_vm.source,callback:function($$v){_vm.source=$$v},expression:"source"}}),_c("KRadioButton",{attrs:{label:_vm.$tr("localNetworkOrInternet"),value:_vm.ContentSources.PEER_KOLIBRI_SERVER,disabled:_vm.formIsDisabled,description:_vm.$tr("networkDescription")},model:{value:_vm.source,callback:function($$v){_vm.source=$$v},expression:"source"}}),_c("KRadioButton",{attrs:{label:_vm.$tr("localDrives"),value:_vm.ContentSources.LOCAL_DRIVE,disabled:_vm.formIsDisabled,description:_vm.$tr("localDescription")},model:{value:_vm.source,callback:function($$v){_vm.source=$$v},expression:"source"}})],1)};function SelectImportSourceModalvue_type_script_lang_js_typeof(o){return SelectImportSourceModalvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},SelectImportSourceModalvue_type_script_lang_js_typeof(o)}function SelectImportSourceModalvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function SelectImportSourceModalvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SelectImportSourceModalvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){SelectImportSourceModalvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SelectImportSourceModalvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function SelectImportSourceModalvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=SelectImportSourceModalvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=SelectImportSourceModalvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==SelectImportSourceModalvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}SelectImportSourceModalvue_type_template_id_99f61d4a_scoped_true_render._withStripped=!0;var SelectImportSourceModal_component=normalizeComponent({name:"SelectImportSourceModal",components:{SelectSourceModal:external_kolibriCoreAppGlobal_coreVue_componentSets_sync_namespaceObject.SelectSourceModal},data:function(){return{source:ContentSources.KOLIBRI_STUDIO,initialDelay:!0,formIsDisabled:!0,kolibriStudioIsOffline:!1,ContentSources:ContentSources}},created:function(){var _this=this;setTimeout((function(){_this.initialDelay=!1}),1e3),external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.getKolibriStudioStatus().then((function(_ref){"offline"===_ref.data.status&&(_this.source=ContentSources.PEER_KOLIBRI_SERVER,_this.kolibriStudioIsOffline=!0),_this.formIsDisabled=!1}))},methods:SelectImportSourceModalvue_type_script_lang_js_objectSpread(SelectImportSourceModalvue_type_script_lang_js_objectSpread(SelectImportSourceModalvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)("manageContent/wizard",["goForwardFromSelectImportSourceModal"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapMutations)("manageContent/wizard",{resetContentWizardState:"RESET_STATE"})),{},{handleSubmit:function(){this.formIsDisabled||(this.$attrs.manageMode?this.$emit("submit",{source:this.source}):this.goForwardFromSelectImportSourceModal(this.source))},handleCancel:function(){this.$attrs.manageMode?this.$emit("cancel"):this.resetContentWizardState()}}),$trs:{network:{message:"Kolibri Studio (online)",context:"Refers to a source where resources can be imported from.\n"},localNetworkOrInternet:{message:"Local network or internet",context:"Refers to a source where resources can be imported from."},localDrives:{message:"Attached drive or memory card",context:"Refers to a source where resources can be imported from."},studioDescription:{message:"Import resources from Kolibri Studio if you are connected to the internet",context:"Description referring to importing channels from Kolibri Studio."},networkDescription:{message:"Import resources from another Kolibri server running on a device on your local network or the internet",context:"Description referring to importing channels from a local network or the internet."},localDescription:{message:"Import resources from a drive. Channels must have first been exported onto the drive from another Kolibri server",context:"Description referring to importing channels from an attached drive or memory card."}}},SelectImportSourceModalvue_type_template_id_99f61d4a_scoped_true_render,[],!1,null,"99f61d4a",null),SelectTransferSourceModal=normalizeComponent({name:"SelectTransferSourceModal",components:{SelectDriveModal:SelectDriveModal,SelectImportSourceModal:SelectImportSourceModal_component.exports,SelectNetworkDeviceModal:SelectNetworkDeviceModal},props:{pageName:{type:String,default:null},manageMode:{type:Boolean,default:!1}},computed:{atSelectImportSource:function(){return this.pageName===ContentWizardPages.SELECT_IMPORT_SOURCE},atSelectDrive:function(){return this.pageName===ContentWizardPages.SELECT_DRIVE},atSelectNetworkAddress:function(){return this.pageName===ContentWizardPages.SELECT_NETWORK_ADDRESS}},mounted:function(){this.pageName||this.$emit("update:pageName",ContentWizardPages.SELECT_IMPORT_SOURCE)},methods:{emitCancel:function(){this.$emit("cancel")},nextState:function(data){this.atSelectImportSource?data.source===ContentSources.KOLIBRI_STUDIO?this.$emit("submit",{source:ContentSources.KOLIBRI_STUDIO}):data.source===ContentSources.LOCAL_DRIVE?this.$emit("update:pageName",ContentWizardPages.SELECT_DRIVE):data.source===ContentSources.PEER_KOLIBRI_SERVER&&this.$emit("update:pageName",ContentWizardPages.SELECT_NETWORK_ADDRESS):this.atSelectDrive?this.$emit("submit",{source:ContentSources.LOCAL_DRIVE,drive_id:data.driveId}):this.atSelectNetworkAddress&&this.$emit("submit",{source:ContentSources.PEER_KOLIBRI_SERVER,address_id:data.addressId})}}},SelectTransferSourceModalvue_type_template_id_d57b9df0_scoped_true_render,[],!1,null,"d57b9df0",null).exports,WithSizeAndOptionsvue_type_template_id_074263b6_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"panel",class:{"panel-sm":_vm.windowIsSmall},style:{borderTop:"1px solid "+_vm.$themePalette.grey.v_200}},[_c("ChannelDetails",{attrs:{channel:_vm.channel},scopedSlots:_vm._u([{key:"belowname",fn:function(){return[_c("div",{staticClass:"private-icons"},[_c("KTooltip",{attrs:{reference:"lockicon",refs:_vm.$refs,placement:"top"}},[_vm._v("\n          "+_vm._s(_vm.deviceString("unlistedChannelLabel"))+"\n        ")]),!1===_vm.channel.public?_c("KIcon",{ref:"lockicon",staticClass:"lock-icon",attrs:{icon:"unlistedchannel"}}):_vm._e(),_vm.showNewLabel?_c("NewBadge",{staticClass:"new-label",attrs:{label:_vm.deviceString("newChannelLabel")}}):_vm._e()],1)]},proxy:!0}])}),_c("div",{staticClass:"col-2",attrs:{dir:"auto","data-test":"resources-size"}},[_vm._v("\n    "+_vm._s(_vm.resourcesSizeText)+"\n  ")]),_c("div",{staticClass:"col-3"},[_c("KButton",{attrs:{text:_vm.$tr("manageChannelAction"),disabled:_vm.disabled},on:{click:_vm.handleManageChannelAction}})],1)],1)};WithSizeAndOptionsvue_type_template_id_074263b6_scoped_true_render._withStripped=!0;var NewBadgevue_type_template_id_f08f5ad4_scoped_true_render=function(){var _h=this.$createElement;return(this._self._c||_h)("span",{staticClass:"new-badge",style:{color:this.$themeTokens.textInverted,backgroundColor:this.$themeTokens.success}},[this._v("\n  "+this._s(this.label)+"\n")])};NewBadgevue_type_template_id_f08f5ad4_scoped_true_render._withStripped=!0;var NewBadge=normalizeComponent({name:"NewBadge",mixins:[commonDeviceStrings],props:{label:{type:String,required:!0}}},NewBadgevue_type_template_id_f08f5ad4_scoped_true_render,[],!1,null,"f08f5ad4",null).exports;function WithSizeAndOptionsvue_type_script_lang_js_typeof(o){return WithSizeAndOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},WithSizeAndOptionsvue_type_script_lang_js_typeof(o)}function WithSizeAndOptionsvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function WithSizeAndOptionsvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=WithSizeAndOptionsvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=WithSizeAndOptionsvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==WithSizeAndOptionsvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var WithSizeAndOptionsvue_type_script_lang_js={name:"WithSizeAndOptions",components:{ChannelDetails:ChannelDetails,NewBadge:NewBadge},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),commonDeviceStrings],props:{channel:{type:Object,required:!0},disabled:{type:Boolean,default:!1},showNewLabel:{type:Boolean,required:!1}},computed:{resourcesSizeText:function(){return external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(this.channel.on_device_file_size)}},methods:{handleManageChannelAction:function(){return this.$emit("select_manage",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?WithSizeAndOptionsvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){WithSizeAndOptionsvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):WithSizeAndOptionsvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},this.channel))}},$trs:{manageChannelAction:{message:"Manage",context:"Operation that can be performed on a channel. Refers to the 'Manage' button."}}},WithSizeAndOptions=normalizeComponent(WithSizeAndOptionsvue_type_script_lang_js,WithSizeAndOptionsvue_type_template_id_074263b6_scoped_true_render,[],!1,null,"074263b6",null).exports;function ManageContentPagevue_type_script_lang_js_typeof(o){return ManageContentPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ManageContentPagevue_type_script_lang_js_typeof(o)}function ManageContentPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ManageContentPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ManageContentPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){ManageContentPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ManageContentPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ManageContentPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=ManageContentPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ManageContentPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ManageContentPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ManageContentPage=normalizeComponent({name:"ManageContentPage",metaInfo:function(){return{title:this.$tr("documentTitle")}},components:{DeviceAppBarPage:DeviceAppBarPage,ChannelPanel:WithSizeAndOptions,PostSetupModalGroup:PostSetupModalGroup,DeleteChannelModal:DeleteChannelModal,HeaderWithOptions:HeaderWithOptions,SelectTransferSourceModal:SelectTransferSourceModal,TasksBar:TasksBar},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),taskNotificationMixin],setup:function(){useContentTasks()},data:function(){return{deleteChannelId:null,channelOrders:{}}},computed:ManageContentPagevue_type_script_lang_js_objectSpread(ManageContentPagevue_type_script_lang_js_objectSpread(ManageContentPagevue_type_script_lang_js_objectSpread(ManageContentPagevue_type_script_lang_js_objectSpread(ManageContentPagevue_type_script_lang_js_objectSpread(ManageContentPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent",["installedChannelsWithResources","channelIsBeingDeleted","managedTasks"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["isLearnerOnlyImport"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent/wizard",["pageName"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent",["channelListLoading"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)({welcomeModalVisibleState:"welcomeModalVisible"})),{},{pageTitle:function(){return deviceString("deviceManagementTitle")},doneTasks:function(){return this.managedTasks.filter((function(task){return task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.COMPLETED})).length},sortedChannels:function(){var _this=this;return sortBy_default()(this.installedChannelsWithResources,(function(channel){var order=-_this.channelOrders[channel.id];return Number.isNaN(order)?1:order}))},channelsAreInstalled:function(){return this.installedChannelsWithResources.length>0},selectedChannelTitle:function(){return this.deleteChannelId?find_default()(this.installedChannelsWithResources,{id:this.deleteChannelId}).name:""},dropdownOptions:function(){return[{label:this.$tr("exportChannels"),value:"EXPORT"},{label:this.$tr("deleteChannels"),value:"DELETE"},{label:this.$tr("editChannelOrder"),value:"REARRANGE",disabled:1===this.installedChannelsWithResources.length}]},welcomeModalVisible:function(){return this.welcomeModalVisibleState&&"true"!==window.localStorage.getItem("DEVICE_WELCOME_MODAL_DISMISSED")&&!this.installedChannelsWithResources.length>0&!this.isLearnerOnlyImport}}),watch:{installedChannelsWithResources:{handler:function(val){var _this2=this;val.forEach((function(channel){var currentOrder=_this2.channelOrders[channel.id];(!currentOrder&&channel.taskIndex>-1||currentOrder<channel.taskIndex)&&_this2.$set(_this2.channelOrders,channel.id,channel.taskIndex)}))},immediate:!0,deep:!0},doneTasks:function(val,oldVal){val>oldVal&&this.refreshChannelList()}},created:function(){this.channelsAreInstalled||this.$store.commit("SET_WELCOME_MODAL_VISIBLE",!0)},methods:ManageContentPagevue_type_script_lang_js_objectSpread(ManageContentPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)("manageContent",["refreshChannelList","startImportWorkflow"])),{},{hideWelcomeModal:function(){window.localStorage.setItem("DEVICE_WELCOME_MODAL_DISMISSED",!0),this.$store.commit("SET_WELCOME_MODAL_VISIBLE",!1)},handleSelect:function(_ref){var value=_ref.value,nextRoute={DELETE:PageNames.DELETE_CHANNELS,EXPORT:PageNames.EXPORT_CHANNELS,REARRANGE:PageNames.REARRANGE_CHANNELS}[value];this.$router.push(this.$router.getRoute(nextRoute))},showNewLabel:function(channelId){var match=find_default()(this.installedChannelsWithResources,{id:channelId});return match&&match.taskIndex>-1},handleDeleteChannel:function(){var _this3=this;if(this.deleteChannelId){var channelId=this.deleteChannelId;return this.deleteChannelId=null,external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask({type:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECHANNEL,channel_id:channelId,channel_name:this.selectedChannelTitle}).then((function(task){_this3.notifyAndWatchTask(task)})).catch((function(err){"This channel does not exist"===get_default()(err,"data[0]")?_this3.refreshChannelList():_this3.createTaskFailedSnackbar()}))}},handleSelectManage:function(channelId){this.$router.push({name:PageNames.MANAGE_CHANNEL,params:{channel_id:channelId}})},handleClickClearAll:function(){external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clearAll()},onWatchedTaskFinished:function(){this.refreshChannelList()}}),$trs:{import:{message:"Import",context:"Option to import channels or users from another device."},documentTitle:{message:"Manage Device Channels",context:"Title of page where admin can manage channels on the device."},exportChannels:{message:"Export channels",context:"Option to export channels to another device."},deleteChannels:{message:"Delete channels",context:"Option to delete specific channels from the device."},editChannelOrder:{message:"Edit channel order",context:"Option to control the order in which channels will be displayed to learners and coaches."},emptyChannelListMessage:{message:"No channels installed",context:"Will display if there are no channels in the Device > Channels section."}}},ManageContentPagevue_type_template_id_7904c19d_scoped_true_render,[],!1,null,"7904c19d",null).exports,ManagePermissionsPagevue_type_template_id_6fbbcc33_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("DeviceAppBarPage",{attrs:{title:_vm.pageTitle}},[_c("KPageContainer",{staticClass:"device-container"},[_c("div",{staticClass:"description"},[_c("h1",[_vm._v("\n        "+_vm._s(_vm.coreString("devicePermissionsLabel"))+"\n      ")]),_c("p",[_vm._v(_vm._s(_vm.$tr("devicePermissionsDescription")))])]),_c("PaginatedListContainer",{attrs:{dataLoading:_vm.loadingFacilityUsers,items:_vm.usersFilteredByDropdown,filterPlaceholder:_vm.$tr("searchPlaceholder")},scopedSlots:_vm._u([{key:"otherFilter",fn:function(){return[_c("KSelect",{staticClass:"type-filter",attrs:{label:_vm.$tr("permissionsLabel"),options:_vm.permissionsOptions,inline:!0},model:{value:_vm.permissionsFilter,callback:function($$v){_vm.permissionsFilter=$$v},expression:"permissionsFilter"}}),_c("KSelect",{staticClass:"type-filter",attrs:{label:_vm.coreString("userTypeLabel"),options:_vm.userTypeOptions,inline:!0},model:{value:_vm.userTypeFilter,callback:function($$v){_vm.userTypeFilter=$$v},expression:"userTypeFilter"}}),_vm.hasMultipleFacilities?_c("KSelect",{staticClass:"type-filter",attrs:{label:_vm.coreString("facilityLabel"),options:_vm.facilityOptions,inline:!0},model:{value:_vm.facilityFilter,callback:function($$v){_vm.facilityFilter=$$v},expression:"facilityFilter"}}):_vm._e()]},proxy:!0},{key:"default",fn:function(ref){var items=ref.items,filterInput=ref.filterInput;return[_c("UserGrid",{attrs:{dataLoading:_vm.loadingFacilityUsers,searchFilter:_vm.searchFilterText,facilityUsers:items,userPermissions:_vm.userPermissions,filterText:filterInput}})]}}])})],1)],1)};ManagePermissionsPagevue_type_template_id_6fbbcc33_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_PaginatedListContainer_namespaceObject=kolibriCoreAppGlobal.coreVue.components.PaginatedListContainer,external_kolibriCoreAppGlobal_coreVue_components_PaginatedListContainer_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_PaginatedListContainer_namespaceObject),UserGridvue_type_template_id_e32c1cac_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("CoreTable",{attrs:{emptyMessage:_vm.emptyMessage,dataLoading:_vm.dataLoading},scopedSlots:_vm._u([{key:"headers",fn:function(){return[_c("th",[_vm._v(_vm._s(_vm.coreString("fullNameLabel")))]),_c("th",[_vm._v(_vm._s(_vm.coreString("usernameLabel")))]),_vm.hasMultipleFacilities?_c("th",[_vm._v("\n        "+_vm._s(_vm.coreString("facilityLabel"))+"\n      ")]):_vm._e(),_c("th")]},proxy:!0},{key:"tbody",fn:function(){return[_c("tbody",_vm._l(_vm.facilityUsers,(function(user){return _c("tr",{key:user.id},[_c("td",[_c("KLabeledIcon",{attrs:{label:_vm.fullNameLabel(user)},scopedSlots:_vm._u([{key:"icon",fn:function(){return[Boolean(_vm.getPermissionType(user.id))?_c("PermissionsIcon",{attrs:{permissionType:_vm.getPermissionType(user.id)}}):_vm._e()]},proxy:!0}],null,!0)})],1),_c("td",[_c("span",{staticClass:"maxwidth",attrs:{dir:"auto"}},[_vm._v("\n              "+_vm._s(user.username)+"\n            ")])]),_vm.hasMultipleFacilities?_c("td",[_c("span",{staticClass:"maxwidth",attrs:{dir:"auto"}},[_vm._v("\n              "+_vm._s(_vm.memoizedFacilityName(user.facility))+"\n            ")])]):_vm._e(),_c("td",{staticClass:"btn-col"},[_c("KButton",{staticStyle:{margin:"6px"},attrs:{appearance:"flat-button",text:_vm.permissionsButtonText(user)},on:{click:function($event){return _vm.goToUserPermissionsPage(user.id)}}})],1)])})),0)]},proxy:!0}])})],1)};UserGridvue_type_template_id_e32c1cac_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_PermissionsIcon_namespaceObject=kolibriCoreAppGlobal.coreVue.components.PermissionsIcon,external_kolibriCoreAppGlobal_coreVue_components_PermissionsIcon_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_PermissionsIcon_namespaceObject),memoize=__webpack_require__(1527),memoize_default=__webpack_require__.n(memoize);function UserGridvue_type_script_lang_js_typeof(o){return UserGridvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},UserGridvue_type_script_lang_js_typeof(o)}function UserGridvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function UserGridvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?UserGridvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){UserGridvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):UserGridvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function UserGridvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=UserGridvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=UserGridvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==UserGridvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var UserGrid=normalizeComponent({name:"UserGrid",components:{PermissionsIcon:external_kolibriCoreAppGlobal_coreVue_components_PermissionsIcon_default(),CoreTable:external_kolibriCoreAppGlobal_coreVue_components_CoreTable_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{filterText:{type:String,default:null},facilityUsers:{type:Array,default:function(){return[]}},userPermissions:{type:Function,default:function(){return null}},dataLoading:{type:Boolean,default:!1,required:!1}},computed:UserGridvue_type_script_lang_js_objectSpread(UserGridvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["facilities","currentUserId"])),{},{emptyMessage:function(){return this.$tr("noUsersMatching",{searchFilter:this.filterText})},hasMultipleFacilities:function(){return this.facilities.length>1},memoizedFacilityName:function(){return memoize_default()(this.facilityName)}}),methods:{facilityName:function(facilityId){return this.facilities.find((function(facility){return facility.id===facilityId})).name||""},isCurrentUser:function(user){return this.currentUserId===user.id},fullNameLabel:function(user){return this.isCurrentUser(user)?this.$tr("selfUsernameLabel",{full_name:user.full_name}):user.full_name},permissionsButtonText:function(user){return this.isCurrentUser(user)?this.$tr("viewPermissions"):this.$tr("editPermissions")},goToUserPermissionsPage:function(userId){this.$router.push({name:"USER_PERMISSIONS_PAGE",params:{userId:userId}})},getPermissionType:function(userId){var permissions=this.userPermissions(userId);return permissions?permissions.is_superuser?external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.PermissionTypes.SUPERUSER:permissions.can_manage_content?external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.PermissionTypes.LIMITED_PERMISSIONS:null:null}},$trs:{viewPermissions:{message:"View Permissions",context:"Link to view the permissions of the admin user who is currently logged in."},editPermissions:{message:"Edit Permissions",context:"Option that allows an admin to manage the permissions of another user on the Device."},noUsersMatching:{message:"No users match the selected filters",context:"Message displays when a search for a user returns no results."},selfUsernameLabel:{message:"{full_name} (You)",context:"Indicates the user who is currently signed in at that moment."}}},UserGridvue_type_template_id_e32c1cac_scoped_true_render,[],!1,null,"e32c1cac",null).exports;function ManagePermissionsPagevue_type_script_lang_js_typeof(o){return ManagePermissionsPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ManagePermissionsPagevue_type_script_lang_js_typeof(o)}function ManagePermissionsPagevue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return ManagePermissionsPagevue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return ManagePermissionsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ManagePermissionsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ManagePermissionsPagevue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ManagePermissionsPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ManagePermissionsPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ManagePermissionsPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){ManagePermissionsPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ManagePermissionsPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ManagePermissionsPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=ManagePermissionsPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ManagePermissionsPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ManagePermissionsPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ALL_FILTER="all",ManagePermissionsPagevue_type_script_lang_js={name:"ManagePermissionsPage",metaInfo:function(){return{title:this.$tr("documentTitle")}},components:{DeviceAppBarPage:DeviceAppBarPage,PaginatedListContainer:external_kolibriCoreAppGlobal_coreVue_components_PaginatedListContainer_default(),UserGrid:UserGrid},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],data:function(){return{searchFilterText:"",permissionsFilter:null,userTypeFilter:null,facilityFilter:null}},computed:ManagePermissionsPagevue_type_script_lang_js_objectSpread(ManagePermissionsPagevue_type_script_lang_js_objectSpread(ManagePermissionsPagevue_type_script_lang_js_objectSpread(ManagePermissionsPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("managePermissions",{facilityUsers:function(state){return state.facilityUsers},userPermissions:function(state){return function(userid){return state.permissions[userid]}},loadingFacilityUsers:function(state){return state.loadingFacilityUsers}})),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)({query:function(state){return state.query}})),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["facilities"])),{},{hasMultipleFacilities:function(){return!!this.facilities&&this.facilities.length>1},facilityOptions:function(){var facilityChoices=this.facilities.map((function(f){return{label:f.name,value:f.id}}));return[{label:this.$tr("allFacilityFilter"),value:ALL_FILTER}].concat(ManagePermissionsPagevue_type_script_lang_js_toConsumableArray(facilityChoices))},pageTitle:function(){return deviceString("deviceManagementTitle")},userTypeOptions:function(){return[{label:this.$tr("allUserTypeFilter"),value:ALL_FILTER},{label:this.coreString("learnersLabel"),value:external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.LEARNER},{label:this.coreString("coachesLabel"),value:external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.COACH},{label:this.$tr("adminsLabel"),value:external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.ADMIN}]},permissionsOptions:function(){return[{label:this.$tr("allPermissionsFilterLabel"),value:ALL_FILTER},{label:this.$tr("canManageContentLabel"),value:external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.PermissionTypes.LIMITED_PERMISSIONS},{label:this.coreString("superAdminLabel"),value:external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.PermissionTypes.SUPERUSER},{label:this.$tr("noDevicePermissionsLabel"),value:external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.PermissionTypes.NO_DEVICE_PERMISSIONS}]},usersFilteredByDropdown:function(){var _this=this,users=this.facilityUsers;return this.hasMultipleFacilities&&(users=this.facilityFilter.value===ALL_FILTER?users:users.filter((function(user){return user.facility==_this.facilityFilter.value}))),users=this.userTypeFilter.value===ALL_FILTER?users:users.filter((function(user){return 0===user.roles.length?_this.userTypeFilter.value===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.LEARNER:_this.userTypeFilter.value===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.COACH?Boolean(user.roles.find((function(role){return role.kind===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.COACH||role.kind===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.ASSIGNABLE_COACH}))):_this.userTypeFilter.value===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.ADMIN&&Boolean(user.roles.find((function(role){return role.kind===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.SUPERUSER||role.kind===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.UserKinds.ADMIN})))})),users=this.permissionsFilter.value===ALL_FILTER?users:users.filter((function(user){var userPermissions=_this.userPermissions(user.id);switch(_this.permissionsFilter.value){case external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.PermissionTypes.LIMITED_PERMISSIONS:return Boolean(userPermissions)&&userPermissions.can_manage_content;case external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.PermissionTypes.SUPERUSER:return Boolean(userPermissions)&&userPermissions.is_superuser;case external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.PermissionTypes.NO_DEVICE_PERMISSIONS:return!userPermissions||!userPermissions.is_superuser&&!userPermissions.can_manage_content;default:return!1}})),users}}),watch:{permissionsFilter:function(value){var query=this.query;query.permissionsFilter=value,this.$store.commit("SET_QUERY",query)},userTypeFilter:function(value){var query=this.query;query.userTypeFilter=value,this.$store.commit("SET_QUERY",query)},facilityFilter:function(value){var query=this.query;query.facilityFilter=value,this.$store.commit("SET_QUERY",query)}},beforeMount:function(){this.facilityFilter=this.query.facilityFilter||this.facilityOptions[0],this.permissionsFilter=this.query.permissionsFilter||this.permissionsOptions[0],this.userTypeFilter=this.query.userTypeFilter||this.userTypeOptions[0]},$trs:{devicePermissionsDescription:{message:"Make changes to what users can manage on your device",context:"Description on the 'Device permissions' page."},searchPlaceholder:{message:"Search for a user",context:"Refers to the search for a user option on the 'Device permissions' page."},documentTitle:{message:"Manage Device Permissions",context:"Title of the 'Device permissions' page."},adminsLabel:{message:"Admins",context:"Refers to the filter by user type in the 'Device permissions' page."},permissionsLabel:{message:"Permissions",context:"Refers to the Device > Permissions page."},canManageContentLabel:{message:"Can manage resources",context:"One of the options in the 'Permissions' filter on the Device permissions page. Type of permission that allows users to import, export and manage channels and resources in Kolibri."},noDevicePermissionsLabel:{message:"No device permissions",context:"Type of permission that can be given to a user."},allPermissionsFilterLabel:{message:"All",context:"Refers to the all permissions type filter."},allUserTypeFilter:{message:"All",context:"Refer to the all user types filter."},allFacilityFilter:{message:"All",context:"Refers to the all facility filter. Will only display if the user has access to multiple facilities."}}},ManagePermissionsPage=normalizeComponent(ManagePermissionsPagevue_type_script_lang_js,ManagePermissionsPagevue_type_template_id_6fbbcc33_scoped_true_render,[],!1,null,"6fbbcc33",null).exports,ManageTasksPagevue_type_template_id_39ab907e_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{appBarTitle:_vm.$tr("appBarTitle"),route:_vm.backRoute}},[_c("KPageContainer",{staticClass:"device-container"},[_c("KGrid",[_c("KGridItem",{attrs:{layout8:{span:5},layout12:{span:8}}},[_c("h1",[_vm._v("\n          "+_vm._s(_vm.$tr("tasksHeader"))+"\n        ")])]),_c("KGridItem",{attrs:{layout8:{span:3,alignment:"right"},layout12:{span:4,alignment:"right"}}},[_vm.showClearCompletedButton?_c("KButton",{class:{"button-offset":_vm.windowIsLarge},attrs:{text:_vm.$tr("clearCompletedAction")},on:{click:_vm.handleClickClearAll}}):_vm._e()],1)],1),_vm.loading?_c("KLinearLoader",{attrs:{delay:!1,type:"indeterminate"}}):_vm._e(),_vm.loading||0!==_vm.managedTasks.length?_vm._e():_c("p",{staticClass:"empty-tasks-message"},[_vm._v("\n      "+_vm._s(_vm.deviceString("emptyTasksMessage"))+"\n    ")]),_c("transition-group",{staticClass:"task-panels",attrs:{name:"fade"}},_vm._l(_vm.sortedTaskList,(function(task){return _c("TaskPanel",{key:task.id,staticClass:"task-panel",style:{borderBottomColor:_vm.$themePalette.grey.v_200},attrs:{task:task},on:{clickclear:function($event){return _vm.handleClickClear(task)},clickcancel:function($event){return _vm.handleClickCancel(task)}}})})),1),_vm.immersivePage?_c("BottomAppBar",[_c("KButton",{attrs:{text:_vm.coreString("continueAction"),appearance:"raised-button",primary:!0},on:{click:function($event){return _vm.handleRedirectToImportPage()}}})],1):_vm._e()],1)],1)};ManageTasksPagevue_type_template_id_39ab907e_scoped_true_render._withStripped=!0;var TaskPanelvue_type_template_id_a317bd66_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"task-panel",class:{"task-panel-sm":_vm.windowIsSmall}},[_c("div",{staticClass:"icon"},[_c("transition",{attrs:{mode:"out-in"}},[_vm.taskIsFailed?_c("KIcon",{style:{fill:_vm.$themeTokens.error},attrs:{icon:"helpNeeded"}}):_vm.taskIsCompleted?_c("KIcon",{style:{fill:_vm.$themeTokens.success},attrs:{icon:"done"}}):_vm.taskIsRunning?_c("KCircularLoader",{attrs:{size:24,stroke:5}}):_c("KIcon",{style:{fill:_vm.$themeTokens.annotation},attrs:{icon:"inProgress"}})],1)],1),_c("div",{staticClass:"details"},[_c("p",{staticClass:"details-status",style:{color:_vm.$themeTokens.annotation}},[_vm._v("\n      "+_vm._s(_vm.statusText)+"\n    ")]),_c("h2",{staticClass:"details-description"},[_vm._v("\n      "+_vm._s(_vm.descriptionText)+"\n    ")]),_vm.taskIsRunning||_vm.taskIsCanceling?_c("div",{staticClass:"details-progress-bar"},[_vm.taskIsRunning?[_c("KLinearLoader",{staticClass:"k-linear-loader",style:{backgroundColor:_vm.$themeTokens.fineLine},attrs:{type:_vm.loaderType,delay:!1,progress:100*_vm.task.percentage}}),_vm.taskPercentage?_c("span",{staticClass:"details-percentage"},[_vm._v("\n          "+_vm._s(_vm.$formatNumber(_vm.taskPercentage,{style:"percent"}))+"\n        ")]):_vm._e()]:_vm.taskIsCanceling?[_c("KLinearLoader",{staticClass:"k-linear-loader",style:{backgroundColor:_vm.$themeTokens.fineLine},attrs:{type:"indeterminate",delay:!1}})]:_vm._e()],2):_vm._e(),_vm.taskIsCompleted?[_vm.finishedSizeText?_c("p",{staticClass:"details-size"},[_vm._v("\n        "+_vm._s(_vm.finishedSizeText)+"\n      ")]):_vm._e()]:[_vm.sizeText?_c("p",{staticClass:"details-size"},[_vm._v("\n        "+_vm._s(_vm.sizeText)+"\n      ")]):_vm._e()],_c("p",{staticClass:"details-startedby",style:{color:_vm.$themeTokens.annotation}},[_vm._v("\n      "+_vm._s(_vm.startedByText)+"\n    ")])],2),_c("div",{staticClass:"buttons",class:{"button-lift":_vm.taskIsRunning}},[_vm.taskIsCancellable||_vm.taskIsClearable?_c("KButton",{attrs:{disabled:_vm.taskIsCanceling,text:_vm.buttonLabel,appearance:"flat-button"},on:{click:_vm.handleClick}}):_vm._e()],1)])};function TaskPanelvue_type_script_lang_js_typeof(o){return TaskPanelvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},TaskPanelvue_type_script_lang_js_typeof(o)}function TaskPanelvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=TaskPanelvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=TaskPanelvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==TaskPanelvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}TaskPanelvue_type_template_id_a317bd66_scoped_true_render._withStripped=!0;var typeToTrMap=TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty({},external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTECONTENTIMPORT,"importChannelPartial"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCONTENTIMPORT,"importChannelPartial"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTEIMPORT,"importChannelWhole"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKIMPORT,"importChannelWhole"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKEXPORT,"exportChannelWhole"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCONTENTEXPORT,"exportChannelPartial"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECHANNEL,"deleteChannelWhole"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECONTENT,"deleteChannelPartial"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.UPDATECHANNEL,"updatingChannelVersion"),typeToTrPrefixMap=TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty({},external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTECONTENTIMPORT,"import"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCONTENTIMPORT,"import"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.UPDATECHANNEL,"import"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTEIMPORT,"import"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKIMPORT,"import"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKEXPORT,"export"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCONTENTEXPORT,"export"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECHANNEL,"delete"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECONTENT,"delete"),statusToTrMap=TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty(TaskPanelvue_type_script_lang_js_defineProperty({},external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.COMPLETED,"statusComplete"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.FAILED,"statusFailed"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.RUNNING,"statusInProgress"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.QUEUED,"statusInQueue"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.CANCELED,"statusCanceled"),external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.CANCELING,"statusCanceling"),TaskPanel_component=normalizeComponent({name:"TaskPanel",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default()],props:{task:{type:Object,required:!0}},computed:{buttonLabel:function(){return this.taskIsClearable?this.coreString("clearAction"):this.coreString("cancelAction")},taskIsRunning:function(){return this.task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.RUNNING},taskIsCompleted:function(){return this.task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.COMPLETED},taskIsCanceling:function(){return this.task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.CANCELING},taskIsCanceled:function(){return this.task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.CANCELED},taskIsFailed:function(){return this.task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.FAILED||this.taskIsCanceled},taskIsCancellable:function(){return this.task.cancellable},taskIsClearable:function(){return this.task.clearable},taskPercentage:function(){return this.task.percentage},loaderType:function(){return null===this.taskPercentage?"indeterminate":"determinate"},descriptionText:function(){var trName=typeToTrMap[this.task.type];return this.$tr(trName,{channelName:this.task.extra_metadata.channel_name||this.$tr("unknownChannelName"),newVersion:this.task.extra_metadata.new_version})},sizeText:function(){var _this$task$extra_meta=this.task.extra_metadata,file_size=_this$task$extra_meta.file_size,total_resources=_this$task$extra_meta.total_resources;return file_size&&total_resources?this.$tr("numResourcesAndSize",{numResources:total_resources,bytesText:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(file_size)}):file_size?this.$tr("cancelSize",{bytesText:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(file_size)}):this.task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECHANNEL||this.task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECONTENT?this.$tr("deletePreparing",{channelName:this.task.extra_metadata.channel_name||this.$tr("unknownChannelName")}):""},finishedSizeText:function(){var _this$task$extra_meta2=this.task.extra_metadata,transferred_file_size=_this$task$extra_meta2.transferred_file_size,transferred_resources=_this$task$extra_meta2.transferred_resources,file_size=_this$task$extra_meta2.file_size,total_resources=_this$task$extra_meta2.total_resources;if((this.task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKEXPORT||this.task.type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCONTENTEXPORT)&&this.task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.CANCELED)return"";if(file_size&&total_resources){var trPrefix=typeToTrPrefixMap[this.task.type];return transferred_file_size&&transferred_resources&&(transferred_file_size<file_size||transferred_resources<total_resources)?this.$tr("".concat(trPrefix,"PartialRatio"),{currentResources:transferred_resources,totalResources:total_resources,currentSize:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(transferred_file_size),totalSize:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(file_size)}):this.$tr("".concat(trPrefix,"Success"),{totalResources:total_resources,totalSize:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()(file_size)})}return""},statusText:function(){var trName=statusToTrMap[this.task.status];return this.$tr(trName)},startedByText:function(){return this.$tr("startedByUser",{user:this.task.extra_metadata.started_by_username||this.$tr("unknownUsername")})}},methods:{handleClick:function(){this.taskIsCompleted||this.taskIsFailed?this.$emit("clickclear"):this.$emit("clickcancel")}},$trs:{startedByUser:{message:"Started by '{user}'",context:"Refers to the content management *task*."},numResourcesAndSize:{message:"{numResources} {numResources, plural, one {resource} other {resources}} ({bytesText})",context:"Indicates the number of resources and their size."},cancelSize:{message:"Exported size: ({bytesText})",context:"Indicates the number of resources and their size."},statusInProgress:{message:"In-progress",context:"Label indicating that a task is in progress."},statusInQueue:{message:"Waiting",context:"Label indicating that a task is queued.\n"},statusComplete:{message:"Finished",context:"Label indicating that the *task* was completed successfully."},statusFailed:{message:"Failed",context:"Label indicating that a task failed, i.e. it has not been completed."},statusCanceled:{message:"Canceled",context:"Refers to a canceled task in the task manager section."},statusCanceling:{message:"Canceling",context:"Refers to a task being canceled in the task manager section."},importChannelWhole:{message:"Import '{channelName}'",context:"Indicates the user is importing an entire channel. For example:\n\n'Import 'Ubongo Kids''"},importChannelPartial:{message:"Import resources from '{channelName}'",context:"Indicates the user is importing a selection of resources from a specific channel.\n"},exportChannelWhole:{message:"Export '{channelName}'",context:"Indicates the user is exporting an entire channel."},exportChannelPartial:{message:"Export resources from '{channelName}'",context:"Indicates the user is exporting a selection of resources from a specific channel."},deleteChannelWhole:{message:"Delete '{channelName}'",context:"Refers to deleting an entire channel."},deletePreparing:{message:"Preparing to delete resources for '{channelName}'",context:"Indicates that deletion has started but no status can be reported yet."},deleteChannelPartial:{message:"Delete resources from '{channelName}'",context:"Indicates the channel from which resources will be deleted."},updatingChannelVersion:{message:"Update {channelName} to version {newVersion}",context:"Refers to a task where a channel is updated to a new version."},unknownUsername:{message:"Unknown user",context:"Displays if the name of the user carrying out a specific task is not known."},unknownChannelName:{message:"(Channel name unavailable)",context:"This displays if Kolibri is unable to recognize the name of the channel."},stopAction:{message:"Stop",context:"Button to stop a task from executing."},importPartialRatio:{message:"{currentResources} of {totalResources} {totalResources, plural, one {resource} other {resources}} ({currentSize} of {totalSize}) imported",context:"Indicates how many resources are being imported out of the total resources available on that specific channel and the size of the resources. For example:\n\n'718 of 742 resources (22 GB of 22 GB) imported'"},exportPartialRatio:{message:"{currentResources} of {totalResources} {totalResources, plural, one {resource} other {resources}} ({currentSize} of {totalSize}) exported",context:"Indicates how many resources are being exported out of the total resources available on that specific channel, and the size of the resources. For example:\n\n'7 of 10 resources (22 GB of 22 GB) exported'"},deletePartialRatio:{message:"{currentResources} of {totalResources} {totalResources, plural, one {resource} other {resources}} ({currentSize} of {totalSize}) deleted",context:"Indicates how many resources are being deleted out of the total resources available on that specific channel. For example:\n\n'10 of 20 resources deleted'"},importSuccess:{message:"{totalResources} {totalResources, plural, one {resource} other {resources}} ({totalSize}) successfully imported",context:"Indicates the successful import of a specified number of resources. For example:\n\n'4752 resources (29 GB) successfully imported'"},exportSuccess:{message:"{totalResources} {totalResources, plural, one {resource} other {resources}} ({totalSize}) successfully exported",context:"Indicates the successful export of a specified number of resources.\n\n'7 of 10 resources successfully exported'"},deleteSuccess:{message:"{totalResources} {totalResources, plural, one {resource} other {resources}} ({totalSize}) successfully deleted",context:"Indicates the successful deletion of a specified number of resources. For example:\n\n'976 resources (178 MB) successfully deleted'"}}},TaskPanelvue_type_template_id_a317bd66_scoped_true_render,[],!1,null,"a317bd66",null);function ManageTasksPagevue_type_script_lang_js_typeof(o){return ManageTasksPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ManageTasksPagevue_type_script_lang_js_typeof(o)}function ManageTasksPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ManageTasksPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ManageTasksPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){ManageTasksPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ManageTasksPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ManageTasksPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=ManageTasksPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ManageTasksPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ManageTasksPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ManageTasksPage=normalizeComponent({name:"ManageTasksPage",metaInfo:function(){return{title:this.$tr("appBarTitle")}},components:{TaskPanel:TaskPanel_component.exports,BottomAppBar:external_kolibriCoreAppGlobal_coreVue_components_BottomAppBar_default(),ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default(),external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),commonDeviceStrings],setup:function(){useContentTasks()},data:function(){return{loading:!0}},computed:ManageTasksPagevue_type_script_lang_js_objectSpread(ManageTasksPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent",["managedTasks"])),{},{backRoute:function(){return{name:PageNames.MANAGE_CONTENT_PAGE}},sortedTaskList:function(){var sorterArray=this.managedTasks;return sorterArray.sort((function(a,b){var dateA=new Date(a.scheduled_datetime),dateB=new Date(b.scheduled_datetime);return dateA===dateB?0:dateA>dateB?1:-1})),sorterArray},showClearCompletedButton:function(){return some_default()(this.managedTasks,(function(task){return task.clearable}))},immersivePage:function(){return this.$route.query&&this.$route.query.last}}),watch:{managedTasks:function(val){val.length>0&&(this.loading=!1)}},mounted:function(){var _this=this;0===this.managedTasks.length&&setTimeout((function(){_this.loading=!1}),2e3)},methods:{handleClickClear:function(task){external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clear(task.id).catch((function(){}))},handleClickCancel:function(task){external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.cancel(task.id)},handleClickClearAll:function(){external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clearAll()},handleRedirectToImportPage:function(){this.$router.push(this.$router.getRoute(this.$route.query.last,{channel_id:this.$route.query.channel_id}))}},$trs:{tasksHeader:{message:"Tasks",context:"Heading in the task manager section."},clearCompletedAction:{message:"Clear completed",context:"Button on the task manager page. When pressed it will clear all the completed tasks from the list."},appBarTitle:{message:"Task manager",context:"Title of the page that displays all the tasks in the task manager. "}}},ManageTasksPagevue_type_template_id_39ab907e_scoped_true_render,[],!1,null,"39ab907e",null).exports,NewChannelVersionPagevue_type_template_id_4f816325_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{icon:"back",appBarTitle:_vm.channelName,route:_vm.backRoute}},[_c("KPageContainer",{staticClass:"device-container"},[_vm.loadingChannel?_vm._e():_c("div",[_c("section",[_c("h1",[_vm._v("\n          "+_vm._s(_vm.versionAvailableText)+"\n        ")]),_c("p",[_vm._v(" "+_vm._s(_vm.$tr("youAreCurrentlyOnVersion",{currentVersion:_vm.currentVersion})))]),_vm.channelIsIncomplete?_c("p",[_vm._v("\n          "+_vm._s(_vm.$tr("channelIsIncomplete",{available:_vm.available,total:_vm.total}))+"\n        ")]):_vm._e()]),_c("section",[_c("p",[_c("strong",[_vm._v("\n            "+_vm._s(_vm.$tr("versionChangesHeader",{oldVersion:_vm.currentVersion,newVersion:_vm.nextVersion}))+"\n          ")])]),_vm.loadingChannel||_vm.loadingTask?_c("KLinearLoader",{attrs:{indeterminate:!0,delay:!1}}):_c("table",[_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$tr("resourcesAvailableForImport")))]),_c("td",{staticClass:"col-2"},[_c("span",{class:{"count-added":_vm.newResources},style:{color:_vm.$themeTokens.success}},[_vm._v("\n                "+_vm._s(_vm.newResources)+"\n              ")])])]),_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$tr("resourcesToBeDeleted")))]),_c("td",[_c("span",{class:{"count-deleted":_vm.deletedResources>0},style:{color:_vm.$themeTokens.error}},[_vm._v("\n                "+_vm._s(_vm.deletedResources)+"\n              ")])]),_c("td",[_vm.deletedResources?_c("CoreInfoIcon",{staticClass:"info-icon",attrs:{tooltipText:_vm.$tr("resourcesToBeDeletedTooltip"),iconAriaLabel:_vm.$tr("resourcesToBeDeletedTooltip"),tooltipPlacement:"right"}}):_vm._e()],1)]),_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$tr("resourcesToBeUpdated")))]),_c("td",[_vm._v("\n              "+_vm._s(_vm.updatedResources)+"\n            ")])])])],1),_c("dl",[_vm._l(_vm.sortedFilteredVersionNotes,(function(note,idx){return[_c("dt",{key:"dt-"+idx},[_vm._v("\n            "+_vm._s(_vm.$tr("versionNumberHeader",{version:note.version}))+"\n          ")]),_c("dd",{key:"dd-"+idx,attrs:{dir:"auto"}},[_vm._v("\n            "+_vm._s(note.notes)+"\n          ")])]}))],2),_vm.showModal?_c("KModal",{attrs:{title:_vm.$tr("updateChannelAction"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction"),disabled:_vm.disableModal},on:{submit:_vm.handleSubmit,cancel:function($event){_vm.showModal=!1}}},[_c("p",[_vm._v(_vm._s(_vm.$tr("updateConfirmationQuestion",{channelName:_vm.channelName,version:_vm.nextVersion})))])]):_vm._e(),_c("BottomAppBar",[_c("KButton",{attrs:{text:_vm.$tr("updateChannelAction"),appearance:"raised-button",primary:!0,disabled:_vm.loadingChannel||_vm.loadingTask},on:{click:function($event){_vm.showModal=!0}}})],1)],1)])],1)};NewChannelVersionPagevue_type_template_id_4f816325_scoped_true_render._withStripped=!0;var map=__webpack_require__(8936),map_default=__webpack_require__.n(map),external_kolibriCoreAppGlobal_coreVue_components_CoreInfoIcon_namespaceObject=kolibriCoreAppGlobal.coreVue.components.CoreInfoIcon;function ManageContentPage_api_typeof(o){return ManageContentPage_api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ManageContentPage_api_typeof(o)}function ManageContentPage_api_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ManageContentPage_api_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ManageContentPage_api_ownKeys(Object(t),!0).forEach((function(r){ManageContentPage_api_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ManageContentPage_api_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ManageContentPage_api_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=ManageContentPage_api_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ManageContentPage_api_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ManageContentPage_api_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function getInstalledChannel(channelId){return deviceChannel.fetchModel({id:channelId}).catch((function(){return Promise.reject("CHANNEL_NOT_INSTALLED")}))}function fetchChannelAtSource(params){var sourcePromise,driveId,channelId,channel_id=params.channel_id,drive_id=params.drive_id,peer=params.peer;return drive_id?(driveId=drive_id,channelId=channel_id,sourcePromise=external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:driveinfo-detail"](driveId)}).then((function(_ref){var data=_ref.data,channelMatch=find_default()(data.metadata.channels,{id:channelId});if(!channelMatch)throw ReferenceError("CHANNEL_NOT_ON_DRIVE");return ManageContentPage_api_objectSpread(ManageContentPage_api_objectSpread({},channelMatch),{},{driveId:driveId})})).catch((function(){return Promise.reject("CHANNEL_NOT_ON_DRIVE")}))):sourcePromise=peer?function(peerId,channelId){return external_kolibriCoreAppGlobal_resources_namespaceObject.NetworkLocationResource.fetchModel({id:peerId}).then((function(location){return external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchModel({id:channelId,getParams:{baseurl:location.base_url},force:!0}).then((function(channel){return ManageContentPage_api_objectSpread(ManageContentPage_api_objectSpread({},channel),{},{baseurl:location.base_url})}))})).catch((function(){return Promise.reject("CHANNEL_NOT_ON_PEER")}))}(peer,channel_id):function(channelId){return external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchModel({id:channelId}).catch((function(){return Promise.reject("CHANNEL_NOT_ON_STUDIO")}))}(channel_id),Promise.all([getInstalledChannel(channel_id),sourcePromise])}function NewChannelVersionPagevue_type_script_lang_js_typeof(o){return NewChannelVersionPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},NewChannelVersionPagevue_type_script_lang_js_typeof(o)}function NewChannelVersionPagevue_type_script_lang_js_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return NewChannelVersionPagevue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NewChannelVersionPagevue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NewChannelVersionPagevue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function NewChannelVersionPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function NewChannelVersionPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?NewChannelVersionPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){NewChannelVersionPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):NewChannelVersionPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function NewChannelVersionPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=NewChannelVersionPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=NewChannelVersionPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==NewChannelVersionPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var NewChannelVersionPage=normalizeComponent({name:"NewChannelVersionPage",metaInfo:function(){return{title:this.versionAvailableText}},components:{CoreInfoIcon:__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_CoreInfoIcon_namespaceObject)(),BottomAppBar:external_kolibriCoreAppGlobal_coreVue_components_BottomAppBar_default(),ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],setup:function(){useContentTasks()},data:function(){return{channelName:"",nextVersion:null,currentVersion:null,deletedResources:null,newResources:null,updatedResources:null,versionNotes:{},showModal:!1,disableModal:!1,loadingTask:!0,loadingChannel:!0,watchedTaskId:null}},computed:NewChannelVersionPagevue_type_script_lang_js_objectSpread(NewChannelVersionPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent",["tasks"])),{},{backRoute:function(){return{name:get_default()(this,"$route.query.last",PageNames.MANAGE_CONTENT_PAGE)}},channelIsIncomplete:function(){return!1},versionAvailableText:function(){return this.channelName?this.$tr("versionIsAvailable",{channelName:this.channelName,nextVersion:this.nextVersion}):""},params:function(){return pickBy_default()({channel_id:this.$route.params.channel_id,drive_id:this.$route.query.drive_id,peer:this.$route.query.address_id,channel_name:this.channelName})},sortedFilteredVersionNotes:function(){var _this=this,versionArray=map_default()(this.versionNotes,(function(val,key){return{version:Number(key),notes:val}})).filter((function(note){return note.version>_this.currentVersion}));return sortBy_default()(versionArray,(function(note){return-note.version}))},watchedTaskHasFinished:function(){return this.$store.getters["manageContent/taskFinished"](this.watchedTaskId)}}),watch:{watchedTaskHasFinished:function(val){val&&val===this.watchedTaskId&&this.onWatchedTaskFinished()}},mounted:function(){var _this2=this;this.loadChannelInfo().then((function(_ref){var _ref2=NewChannelVersionPagevue_type_script_lang_js_slicedToArray(_ref,2),installedChannel=_ref2[0],sourceChannel=_ref2[1];_this2.setChannelData(installedChannel,sourceChannel),_this2.loadingChannel=!1,_this2.startDiffStatsTask()}))},methods:{handleSubmit:function(){var _this3=this;return this.disableModal=!0,external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask(NewChannelVersionPagevue_type_script_lang_js_objectSpread({type:this.params.drive_id?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKIMPORT:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTEIMPORT,update:!0},this.params)).then((function(task){if(_this3.newResources){_this3.loadingTask=!0;var taskId=task.id,stopWatching=_this3.$store.watch((function(state){return state.manageContent.taskList}),(function(tasks){var match=tasks.find((function(task){return task.id===taskId}))||{};match&&match.extra_metadata.database_ready?(stopWatching(),_this3.$router.push(NewChannelVersionPagevue_type_script_lang_js_objectSpread(NewChannelVersionPagevue_type_script_lang_js_objectSpread({},_this3.$router.getRoute(PageNames.SELECT_CONTENT)),{},{query:{last:PageNames.MANAGE_CONTENT_PAGE}}))):match.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.FAILED&&(stopWatching(),_this3.$router.push(_this3.$router.getRoute(PageNames.MANAGE_TASKS)))}))}else _this3.$router.push({name:PageNames.MANAGE_TASKS,query:{last:PageNames.MANAGE_CHANNEL,channel_id:_this3.params.channel_id}})})).catch((function(error){_this3.$store.dispatch("handleApiError",{error:error})}))},setChannelData:function(installedChannel,sourceChannel){this.channelName=installedChannel.name,this.currentVersion=installedChannel.version,this.nextVersion=sourceChannel.version,this.versionNotes=sourceChannel.version_notes||{}},loadChannelInfo:function(){var _this4=this;return fetchChannelAtSource(this.params).catch((function(error){_this4.$store.dispatch("handleApiError",{error:error})}))},startDiffStatsTask:function(){var _this5=this;return function(taskParams,tasks){taskParams.type=taskParams.drive_id?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.LOCALCHANNELDIFFSTATS:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTECHANNELDIFFSTATS;var match=find_default()(tasks,taskParams);return match?Promise.resolve(match):external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask(taskParams)}(NewChannelVersionPagevue_type_script_lang_js_objectSpread({},this.params),this.tasks).then((function(task){task.clearable?task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.FAILED?(_this5.startDiffStatsTask(),external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clear(task.id)):_this5.readAndDeleteTask(task):_this5.watchedTaskId=task.id}))},readAndDeleteTask:function(task){return this.loadingTask=!1,this.newResources=task.extra_metadata.new_resources_count,this.deletedResources=task.extra_metadata.deleted_resources_count,this.updatedResources=task.extra_metadata.updated_resources_count,external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clear(task.id)},onWatchedTaskFinished:function(){var task=find_default()(this.$store.state.manageContent.taskList,{id:this.watchedTaskId});this.readAndDeleteTask(task)}},$trs:{versionIsAvailable:{message:"Version {nextVersion} of '{channelName}' is available",context:"When a new version of a channel is available, users can download it from this page."},youAreCurrentlyOnVersion:{message:"You are currently on version {currentVersion}",context:"Indicates to the user which version of the channel they are currently using."},versionChangesHeader:{message:"Changes if you choose to update from version {oldVersion} to {newVersion}:",context:"Header above a table that lists what the consequences of updating the channel would be"},resourcesAvailableForImport:{message:"New resources available",context:"Label associated with the number of resources that would become available for importing if the channel is updated"},resourcesToBeDeleted:{message:"Resources that will be deleted",context:"Label associated with the number of resources that would be deleted if the channel is updated"},resourcesToBeDeletedTooltip:{message:"When you update this channel, some resources will be deleted. This may affect lessons or quizzes that are using the deleted resources",context:"Warning about the effects of updating the channel"},resourcesToBeUpdated:{message:"Resources to be updated",context:"Label associated with the number of resources would be updated"},updateChannelAction:{message:"Update channel",context:"Title of the button on the 'Update channel' page."},versionNumberHeader:{message:"Version {version}",context:"Indicates the version number of a new version of the specified channel."},updateConfirmationQuestion:{message:"Are you sure you want to update '{channelName}' to version {version}?",context:"Confirmation message that shows if user wants to complete the update channel action. For example:\n\n'Are you sure you want to update 'CREE' to version5?'"},channelIsIncomplete:{message:"This copy of '{channel}' is incomplete. It contains {resourcesInChannel} of {totalResources} resources from the original channel",context:"Warning indicating that the source does not have all content from the original channel"}}},NewChannelVersionPagevue_type_template_id_4f816325_scoped_true_render,[],!1,null,"4f816325",null).exports,RearrangeChannelsPagevue_type_template_id_c976ab5e_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{appBarTitle:_vm.$tr("editChannelOrderTitle"),route:_vm.backRoute}},[_c("KPageContainer",{staticClass:"device-container"},[_c("p",{staticClass:"instructions"},[_vm._v("\n      "+_vm._s(_vm.$tr("instructions"))+"\n    ")]),_vm.loading||0!==_vm.channels.length?[_c("DragContainer",{staticClass:"container",attrs:{items:_vm.channels},on:{sort:_vm.handleOrderChange}},[_c("transition-group",{staticClass:"wrapper",attrs:{tag:"div",name:"list"}},_vm._l(_vm.channels,(function(channel,index){return _c("Draggable",{key:channel.id},[_c("DragHandle",[_c("div",{staticClass:"item",class:_vm.$computedClass(_vm.itemClass),style:{backgroundColor:_vm.$themeTokens.surface}},[_c("DragSortWidget",{staticClass:"sort-widget",attrs:{moveUpText:_vm.$tr("upLabel",{name:channel.name}),moveDownText:_vm.$tr("downLabel",{name:channel.name}),isFirst:0===index,isLast:index===_vm.channels.length-1},on:{moveUp:function($event){return _vm.shiftOne(index,-1)},moveDown:function($event){return _vm.shiftOne(index,1)}}}),_c("div",{staticClass:"title"},[_vm._v("\n                  "+_vm._s(channel.name)+"\n                ")])],1)])],1)})),1)],1)]:_c("p",[_vm._v("\n      "+_vm._s(_vm.$tr("noChannels"))+"\n    ")])],2)],1)};RearrangeChannelsPagevue_type_template_id_c976ab5e_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_DragSortWidget_namespaceObject=kolibriCoreAppGlobal.coreVue.components.DragSortWidget,external_kolibriCoreAppGlobal_coreVue_components_DragSortWidget_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_DragSortWidget_namespaceObject),external_kolibriCoreAppGlobal_coreVue_components_DragContainer_namespaceObject=kolibriCoreAppGlobal.coreVue.components.DragContainer,external_kolibriCoreAppGlobal_coreVue_components_DragContainer_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_DragContainer_namespaceObject),external_kolibriCoreAppGlobal_coreVue_components_DragHandle_namespaceObject=kolibriCoreAppGlobal.coreVue.components.DragHandle,external_kolibriCoreAppGlobal_coreVue_components_DragHandle_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_DragHandle_namespaceObject),external_kolibriCoreAppGlobal_coreVue_components_Draggable_namespaceObject=kolibriCoreAppGlobal.coreVue.components.Draggable,external_kolibriCoreAppGlobal_coreVue_components_Draggable_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_Draggable_namespaceObject);function RearrangeChannelsPagevue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return RearrangeChannelsPagevue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return RearrangeChannelsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RearrangeChannelsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RearrangeChannelsPagevue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var RearrangeChannelsPage=normalizeComponent({name:"RearrangeChannelsPage",metaInfo:function(){return{title:this.$tr("editChannelOrderTitle")}},components:{DragSortWidget:external_kolibriCoreAppGlobal_coreVue_components_DragSortWidget_default(),DragContainer:external_kolibriCoreAppGlobal_coreVue_components_DragContainer_default(),DragHandle:external_kolibriCoreAppGlobal_coreVue_components_DragHandle_default(),Draggable:external_kolibriCoreAppGlobal_coreVue_components_Draggable_default(),ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default()},setup:function(){useContentTasks()},data:function(){return{loading:!0,channels:[]}},computed:{backRoute:function(){return{name:PageNames.MANAGE_CONTENT_PAGE}},itemClass:function(){return{":hover":{backgroundColor:this.$themePalette.grey.v_200}}}},beforeMount:function(){var _this=this;if(!this.$store.getters.canManageContent)return this.$router.replace(this.$router.getRoute("MANAGE_CONTENT_PAGE"));this.fetchChannels().then((function(channels){_this.channels=RearrangeChannelsPagevue_type_script_lang_js_toConsumableArray(channels),_this.loading=!1})).catch((function(error){_this.$store.disptch("CORE_SET_ERROR",error)}))},methods:{postNewOrder:function(channelIds){return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:kolibri.plugins.device:devicechannelorder"](),method:"POST",data:channelIds})},fetchChannels:function(){return deviceChannel.fetchCollection({force:!0,getParams:{available:!0}})},shiftOne:function(index,delta){var newArray=RearrangeChannelsPagevue_type_script_lang_js_toConsumableArray(this.channels),adjacentItem=newArray[index+delta];newArray[index+delta]=newArray[index],newArray[index]=adjacentItem,this.handleOrderChange({newArray:newArray})},handleOrderChange:function(event){var _this2=this,oldArray=RearrangeChannelsPagevue_type_script_lang_js_toConsumableArray(this.channels);this.channels=RearrangeChannelsPagevue_type_script_lang_js_toConsumableArray(event.newArray),this.postNewOrder(event.newArray.map((function(x){return x.id}))).then((function(){_this2.$store.dispatch("createSnackbar",_this2.$tr("successNotification"))})).catch((function(){_this2.channels=[],_this2.$nextTick().then((function(){_this2.channels=oldArray})),_this2.$store.dispatch("createSnackbar",_this2.$tr("failureNotification"))}))}},$trs:{instructions:{message:"Control the order in which channels will be displayed to learners and coaches",context:"Text explaining how the channel reordering feature works"},successNotification:{message:"Channel order saved",context:"Success message shown when the admin re-orders channels"},failureNotification:{message:"There was a problem reordering the channels",context:"Error message that displays if there is a problem reordering channels on the 'Edit channel order' page."},noChannels:{message:"There are no channels",context:"This message will display on the 'Edit channel order' page if there are no channels available."},upLabel:{message:"Move {name} up one",context:"Label to rearrange channel order. Not seen on UI."},downLabel:{message:"Move {name} down one",context:"Label to rearrange channel order. Not seen on UI."},editChannelOrderTitle:{message:"Edit channel order",context:"Title of the 'Edit channel order' page where users can rearrange the order in which channels will be displayed to learners and coaches."}}},RearrangeChannelsPagevue_type_template_id_c976ab5e_scoped_true_render,[],!1,null,"c976ab5e",null).exports,UserPermissionsPagevue_type_template_id_ebc505ac_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{appBarTitle:_vm.$tr("permissionsTitle"),route:_vm.backRoute,loading:_vm.isPageLoading}},[_vm.isPageLoading?_vm._e():_c("KPageContainer",{staticClass:"device-container"},[null===_vm.user?_c("h1",[_vm._v("\n      "+_vm._s(_vm.$tr("userDoesNotExist"))+"\n    ")]):[_c("div",{staticClass:"section user-info"},[_c("h1",{attrs:{dir:"auto"}},[_c("KLabeledIcon",{attrs:{icon:"person",label:_vm.isCurrentUser?_vm.$tr("you"):_vm.user.full_name}})],1),_c("table",[_c("tr",[_c("th",[_vm._v("\n              "+_vm._s(_vm.coreString("usernameLabel"))+"\n            ")]),_c("td",[_vm._v(_vm._s(_vm.user.username))])]),_c("tr",[_c("th",[_vm._v("\n              "+_vm._s(_vm.coreString("userTypeLabel"))+"\n            ")]),_c("td",[_c("UserTypeDisplay",{attrs:{userType:_vm.UserType(_vm.user)}})],1)]),_c("tr",[_c("th",[_vm._v("\n              "+_vm._s(_vm.coreString("facilityLabel"))+"\n            ")]),_c("td",{attrs:{dir:"auto"}},[_vm._v("\n              "+_vm._s(_vm.facilityName)+"\n            ")])])])]),_c("div",{staticClass:"section superuser"},[_c("KCheckbox",{staticClass:"super-admin-checkbox",attrs:{disabled:_vm.superuserDisabled,checked:_vm.superuserChecked},on:{change:function($event){_vm.superuserChecked=$event}}},[_c("span",{style:_vm.superuserLabelStyle},[_vm._v(_vm._s(_vm.$tr("makeSuperAdmin")))]),_c("PermissionsIcon",{staticClass:"permissions-icon",attrs:{permissionType:"SUPERUSER",lightIcon:_vm.superuserDisabled}})],1),_c("ul",{staticClass:"checkbox-description",style:{color:_vm.superuserDisabled?_vm.$themeTokens.textDisabled:_vm.$themeTokens.annotation}},[_c("li",[_vm._v(_vm._s(_vm.$tr("superAdminExplanation1")))]),_c("li",[_vm._v(_vm._s(_vm.$tr("superAdminExplanation2",{facilityName:_vm.facilityName})))])])],1),_c("div",{staticClass:"section"},[_c("h2",[_vm._v(_vm._s(_vm.coreString("devicePermissionsLabel")))]),_c("KCheckbox",{attrs:{disabled:_vm.devicePermissionsDisabled,label:_vm.$tr("devicePermissionsDetails"),checked:_vm.devicePermissionsChecked},on:{change:function($event){_vm.devicePermissionsChecked=$event}}})],1),_c("div",{staticClass:"buttons"},[_c("KButtonGroup",[_c("KButton",{attrs:{disabled:_vm.saveDisabled,text:_vm.$tr("saveButton"),primary:!0,appearance:"raised-button"},on:{click:function($event){return _vm.save()}}}),_c("KButton",{attrs:{disabled:_vm.uiBlocked,text:_vm.coreString("cancelAction"),primary:!1,appearance:"flat-button"},on:{click:function($event){return _vm.goBack()}}})],1)],1),_vm.saveFailed?_c("div",[_vm._v("\n        "+_vm._s(_vm.$tr("saveFailureNotification"))+"\n      ")]):_vm._e()]],2)],1)};UserPermissionsPagevue_type_template_id_ebc505ac_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_utils_UserType_namespaceObject=kolibriCoreAppGlobal.utils.UserType,external_kolibriCoreAppGlobal_utils_UserType_default=__webpack_require__.n(external_kolibriCoreAppGlobal_utils_UserType_namespaceObject),external_kolibriCoreAppGlobal_coreVue_components_UserTypeDisplay_namespaceObject=kolibriCoreAppGlobal.coreVue.components.UserTypeDisplay,external_kolibriCoreAppGlobal_coreVue_components_UserTypeDisplay_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_UserTypeDisplay_namespaceObject);function UserPermissionsPagevue_type_script_lang_js_typeof(o){return UserPermissionsPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},UserPermissionsPagevue_type_script_lang_js_typeof(o)}function UserPermissionsPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function UserPermissionsPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?UserPermissionsPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){UserPermissionsPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):UserPermissionsPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function UserPermissionsPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=UserPermissionsPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=UserPermissionsPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==UserPermissionsPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var UserPermissionsPage=normalizeComponent({name:"UserPermissionsPage",metaInfo:function(){return{title:this.$tr("documentTitle",{name:this.user.full_name})}},components:{ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default(),PermissionsIcon:external_kolibriCoreAppGlobal_coreVue_components_PermissionsIcon_default(),UserTypeDisplay:external_kolibriCoreAppGlobal_coreVue_components_UserTypeDisplay_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],data:function(){return{devicePermissionsChecked:void 0,saveFailed:!1,superuserChecked:void 0,uiBlocked:!1}},computed:UserPermissionsPagevue_type_script_lang_js_objectSpread(UserPermissionsPagevue_type_script_lang_js_objectSpread(UserPermissionsPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)(["isPageLoading","facilities","currentUserId"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("userPermissions",["user","permissions"])),{},{backRoute:function(){return{name:PageNames.MANAGE_PERMISSIONS_PAGE}},facilityName:function(){var _this=this;return this.facilities.find((function(facility){return facility.id===_this.user.facility})).name},isCurrentUser:function(){return this.currentUserId===this.user.id},superuserDisabled:function(){return this.uiBlocked||this.isCurrentUser},saveDisabled:function(){return this.uiBlocked||this.isCurrentUser||this.permissionsAreUnchanged},devicePermissionsDisabled:function(){return this.uiBlocked||this.superuserChecked},permissionsAreUnchanged:function(){return this.permissions.is_superuser===this.superuserChecked&&this.permissions.can_manage_content===this.devicePermissionsChecked},superuserLabelStyle:function(){return{color:this.superuserDisabled?this.$themeTokens.textDisabled:""}}}),watch:{superuserChecked:function(newVal,oldVal){void 0!==oldVal&&(this.devicePermissionsChecked=newVal)},user:function(){this.superuserChecked=this.permissions.is_superuser,this.devicePermissionsChecked=this.permissions.can_manage_content||this.permissions.is_superuser}},methods:UserPermissionsPagevue_type_script_lang_js_objectSpread(UserPermissionsPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)("userPermissions",["addOrUpdateUserPermissions"])),{},{save:function(){var _this2=this;this.uiBlocked=!0,this.addOrUpdateUserPermissions({userId:this.user.id,is_superuser:this.superuserChecked,can_manage_content:this.devicePermissionsChecked}).then((function(){_this2.showSnackbarNotification("changesSaved"),_this2.uiBlocked=!1,_this2.goBack()})).catch((function(){_this2.uiBlocked=!1,_this2.saveFailed=!0}))},goBack:function(){this.$router.push({name:"MANAGE_PERMISSIONS_PAGE"})},UserType:external_kolibriCoreAppGlobal_utils_UserType_default()}),$trs:{devicePermissionsDetails:{message:"Can manage resources on this device",context:"Label for the checkbox to confirm granting a user permissions to manage content on the device."},documentTitle:{message:"{ name }'s Device Permissions",context:"Page title for the individual user device permissions view. This is not seen in the UI."},makeSuperAdmin:{message:"Make super admin",context:"Label for the checkbox to confirm giving the user super admin permissions on the device."},permissionsTitle:{message:"Permissions",context:"Indicates the Device > Permissions tab. Permissions refer to what users can manage on the device."},saveButton:{message:"Save Changes",context:"Button on user permission page."},saveFailureNotification:{message:"There was a problem saving these changes.",context:"Error message if changes made on user permissions page are not saved."},userDoesNotExist:{message:"User does not exist",context:"Error message."},superAdminExplanation1:{message:"Has all device permissions and can manage the device permissions of other users",context:"Description of super admin role."},superAdminExplanation2:{message:"Has admin permissions for all facilities on this device, but is still a member of the facility '{facilityName}'",context:"Description of super admin role."},you:{message:"You",context:"Refers to the admin user who is currently logged in to Kolibri."}}},UserPermissionsPagevue_type_template_id_ebc505ac_scoped_true_render,[],!1,null,"ebc505ac",null).exports,external_kolibriCoreAppGlobal_coreVue_components_AuthMessage_namespaceObject=kolibriCoreAppGlobal.coreVue.components.AuthMessage,external_kolibriCoreAppGlobal_coreVue_components_AuthMessage_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_AuthMessage_namespaceObject);function withAuthMessage_typeof(o){return withAuthMessage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},withAuthMessage_typeof(o)}function withAuthMessage_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function withAuthMessage_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?withAuthMessage_ownKeys(Object(t),!0).forEach((function(r){withAuthMessage_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):withAuthMessage_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function withAuthMessage_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=withAuthMessage_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=withAuthMessage_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==withAuthMessage_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var withAuthMessage_logging=external_kolibriCoreAppGlobal_lib_logging_default().getLogger("kolibri/plugins/device/assets/src/views/withAuthMessage.js"),roleToGetterMap={contentManager:"canManageContent",admin:"isAdmin",superuser:"isSuperuser"};function withAuthMessage(component,authorizedRole){var originalProps=component.props||[],originalMethods=component.methods||[];return external_kolibriCoreAppGlobal_lib_vue_default().component("WithAuthMessage",{props:withAuthMessage_objectSpread({},originalProps),beforeRouteEnter:component.beforeRouteEnter,beforeRouteUpdate:component.beforeRouteUpdate,beforeRouteLeave:component.beforeRouteLeave,methods:withAuthMessage_objectSpread({},originalMethods),render:function(createElement){var canAccess,getterName=roleToGetterMap[authorizedRole];if(getterName){var getter=external_kolibriCoreAppGlobal_coreVue_vuex_store_default().getters[getterName];getter?canAccess=function(){return getter}:withAuthMessage_logging.error("Getter is not registered in store: ".concat(getterName))}else withAuthMessage_logging.error("No default getter associated with authorizedRole: ".concat(authorizedRole));return canAccess&&canAccess()?createElement(component,{props:withAuthMessage_objectSpread({},this.$props)}):createElement(external_kolibriCoreAppGlobal_coreVue_components_AuthMessage_default(),{props:{authorizedRole:authorizedRole}})}})}var omit=__webpack_require__(9474),omit_default=__webpack_require__.n(omit);function getChannelWithContentSizes(channelId){var getParams={include_fields:["total_resources","total_file_size","on_device_resources","on_device_file_size","new_resource_count","new_resource_total_size"]};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(getParams.partial=!1),new Promise((function(resolve,reject){deviceChannel.fetchModel({id:channelId,getParams:getParams,force:!0}).then(resolve,reject)}))}function downloadChannelMetadata(){var store=arguments.length>0&&void 0!==arguments[0]?arguments[0]:external_kolibriCoreAppGlobal_coreVue_vuex_store_default();if(!store.getters["manageContent/wizard/inLocalImportMode"]&&!store.getters["manageContent/wizard/inRemoteImportMode"]&&!store.getters["manageContent/wizard/inPeerImportMode"])throw Error("Channel Metadata is only downloaded when importing");var _store$state$manageCo=store.state.manageContent.wizard,transferredChannel=_store$state$manageCo.transferredChannel,selectedDrive=_store$state$manageCo.selectedDrive,selectedPeer=_store$state$manageCo.selectedPeer,taskParams={channel_id:transferredChannel.id,channel_name:transferredChannel.name,type:store.getters["manageContent/wizard/inLocalImportMode"]?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCHANNELIMPORT:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTECHANNELIMPORT};return store.getters["manageContent/wizard/inLocalImportMode"]?taskParams.drive_id=selectedDrive.id:store.getters["manageContent/wizard/inPeerImportMode"]&&(taskParams.peer=selectedPeer.id),store.commit("CORE_SET_PAGE_LOADING",!1),external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask(taskParams).catch((function(){return Promise.reject({errorType:ErrorTypes.CONTENT_DB_LOADING_ERROR})})).then((function(task){return function(taskId){var store=arguments.length>1&&void 0!==arguments[1]?arguments[1]:external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),taskList=function(state){return state.manageContent.taskList};return new Promise((function(resolve,reject){var stopWatching=store.watch(taskList,(function(tasks){var match=tasks.find((function(task){return task.id===taskId}));match&&match.status!==external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.COMPLETED?match.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.FAILED&&(stopWatching(),reject()):(stopWatching(),resolve({taskId:taskId,cancelled:!match}))}))}))}(task.id,store)})).then((function(completedTask){var taskId=completedTask.taskId,cancelled=completedTask.cancelled;return taskId&&!cancelled?external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clear(taskId).then((function(){return getChannelWithContentSizes(transferredChannel.id)})).catch((function(){return getChannelWithContentSizes(transferredChannel.id)})):Promise.reject({errorType:ErrorTypes.CHANNEL_TASK_ERROR})}))}function selectContentActions_typeof(o){return selectContentActions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},selectContentActions_typeof(o)}function selectContentActions_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function selectContentActions_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?selectContentActions_ownKeys(Object(t),!0).forEach((function(r){selectContentActions_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):selectContentActions_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function selectContentActions_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=selectContentActions_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=selectContentActions_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==selectContentActions_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function loadChannelMetadata(store){var transferredChannel=store.state.manageContent.wizard.transferredChannel,channelOnDevice=store.getters["manageContent/channelIsOnDevice"](transferredChannel.id),newChannelDbAvailable=channelOnDevice&&!channelOnDevice.available&&channelOnDevice.version<transferredChannel.version;return(!channelOnDevice||newChannelDbAvailable?downloadChannelMetadata(store):getChannelWithContentSizes(transferredChannel.id)).then((function(channel){store.commit("manageContent/wizard/SET_TRANSFERRED_CHANNEL",selectContentActions_objectSpread(selectContentActions_objectSpread({},channel),{},{version:transferredChannel.version,public:transferredChannel.public}))})).catch((function(err){err&&"CHANNEL_TASK_ERROR"!==err.errorType&&store.commit("manageContent/wizard/SET_WIZARD_STATUS",err.errorType)}))}function getAvailableSpaceOnDrive(selectedDrive){return selectedDrive?Promise.resolve(selectedDrive.freespace):external_kolibriCoreAppGlobal_client_default()({url:"".concat(external_kolibriCoreAppGlobal_urls_default()["kolibri:core:freespace"]()),params:{path:"Content"}}).then((function(_ref){return _ref.data.freespace})).catch((function(){return-1}))}function apiPeerImport_typeof(o){return apiPeerImport_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},apiPeerImport_typeof(o)}function apiPeerImport_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function apiPeerImport_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?apiPeerImport_ownKeys(Object(t),!0).forEach((function(r){apiPeerImport_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):apiPeerImport_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function apiPeerImport_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=apiPeerImport_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=apiPeerImport_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==apiPeerImport_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function handlers_typeof(o){return handlers_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},handlers_typeof(o)}function wizard_handlers_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||wizard_handlers_unsupportedIterableToArray(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function handlers_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return wizard_handlers_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||wizard_handlers_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wizard_handlers_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return wizard_handlers_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wizard_handlers_arrayLikeToArray(o,minLen):void 0}}function wizard_handlers_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function handlers_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function handlers_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?handlers_ownKeys(Object(t),!0).forEach((function(r){handlers_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):handlers_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function handlers_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=handlers_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=handlers_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==handlers_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var handlers_logging=external_kolibriCoreAppGlobal_lib_logging_default().getLogger("kolibri/plugins/device/assets/src/modules/wizard/handlers.js");function getSelectedDrive(store,driveId){return new Promise((function(resolve,reject){store.dispatch("manageContent/refreshDriveList",null,{root:!0}).then((function(driveList){store.commit("manageContent/wizard/SET_DRIVE_LIST",driveList);var drive=find_default()(driveList,{id:driveId});drive?resolve(handlers_objectSpread({},drive)):reject({error:ContentWizardErrors.DRIVE_NOT_FOUND})})).catch((function(){reject({error:ContentWizardErrors.DRIVE_ERROR})}))}))}function getInstalledChannelsPromise(store){var channelList=store.state.manageContent.channelList;return 0===channelList.length?store.dispatch("manageContent/refreshChannelList",null,{root:!0}):Promise.resolve(handlers_toConsumableArray(channelList))}function getTransferType(params){var drive_id=params.drive_id,address_id=params.address_id;return drive_id?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT:address_id?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.PEERIMPORT:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.REMOTEIMPORT}function handleError(store,error){var errorType=error.error;if(errorType)return store.commit("manageContent/wizard/SET_WIZARD_STATUS",errorType);store.commit("manageContent/wizard/RESET_STATE"),store.dispatch("handleApiError",{error:error})}function showAvailableChannelsPage(store,params){var availableChannelsPromise,selectedDrivePromise,transferType=getTransferType(params);if(store.commit("SET_PAGE_NAME",ContentWizardPages.AVAILABLE_CHANNELS),store.commit("CORE_SET_PAGE_LOADING",!0),store.commit("manageContent/wizard/RESET_STATE"),null===transferType)return external_kolibriCoreAppGlobal_coreVue_router_default().replace(manageContentPageLink());transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT&&(selectedDrivePromise=getSelectedDrive(store,params.drive_id),availableChannelsPromise=getInstalledChannelsPromise(store).then((function(){return selectedDrivePromise.then((function(drive){return store.dispatch("manageContent/wizard/getAllDriveChannels",drive)}))}))),transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.REMOTEIMPORT&&(selectedDrivePromise=Promise.resolve({}),availableChannelsPromise=new Promise((function(resolve,reject){getInstalledChannelsPromise(store).then((function(){return external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchCollection({getParams:{token:params.token}}).then((function(remoteChannels){if(!params.token)return store.dispatch("manageContent/wizard/getAllRemoteChannels",remoteChannels).then((function(allChannels){return resolve(allChannels)}));resolve(remoteChannels)})).catch((function(){return reject({error:ContentWizardErrors.KOLIBRI_STUDIO_UNAVAILABLE})}))}))}))),transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.PEERIMPORT&&(selectedDrivePromise=Promise.resolve({}),availableChannelsPromise=getInstalledChannelsPromise(store).then((function(){return function(store,addressId){var channelList=store.state.manageContent.channelList;return new Promise((function(resolve,reject){external_kolibriCoreAppGlobal_resources_namespaceObject.NetworkLocationResource.fetchModel({id:addressId}).then((function(networkLocation){networkLocation.available?(store.commit("manageContent/wizard/SET_SELECTED_PEER",networkLocation),external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchCollection({getParams:{baseurl:networkLocation.base_url},force:!0}).then((function(remoteChannels){var availableChannels=remoteChannels.filter((function(_ref){return _ref.total_resources>0})).map((function(c){var installedChannel=find_default()(channelList,{id:c.id,available:!0})||{};return apiPeerImport_objectSpread(apiPeerImport_objectSpread({},c),{},{installed_version:installedChannel.version,latest_version:c.version})}));resolve(availableChannels)})).catch((function(){reject({error:ContentWizardErrors.NETWORK_LOCATION_DOES_NOT_HAVE_CHANNEL})}))):reject({error:ContentWizardErrors.NETWORK_LOCATION_UNAVAILABLE})})).catch((function(){reject({error:ContentWizardErrors.NETWORK_LOCATION_DOES_NOT_EXIST})}))}))}(store,params.address_id)})));var shouldResolve=external_kolibriCoreAppGlobal_utils_samePageCheckGenerator_default()(store);return Promise.all([availableChannelsPromise,selectedDrivePromise]).then((function(_ref){var _ref2=wizard_handlers_slicedToArray(_ref,2),availableChannels=_ref2[0],selectedDrive=_ref2[1];shouldResolve()&&(store.commit("manageContent/wizard/HYDRATE_SHOW_AVAILABLE_CHANNELS_PAGE",{availableChannels:availableChannels,selectedDrive:selectedDrive,transferType:transferType}),store.commit("CORE_SET_PAGE_LOADING",!1))}),(function(error){if(shouldResolve())return store.commit("CORE_SET_PAGE_LOADING",!1),handleError(store,error)}))}function showSelectContentPage(store,params){var transferredChannelPromise,availableSpacePromise,selectedDrivePromise=Promise.resolve({}),drive_id=params.drive_id,channel_id=params.channel_id,transferType=getTransferType(params);if(store.commit("manageContent/wizard/RESET_STATE"),store.commit("SET_PAGE_NAME",ContentWizardPages.SELECT_CONTENT),store.commit("CORE_SET_PAGE_LOADING",!0),null===transferType)return external_kolibriCoreAppGlobal_coreVue_router_default().replace(manageContentPageLink());var installedChannelPromise=getChannelWithContentSizes(params.channel_id).then((function(channel){store.commit("manageContent/REMOVE_FROM_CHANNEL_LIST",channel.id),store.commit("manageContent/ADD_TO_CHANNEL_LIST",channel)})).catch((function(error){error.response&&404===error.response.status&&handlers_logging.error('^^^ 404 (Not Found) error returned while requesting "'.concat(error.response.config.url,'..." is an expected response.'))}));return transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT&&(selectedDrivePromise=getSelectedDrive(store,drive_id),availableSpacePromise=getAvailableSpaceOnDrive(),transferredChannelPromise=new Promise((function(resolve,reject){selectedDrivePromise.then((function(drive){var match=find_default()(drive.metadata.channels,{id:channel_id});match?resolve(handlers_objectSpread({},match)):reject({error:ContentWizardErrors.CHANNEL_NOT_FOUND_ON_DRIVE})}))}))),transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.REMOTEIMPORT&&(availableSpacePromise=getAvailableSpaceOnDrive(),transferredChannelPromise=new Promise((function(resolve,reject){external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchModel({id:channel_id,force:!0}).then((function(channel){resolve(channel)}),(function(error){404===error.response.status?reject({error:ContentWizardErrors.CHANNEL_NOT_FOUND_ON_STUDIO}):reject({error:ContentWizardErrors.KOLIBRI_STUDIO_UNAVAILABLE})}))}))),transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.PEERIMPORT&&(availableSpacePromise=getAvailableSpaceOnDrive(),transferredChannelPromise=function(store,_ref2){var addressId=_ref2.addressId,channelId=_ref2.channelId;return new Promise((function(resolve,reject){external_kolibriCoreAppGlobal_resources_namespaceObject.NetworkLocationResource.fetchModel({id:addressId}).then((function(networkLocation){networkLocation.available?(store.commit("manageContent/wizard/SET_SELECTED_PEER",networkLocation),external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchModel({id:channelId,getParams:{baseurl:networkLocation.base_url},force:!0}).then((function(channel){resolve(channel)})).catch((function(){reject({error:ContentWizardErrors.NETWORK_LOCATION_DOES_NOT_HAVE_CHANNEL})}))):reject({error:ContentWizardErrors.NETWORK_LOCATION_UNAVAILABLE})})).catch((function(){reject({error:ContentWizardErrors.NETWORK_LOCATION_DOES_NOT_EXIST})}))}))}(store,{addressId:params.address_id,channelId:params.channel_id})),Promise.all([selectedDrivePromise,transferredChannelPromise,availableSpacePromise,installedChannelPromise]).then((function(_ref3){var _ref4=wizard_handlers_slicedToArray(_ref3,3),selectedDrive=_ref4[0],transferredChannel=_ref4[1],availableSpace=_ref4[2];return store.commit("manageContent/wizard/HYDRATE_SELECT_CONTENT_PAGE",{availableSpace:availableSpace,selectedDrive:selectedDrive,transferType:transferType,transferredChannel:transferredChannel}),loadChannelMetadata(store).then((function(){return updateTreeViewTopic(store,{id:store.state.manageContent.wizard.transferredChannel.root,title:transferredChannel.name}).then((function(){}))}))})).then((function(){store.commit("CORE_SET_PAGE_LOADING",!1)})).catch((function(error){return store.commit("CORE_SET_PAGE_LOADING",!1),handleError(store,error)}))}function updateTreeViewTopic(store,topic){var fetchArgs={};if(store.getters["manageContent/wizard/inLocalImportMode"]){var selectedDrive=store.state.manageContent.wizard.selectedDrive;fetchArgs.importing_from_drive_id=selectedDrive.id}if(store.getters["manageContent/wizard/inPeerImportMode"]){var selectedPeer=store.state.manageContent.wizard.selectedPeer;fetchArgs.importing_from_peer_id=selectedPeer.id}return external_kolibriCoreAppGlobal_resources_namespaceObject.ContentNodeGranularResource.fetchModel({id:topic.id,getParams:fetchArgs,force:!0}).then((function(contents){store.commit("manageContent/wizard/SET_CURRENT_TOPIC_NODE",contents),store.dispatch("manageContent/wizard/updatePathBreadcrumbs",topic)})).catch((function(){store.commit("manageContent/wizard/SET_WIZARD_STATUS",ContentWizardErrors.TREEVIEW_LOADING_ERROR)}))}var AvailableChannelsPagevue_type_template_id_148782aa_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{appBarTitle:_vm.toolbarTitle,route:_vm.backRoute}},[_c("KPageContainer",{staticClass:"device-container"},[_vm.status?_c("ContentWizardUiAlert",{attrs:{errorType:_vm.status}}):_vm._e(),""!==_vm.status||_vm.$store.state.core.loading?_c("KCircularLoader",{staticStyle:{margin:"2em auto"}}):_c("FilteredChannelListContainer",{attrs:{channels:_vm.allChannels,selectedChannels:_vm.selectedChannels,selectAllCheckbox:_vm.multipleMode},on:{"update:selectedChannels":function($event){_vm.selectedChannels=$event},"update:selected-channels":function($event){_vm.selectedChannels=$event}},scopedSlots:_vm._u([{key:"header",fn:function(){return[""===_vm.status?_c("h1",{attrs:{"data-test":"title"}},[_vm._v("\n          "+_vm._s(_vm.multipleMode?_vm.$tr("importChannelsHeader"):_vm.$tr("importResourcesHeader"))+"\n        ")]):_vm._e()]},proxy:!0},{key:"abovechannels",fn:function(){return[_c("p",[_vm.channelsAreAvailable?_c("KButton",{attrs:{appearance:"basic-link",text:_vm.multipleMode?_vm.$tr("selectTopicsAndResources"):_vm.$tr("selectEntireChannels")},on:{click:_vm.toggleMultipleMode}}):_vm._e()],1),_vm.showUnlistedChannels?_c("KButton",{attrs:{"data-test":"token-button",text:_vm.$tr("channelTokenButtonLabel"),appearance:"raised-button",name:"showtokenmodal"},on:{click:function($event){_vm.showTokenModal=!0}}}):_vm._e(),_vm.$route.query.token?_c("div",{staticClass:"token-chip",style:{backgroundColor:_vm.$themePalette.grey.v_300}},[_c("span",[_c("p",{staticClass:"token-chip-text"},[_vm._v(_vm._s(_vm.$route.query.token))]),_c("KIconButton",{staticClass:"token-chip-button",attrs:{icon:"delete",size:"mini"},on:{click:_vm.clearToken}})],1)]):_vm._e(),_c("p",[_c("UiAlert",{directives:[{name:"show",rawName:"v-show",value:_vm.notEnoughFreeSpace,expression:"notEnoughFreeSpace"}],attrs:{dismissible:!1,type:"error"}},[_vm._v("\n            "+_vm._s(_vm.deviceString("notEnoughSpaceForChannelsWarning"))+"\n          ")])],1)]},proxy:!0},{key:"default",fn:function(ref){var showItem=ref.showItem,handleChange=ref.handleChange,itemIsSelected=ref.itemIsSelected;return[_vm.channelsAreAvailable||_vm.status?_c("p",_vm._l(_vm.allChannels,(function(channel){return _c("ChannelPanel",{directives:[{name:"show",rawName:"v-show",value:showItem(channel)&&!_vm.channelIsBeingDeleted(channel.id),expression:"showItem(channel) && !channelIsBeingDeleted(channel.id)"}],key:channel.id,attrs:{channel:channel,onDevice:_vm.channelIsOnDevice(channel),multipleMode:_vm.multipleMode,checked:itemIsSelected(channel)},on:{clickselect:function($event){return _vm.goToSelectContentPageForChannel(channel)},checkboxchange:handleChange}})})),1):_c("p",[_vm._v("\n          "+_vm._s(_vm.$tr("noChannelsAvailable"))+"\n        ")])]}}],null,!1,708926228)}),_vm.showTokenModal?_c("ChannelTokenModal",{attrs:{disabled:_vm.disableModal},on:{cancel:function($event){_vm.showTokenModal=!1},submit:_vm.handleSubmitToken}}):_vm._e(),_vm.showUpdateModal?_c("ChannelUpdateModal",{attrs:{disabled:_vm.disableModal},on:{cancel:function($event){_vm.showUpdateModal=!1},submit:_vm.handleConfirmUpgrade}}):_vm._e(),_vm.channelsAreLoading?_c("KLinearLoader",{attrs:{type:"indeterminate",delay:!1}}):_vm._e(),_vm.multipleMode?_c("SelectionBottomBar",{attrs:{objectType:"channel",actionType:"import",disabled:_vm.disableBottomBar||0===_vm.selectedChannels.length||_vm.notEnoughFreeSpace,selectedObjects:_vm.selectedChannels,fileSize:_vm.fileSize},on:{"update:fileSize":function($event){_vm.fileSize=$event},"update:file-size":function($event){_vm.fileSize=$event},clickconfirm:_vm.handleClickConfirm}}):_vm._e()],1)],1)};AvailableChannelsPagevue_type_template_id_148782aa_scoped_true_render._withStripped=!0;var WithImportDetailsvue_type_template_id_9890e06c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"channel-list-item",class:{"channel-list-item-sm":_vm.windowIsSmall},style:[_vm.verticalPadding,{borderTop:"1px solid "+_vm.$themePalette.grey.v_200}]},[_c("ChannelDetails",{attrs:{channel:_vm.channel,channelVersion:_vm.versionNumber},scopedSlots:_vm._u([_vm.multipleMode?{key:"beforethumbnail",fn:function(){return[_c("KCheckbox",{staticClass:"checkbox",attrs:{label:_vm.channel.name,showLabel:!1,checked:_vm.$attrs.checked},on:{change:function($event){return _vm.$emit("checkboxchange",{channel:_vm.channel,isSelected:$event})}}})]},proxy:!0}:null,_vm.isUnlistedChannel?{key:"belowname",fn:function(){return[_c("KTooltip",{attrs:{reference:"lockicon",refs:_vm.$refs,placement:"top"}},[_vm._v("\n        "+_vm._s(_vm.deviceString("unlistedChannelLabel"))+"\n      ")]),_c("div",{staticClass:"private-icons"},[_c("KIcon",{ref:"lockicon",staticClass:"lock-icon",attrs:{icon:"unlistedchannel"}}),_vm.channel.newUnlistedChannel?_c("NewBadge",{staticClass:"new-label",attrs:{label:_vm.deviceString("newChannelLabel")}}):_vm._e()],1)]},proxy:!0}:null,{key:"abovedescription",fn:function(){return[_vm.newVersionAvailable?_c("div",[_c("KIcon",{staticClass:"update-icon",style:{fill:_vm.$themeTokens.primary},attrs:{icon:"error"}}),_vm._v("\n        "+_vm._s(_vm.$tr("newVersionMessage"))+"\n        "),_c("KRouterLink",{attrs:{to:_vm.newChannelVersionPageRoute,text:_vm.$tr("moreInformationLabel")}})],1):_vm._e(),_vm.onDevice?_c("div",{staticClass:"on-device"},[_c("KIcon",{staticClass:"check-icon",style:{fill:_vm.$themeTokens.success},attrs:{icon:"correct"}}),_c("span",{staticClass:"on-device-text"},[_vm._v(_vm._s(_vm.$tr("onYourDevice")))])],1):_vm._e()]},proxy:!0},{key:"append",fn:function(){return[_c("div",{staticClass:"col-3"},[_vm.multipleMode&&_vm.$attrs.checked?_c("p",{staticClass:"selected-msg"},[_vm._v("\n          "+_vm._s(_vm.channelSelectedMessage)+"\n        ")]):_vm._e(),_vm.multipleMode?_vm._e():_c("KRouterLink",{attrs:{text:_vm.$tr("selectResourcesAction"),to:_vm.selectContentLink,appearance:"raised-button"}})],1)]},proxy:!0}],null,!0)})],1)};function WithImportDetailsvue_type_script_lang_js_typeof(o){return WithImportDetailsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},WithImportDetailsvue_type_script_lang_js_typeof(o)}function WithImportDetailsvue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function WithImportDetailsvue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?WithImportDetailsvue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){WithImportDetailsvue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):WithImportDetailsvue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function WithImportDetailsvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=WithImportDetailsvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=WithImportDetailsvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==WithImportDetailsvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}WithImportDetailsvue_type_template_id_9890e06c_scoped_true_render._withStripped=!0;var _errorToTrStringMap,WithImportDetails=normalizeComponent({name:"WithImportDetails",components:{ChannelDetails:ChannelDetails,NewBadge:NewBadge},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default(),commonDeviceStrings],props:{channel:{type:Object,required:!0},onDevice:{type:Boolean,default:!1},multipleMode:{type:Boolean,default:!1}},computed:WithImportDetailsvue_type_script_lang_js_objectSpread(WithImportDetailsvue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent",["channelIsInstalled"])),{},{channelSelectedMessage:function(){return this.channel.total_file_size?this.$tr("channelSelectedWithFileSize",{bytesText:this.bytesForHumans(this.channel.total_file_size)}):this.$tr("channelSelectedNoFileSize")},isUnlistedChannel:function(){return!1===this.channel.public},versionNumber:function(){var installed=this.channelIsInstalled(this.channel.id);return installed?installed.version:this.channel.version},newVersionAvailable:function(){return this.versionNumber<this.channel.latest_version},newChannelVersionPageRoute:function(){return{name:PageNames.NEW_CHANNEL_VERSION_PAGE,params:{channel_id:this.channel.id},query:WithImportDetailsvue_type_script_lang_js_objectSpread(WithImportDetailsvue_type_script_lang_js_objectSpread({},this.$route.query),{},{last:PageNames.AVAILABLE_CHANNELS_PAGE})}},selectContentLink:function(){return selectContentPageLink({addressId:this.$route.query.address_id,channelId:this.channel.id,driveId:this.$route.query.drive_id})},verticalPadding:function(){return{paddingBottom:"".concat(this.windowGutter,"px"),paddingTop:"".concat(this.windowGutter,"px")}}}),methods:{bytesForHumans:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()},$trs:{onYourDevice:{message:"Resources on device",context:"Indicates that the learning resources are on the device being used at that moment."},selectResourcesAction:{message:"Select resources",context:"Button to select individual resources from a channel."},newVersionMessage:{message:"New version available",context:"Indicates there's a new version of the channel available."},moreInformationLabel:{message:"More information",context:"Link to find out more information about possible channel updates."},channelSelectedNoFileSize:{message:"Selected",context:"Indicates the channels selected for import."},channelSelectedWithFileSize:{message:"{bytesText} selected",context:"Indicated the size of the files selected. For example:\n\n'10 GB selected'"}}},WithImportDetailsvue_type_template_id_9890e06c_scoped_true_render,[],!1,null,"9890e06c",null).exports,ContentWizardUiAlertvue_type_template_id_87a60296_scoped_true_render=function(){var _h=this.$createElement;return(this._self._c||_h)("UiAlert",{attrs:{type:"error",dismissible:!1}},[this._v("\n  "+this._s(this.alertText)+"\n")])};function ContentWizardUiAlertvue_type_script_lang_js_typeof(o){return ContentWizardUiAlertvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ContentWizardUiAlertvue_type_script_lang_js_typeof(o)}function ContentWizardUiAlertvue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=ContentWizardUiAlertvue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ContentWizardUiAlertvue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ContentWizardUiAlertvue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}ContentWizardUiAlertvue_type_template_id_87a60296_scoped_true_render._withStripped=!0;var errorToTrStringMap=(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(_errorToTrStringMap={},ContentWizardErrors.CHANNEL_NOT_FOUND_ON_DRIVE,"channelNotFoundOnDriveError"),ContentWizardErrors.CHANNEL_NOT_FOUND_ON_SERVER,"channelNotFoundOnServerError"),ContentWizardErrors.CHANNEL_NOT_FOUND_ON_STUDIO,"channelNotFoundError"),ContentWizardErrors.DRIVE_IS_NOT_WRITEABLE,"driveNotWritableError"),ContentWizardErrors.DRIVE_NOT_FOUND,"driveUnavailableError"),ContentWizardErrors.DRIVE_ERROR,"driveError"),ContentWizardErrors.TRANSFER_IN_PROGRESS,"transferInProgressError"),ContentWizardErrors.TREEVIEW_LOADING_ERROR,"channelNotFoundError"),ContentWizardErrors.NETWORK_LOCATION_DOES_NOT_EXIST,"networkLocationDoesNotExist"),ContentWizardErrors.NETWORK_LOCATION_UNAVAILABLE,"networkLocationUnavailable"),ContentWizardUiAlertvue_type_script_lang_js_defineProperty(ContentWizardUiAlertvue_type_script_lang_js_defineProperty(_errorToTrStringMap,ContentWizardErrors.KOLIBRI_STUDIO_UNAVAILABLE,"kolibriStudioUnavailable"),ContentWizardErrors.NETWORK_LOCATION_DOES_NOT_HAVE_CHANNEL,"networkLocationDoesNotHaveChannel")),ContentWizardUiAlert=normalizeComponent({name:"ContentWizardUiAlert",components:{UiAlert:external_kolibriCoreAppGlobal_coreVue_components_UiAlert_default()},props:{errorType:{type:String,default:null}},computed:{alertText:function(){return this.$tr(errorToTrStringMap[this.errorType])||""}},$trs:{channelNotFoundError:{message:"Channel not found",context:"Error message that displays if a channel cannot be found."},channelNotFoundOnDriveError:{message:"Channel not found on drive",context:"Error message that displays if a channel cannot be found on an external disk drive.\n"},channelNotFoundOnServerError:{message:"Channel is not available to export from server",context:"Error message."},driveUnavailableError:{message:"Drive not found or is disconnected",context:"Error message."},driveNotWritableError:{message:"Drive is not writable",context:"Error message that displays if the drive being used is not capable of having new data written on it."},driveError:{message:"There was a problem accessing the drives connected to the server",context:"Error message."},networkLocationDoesNotExist:{message:"The device with this ID does not exist",context:"Error message.\n"},networkLocationUnavailable:{message:"The Kolibri server on the selected device is not available at the moment",context:"Error message.\n"},transferInProgressError:{message:"A transfer is currently in progress",context:"Error message.\n"},kolibriStudioUnavailable:{message:"Kolibri Studio is unavailable",context:"Error message."},networkLocationDoesNotHaveChannel:{message:"The device with this ID does not have the desired channel",context:"Error message.\n"}}},ContentWizardUiAlertvue_type_template_id_87a60296_scoped_true_render,[],!1,null,"87a60296",null).exports,ChannelTokenModalvue_type_template_id_41a06e8c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("enterChannelToken"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction"),submitDisabled:_vm.formIsDisabled||_vm.$attrs.disabled,cancelDisabled:_vm.formIsDisabled||_vm.$attrs.disabled},on:{submit:_vm.submitForm,cancel:function($event){return _vm.$emit("cancel")}}},[_c("p",[_vm._v(_vm._s(_vm.$tr("tokenExplanation")))]),_vm.tokenNetworkError?_c("UiAlert",{attrs:{dismissible:!1,type:"error"}},[_vm._v("\n    "+_vm._s(_vm.$tr("networkErrorMessage"))+"\n  ")]):_vm._e(),_c("KTextbox",{attrs:{label:_vm.$tr("channelTokenLabel"),invalid:!_vm.tokenIsValid,invalidText:_vm.$tr("invalidTokenMessage"),autofocus:"",disabled:_vm.formIsDisabled||_vm.$attrs.disabled,autocapitalize:"none"},on:{blur:function($event){_vm.tokenIsBlurred=!0}},model:{value:_vm.token,callback:function($$v){_vm.token="string"==typeof $$v?$$v.trim():$$v},expression:"token"}})],1)};ChannelTokenModalvue_type_template_id_41a06e8c_scoped_true_render._withStripped=!0;var ChannelTokenModal=normalizeComponent({name:"ChannelTokenModal",components:{UiAlert:external_kolibriCoreAppGlobal_coreVue_components_UiAlert_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],data:function(){return{formIsDisabled:!1,formIsSubmitted:!1,token:"",tokenIsBlurred:!1,tokenLookupFailed:!1,tokenNetworkError:!1}},computed:{tokenIsValid:function(){return!this.formIsSubmitted&&!this.tokenIsBlurred||!this.tokenLookupFailed&&""!==this.token}},methods:{submitForm:function(){var _this=this;return this.tokenLookupFailed=!1,this.formIsSubmitted=!0,this.tokenIsValid?(this.formIsDisabled=!0,this.lookupToken(this.token).then((function(channels){_this.$emit("submit",{token:_this.token,channels:channels})})).catch((function(error){404===error.response.status?_this.tokenLookupFailed=!0:_this.tokenNetworkError=!0})).then((function(){_this.formIsDisabled=!1}))):Promise.resolve()},lookupToken:function(token){return function(token){return external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchCollection({getParams:{token:token}})}(token)}},$trs:{channelTokenLabel:{message:"Channel token",context:"Each Kolibri channel has its own token in Kolibri Studio. Users can freely view and browse resources to import from the public channels in Kolibri, but in order to import resources from private or unlisted channels, the user will need the channel token from the resources curator who assembled it."},enterChannelToken:{message:"Enter channel token",context:"Prompt for entering the channel token."},invalidTokenMessage:{message:"Check whether you entered token correctly",context:"Message that displays if Kolibri detects an invalid channel token."},networkErrorMessage:{message:"Unable to connect to token",context:"Message that displays if Kolibri is unable to connect to a channel using a token because of a network error.\n"},tokenExplanation:{message:"Channel tokens unlock unlisted channels from Kolibri Studio",context:"Description of a channel token."}}},ChannelTokenModalvue_type_template_id_41a06e8c_scoped_true_render,[],!1,null,"41a06e8c",null).exports,ChannelUpdateModalvue_type_template_id_8c32029a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.$tr("title"),submitText:_vm.coreString("continueAction"),cancelText:_vm.coreString("cancelAction")},on:{submit:function($event){return _vm.$emit("submit")},cancel:function($event){return _vm.$emit("cancel")}}},[_c("p",[_vm._v(_vm._s(_vm.$tr("channelUpdateExplanation")))])])};ChannelUpdateModalvue_type_template_id_8c32029a_scoped_true_render._withStripped=!0;var ChannelUpdateModal_component=normalizeComponent({name:"ChannelUpdateModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],$trs:{title:{message:"Channel update",context:"Title of window that indicates some channels will be updated during the import process."},channelUpdateExplanation:{message:"Some channels you selected for import will be automatically updated to the latest version. Do you wish to continue?",context:"Description of channel update message."}}},ChannelUpdateModalvue_type_template_id_8c32029a_scoped_true_render,[],!1,null,"8c32029a",null);function AvailableChannelsPagevue_type_script_lang_js_typeof(o){return AvailableChannelsPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},AvailableChannelsPagevue_type_script_lang_js_typeof(o)}function AvailableChannelsPagevue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return AvailableChannelsPagevue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return AvailableChannelsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AvailableChannelsPagevue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AvailableChannelsPagevue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AvailableChannelsPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function AvailableChannelsPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?AvailableChannelsPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){AvailableChannelsPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AvailableChannelsPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function AvailableChannelsPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=AvailableChannelsPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=AvailableChannelsPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==AvailableChannelsPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var AvailableChannelsPage=normalizeComponent({name:"AvailableChannelsPage",metaInfo:function(){return{title:this.documentTitle}},components:{ChannelPanel:WithImportDetails,ChannelTokenModal:ChannelTokenModal,ChannelUpdateModal:ChannelUpdateModal_component.exports,ContentWizardUiAlert:ContentWizardUiAlert,FilteredChannelListContainer:FilteredChannelListContainer,ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default(),SelectionBottomBar:SelectionBottomBar,UiAlert:external_kolibriCoreAppGlobal_coreVue_components_UiAlert_default()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),commonDeviceStrings,external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default(),taskNotificationMixin],setup:function(){useContentTasks()},data:function(){return{showTokenModal:!1,showUpdateModal:!1,newUnlistedChannels:[],selectedChannels:[],fileSize:0,freeSpace:null,disableBottomBar:!1,disableModal:!1,remoteContentEnabled:plugin_data_src.isRemoteContent}},computed:AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent",["installedChannelsWithResources","channelIsBeingDeleted"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent/wizard",["inLocalImportMode","inRemoteImportMode","inPeerImportMode","isStudioApplication"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent/wizard",["availableChannels","selectedDrive","selectedPeer","status","transferType"])),{},{allChannels:function(){var _this=this,installedChannels=this.installedChannelsWithResources.map((function(channel){var match=find_default()(_this.availableChannels,{id:channel.id});if(match)return AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread({},channel),{},{installed_version:channel.version,latest_version:match.latest_version||match.version})})).filter(Boolean),notInstalledChannels=differenceBy_default()(this.availableChannels,this.installedChannelsWithResources,"id");return uniqBy_default()([].concat(AvailableChannelsPagevue_type_script_lang_js_toConsumableArray(this.newUnlistedChannels),AvailableChannelsPagevue_type_script_lang_js_toConsumableArray(installedChannels),AvailableChannelsPagevue_type_script_lang_js_toConsumableArray(notInstalledChannels)),"id")},backRoute:function(){return{name:PageNames.MANAGE_CONTENT_PAGE}},multipleMode:function(){var multiple=this.$route.query.multiple;return this.setupMode||!0===multiple||"true"===multiple},setupMode:function(){return Boolean(this.$route.query.setup)},documentTitle:function(){switch(this.transferType){case external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT:return this.$tr("documentTitleForLocalImport",{driveName:this.selectedDrive.name});case external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.REMOTEIMPORT:return this.$tr("documentTitleForRemoteImport");case external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.PEERIMPORT:return this.$tr("documentTitleForLocalImport",{driveName:this.selectedPeer.device_name});default:return""}},toolbarTitle:function(){switch(this.transferType){case external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT:return this.$tr("importFromDisk",{driveName:this.selectedDrive.name});case external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.PEERIMPORT:return this.$tr("importFromPeer",{deviceName:this.selectedPeer.device_name||this.selectedPeer.nickname,address:this.selectedPeer.base_url});default:return this.$tr("importFromKolibriStudio")}},channelsAreLoading:function(){return"LOADING_CHANNELS_FROM_KOLIBRI_STUDIO"===this.status},channelsAreAvailable:function(){return!this.channelsAreLoading&&this.availableChannels.length>0},showUnlistedChannels:function(){return this.channelsAreAvailable&&(this.inRemoteImportMode||this.isStudioApplication)},notEnoughFreeSpace:function(){return!this.remoteContentEnabled&&(null!==this.freeSpace&&(0===this.freeSpace||this.freeSpace<this.fileSize))}}),created:function(){this.setFreeSpace()},mounted:function(){this.setupMode&&(this.selectedChannels=AvailableChannelsPagevue_type_script_lang_js_toConsumableArray(this.allChannels))},methods:{channelIsOnDevice:function(channel){var match=this.installedChannelsWithResources.find((function(_ref){return _ref.id===channel.id}));return Boolean(match)},toggleMultipleMode:function(){var newQuery;return newQuery=this.multipleMode?omit_default()(this.$route.query,["multiple","setup"]):AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread({},this.$route.query),{},{multiple:!0}),this.$router.push({query:newQuery})},handleSubmitToken:function(_ref2){var token=_ref2.token,channels=_ref2.channels;this.showTokenModal=!1,channels.length>1?this.$route.query.token!==token&&this.$router.push(AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread({},this.$route),{},{query:AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread({},this.$route.query),{},{token:token})})):this.goToSelectContentPageForChannel(channels[0])},clearToken:function(){if(this.$route.query.token){var query=AvailableChannelsPagevue_type_script_lang_js_objectSpread({},this.$route.query);delete query.token,this.$router.push(AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread({},this.$route),{},{query:query}))}},goToSelectContentPageForChannel:function(channel){this.$router.push(selectContentPageLink({addressId:this.$route.query.address_id,channelId:channel.id,driveId:this.$route.query.drive_id}))},handleClickConfirm:function(){var _this2=this;this.disableBottomBar=!0;var someChannelsWillUpdate=some_default()(this.selectedChannels,(function(c){return c.installed_version<c.latest_version}));this.setFreeSpace().then((function(){_this2.notEnoughFreeSpace?(_this2.createTaskFailedSnackbar(),_this2.disableBottomBar=!1):someChannelsWillUpdate?_this2.showUpdateModal=!0:_this2.startMultipleChannelImport()}))},setFreeSpace:function(){var _this3=this;return getFreeSpaceOnServer().then((function(_ref3){var freeSpace=_ref3.freeSpace;_this3.freeSpace=freeSpace}))},handleConfirmUpgrade:function(){this.startMultipleChannelImport()},goToManageTasksPage:function(){this.$router.push({name:PageNames.MANAGE_TASKS})},startMultipleChannelImport:function(){var _this4=this,baseParams={type:this.inLocalImportMode?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKIMPORT:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTEIMPORT};this.inLocalImportMode?baseParams.drive_id=this.selectedDrive.id:this.inPeerImportMode&&(baseParams.peer=this.selectedPeer.id);var taskParams=this.selectedChannels.map((function(x){return AvailableChannelsPagevue_type_script_lang_js_objectSpread(AvailableChannelsPagevue_type_script_lang_js_objectSpread({},baseParams),{},{channel_name:x.name,channel_id:x.id})}));return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTasks(taskParams).then((function(tasks){_this4.notifyAndWatchTask(tasks),_this4.goToManageTasksPage()})).catch((function(){_this4.createTaskFailedSnackbar(),_this4.disableBottomBar=!1}))}},$trs:{importChannelsHeader:{message:"Select channels for import",context:"Title of the page where a user can select entire channels of resources to import."},importResourcesHeader:{message:"Select resources for import",context:"Title of the page where a user can select topics and resources to import, rather than entire channels.\n"},importFromDisk:{message:"Import from '{driveName}'",context:"Title page user sees when they opt to import resources from a local disk drive."},importFromPeer:{message:"Import from '{deviceName}' ({address})",context:"Page user sees when they opt to import resources from another device in the same local network through peer import."},importFromKolibriStudio:{message:"Import from Kolibri Studio",context:"Option to import resources from Kolibri Studio."},channelTokenButtonLabel:{message:"Import with token",context:"If a user needs to import learning resources from a private/unlisted channel, they would click on the 'Import with token' button above the channel list."},documentTitleForLocalImport:{message:"Available Channels on '{driveName}'",context:"Indicates the available resource channels on a device."},documentTitleForRemoteImport:{message:"Available Channels on Kolibri Studio",context:"Indicates the available resource channels on Kolibri Studio."},noChannelsAvailable:{message:"No channels are available on this device",context:"Message shows if there are no channels available on the device."},selectEntireChannels:{message:"Select entire channels instead",context:"Allow the user to select entire channels instead of individual topics/resources within a channel."},selectTopicsAndResources:{message:"Select folders and resources instead",context:"Option to allow the user to select individual folders/resources within a channel instead of importing entire channels."}}},AvailableChannelsPagevue_type_template_id_148782aa_scoped_true_render,[],!1,null,"148782aa",null).exports,SelectContentPagevue_type_template_id_7cba7a45_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{attrs:{icon:"back",appBarTitle:_vm.appBarTitle,route:_vm.backRoute}},[_c("KPageContainer",{staticClass:"device-container"},[_vm.wholePageError?_c("ContentWizardUiAlert",{attrs:{errorType:_vm.wholePageError}}):[_vm.onDeviceInfoIsReady?_vm._e():_c("TaskProgress"),_vm.onDeviceInfoIsReady?[_vm.transferredChannel&&_vm.onDeviceInfoIsReady?_c("section",{staticClass:"updates"},[_vm.newVersionAvailable?_c("NewChannelVersionBanner",{staticClass:"banner",attrs:{version:_vm.availableVersions.source},on:{click:_vm.handleClickViewNewVersion}}):_vm._e()],1):_vm._e(),_c("ChannelContentsSummary",{attrs:{channel:_vm.transferredChannel,channelOnDevice:_vm.channelOnDevice,freeSpace:_vm.availableSpace}}),""!==_vm.status?_c("UiAlert",{attrs:{type:"error",dismissible:!1}},[_vm._v("\n          "+_vm._s(_vm.$tr("problemFetchingChannel"))+"\n        ")]):_vm._e(),_vm.contentTransferError?_c("UiAlert",{attrs:{type:"error",dismissible:!1}},[_vm._v("\n          "+_vm._s(_vm.$tr("problemTransferringContents"))+"\n        ")]):_vm._e(),_c("UiAlert",{directives:[{name:"show",rawName:"v-show",value:_vm.isFileSpaceEnough,expression:"isFileSpaceEnough"}],attrs:{dismissible:!1,type:"error"}},[_vm._v("\n          "+_vm._s(_vm.deviceString("notEnoughSpaceForChannelsWarning"))+"\n        ")]),_vm.newVersionAvailable?_vm._e():_c("ContentTreeViewer",{staticClass:"block-item",class:{small:_vm.windowIsSmall},style:{borderBottomColor:_vm.$themeTokens.fineLine}})]:_vm._e()],_vm.newVersionAvailable?_vm._e():_c("SelectionBottomBar",{attrs:{objectType:"resource",actionType:"import",resourceCounts:{count:_vm.transferResourceCount,fileSize:_vm.transferFileSize},disabled:_vm.disableBottomBar||_vm.newVersionAvailable||_vm.isFileSpaceEnough},on:{clickconfirm:_vm.handleClickConfirm}})],2)],1)};SelectContentPagevue_type_template_id_7cba7a45_scoped_true_render._withStripped=!0;var TaskProgressvue_type_template_id_759592e7_scoped_true_render=function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("transition",{attrs:{name:"fade"}},[_c("div",{staticClass:"task-progress"},[_c("div",{staticClass:"dtc progress-bar"},[_c("div",{staticClass:"task-stage"},[this._v("\n        "+this._s(this.stageText)+"\n      ")]),_c("KLinearLoader",{attrs:{type:"indeterminate",delay:!0}})],1)])])};TaskProgressvue_type_template_id_759592e7_scoped_true_render._withStripped=!0;var TaskProgress=normalizeComponent({name:"TaskProgress",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],computed:{stageText:function(){return this.$tr("downloadingChannelContents")}},$trs:{downloadingChannelContents:{message:"Generating channel listing. This could take a few minutes",context:"Text in the task manager panel indicating that a channel listing is being created."}}},TaskProgressvue_type_template_id_759592e7_scoped_true_render,[],!1,null,"759592e7",null).exports,NewChannelVersionBannervue_type_template_id_d89e11ee_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("span",{staticClass:"version"},[_c("NewBadge",{staticClass:"new-label",attrs:{label:_vm.deviceString("newResourceLabel")}}),_c("span",{staticClass:"version-available"},[_vm._v("\n      "+_vm._s(_vm.$tr("versionAvailable",{version:_vm.version}))+"\n    ")])],1),_c("KButton",{attrs:{text:_vm.$tr("viewChangesAction"),appearance:"basic-link",primary:!1},on:{click:function($event){return _vm.$emit("click")}}})],1)};NewChannelVersionBannervue_type_template_id_d89e11ee_scoped_true_render._withStripped=!0;var NewChannelVersionBanner=normalizeComponent({name:"NewChannelVersionBanner",components:{NewBadge:NewBadge},mixins:[commonDeviceStrings],props:{version:{type:Number,required:!0}},$trs:{versionAvailable:{message:"Version {version} is available",context:"When a new version of the channel is available, this message alerts the user that they can update. "},viewChangesAction:{message:"View changes",context:"Option to view what changes have been made in Kolibri when a new version is available."}}},NewChannelVersionBannervue_type_template_id_d89e11ee_scoped_true_render,[],!1,null,"d89e11ee",null).exports,ChannelContentsSummaryvue_type_template_id_61bfdef5_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("section",[_c("div",{staticClass:"channel-header"},[_vm.channel.thumbnail?_c("img",{staticClass:"thumbnail",attrs:{src:_vm.channel.thumbnail}}):_vm._e(),_c("div",{staticClass:"channel-name"},[_c("KTooltip",{attrs:{reference:"lockicon",refs:_vm.$refs,placement:"right"}},[_vm._v("\n        "+_vm._s(_vm.$tr("unlistedChannelTooltip"))+"\n      ")]),_c("h1",[_c("KLabeledIcon",{attrs:{icon:"channel"},scopedSlots:_vm._u([{key:"iconAfter",fn:function(){return[!1===_vm.channel.public?_c("KIcon",{ref:"lockicon",attrs:{icon:"unlistedchannel"}}):_vm._e()]},proxy:!0}])},[_c("TextTruncatorCss",{attrs:{text:_vm.channel.name}})],1)],1)],1),_c("KFixedGrid",{attrs:{numCols:"4"}},[_c("KFixedGridItem",{staticClass:"version",attrs:{span:_vm.windowIsSmall?4:1}},[_c("p",{style:[_vm.windowIsSmall?{marginBottom:0}:{}]},[_vm._v("\n          "+_vm._s(_vm.$tr("version",{version:_vm.versionNumber}))+"\n        ")])]),_c("KFixedGridItem",{attrs:{span:_vm.windowIsSmall?4:3,alignment:_vm.windowIsSmall?"left":"right"}},[_c("p",[_vm._t("default")],2)])],1),_c("p",{attrs:{dir:"auto"}},[_vm._v("\n      "+_vm._s(_vm.channel.description)+"\n    ")])],1),_c("table",{staticClass:"channel-statistics"},[_c("tr",{staticClass:"headers"},[_c("th"),_c("th",[_vm._v(_vm._s(_vm.coreString("resourcesLabel")))]),_c("th",[_vm._v(_vm._s(_vm.$tr("sizeCol")))])]),_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$tr("totalSizeRow")))]),_c("td",[_vm._v(_vm._s(_vm.$formatNumber(_vm.channel.total_resources||0,{useGrouping:!0})))]),_c("td",[_vm._v(_vm._s(_vm.bytesForHumans(_vm.channel.total_file_size||0)))])]),_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$tr("onDeviceRow")))]),_c("td",[_vm._v(_vm._s(_vm.$formatNumber(_vm.channel.on_device_resources||0,{useGrouping:!0})))]),_c("td",[_vm._v(_vm._s(_vm.bytesForHumans(_vm.channel.on_device_file_size||0)))])]),null!==_vm.channel.new_resource_count?_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$tr("newOrUpdatedLabel")))]),_c("td",[_vm._v(_vm._s(_vm.$formatNumber(_vm.channel.new_resource_count||0,{useGrouping:!0})))]),_c("td",[_vm._v(_vm._s(_vm.bytesForHumans(_vm.channel.new_resource_total_size||0)))])]):_vm._e(),_vm.remoteContentEnabled||null===_vm.freeSpace?_vm._e():_c("tr",[_c("th",[_vm._v(_vm._s(_vm.$tr("freeDisk")))]),_c("td"),_c("td",[_vm._v(_vm._s(_vm.bytesForHumans(_vm.freeSpace||0)))])])])])};ChannelContentsSummaryvue_type_template_id_61bfdef5_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_TextTruncatorCss_namespaceObject=kolibriCoreAppGlobal.coreVue.components.TextTruncatorCss,ChannelContentsSummary=normalizeComponent({name:"ChannelContentsSummary",components:{TextTruncatorCss:__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_TextTruncatorCss_namespaceObject)()},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default()],props:{channel:{type:Object,required:!0},channelOnDevice:{type:Object,default:function(){return{}}},freeSpace:{type:Number,default:null}},computed:{versionNumber:function(){return this.channelOnDevice.available&&void 0!==this.channelOnDevice.version?this.channelOnDevice.version:this.channel.version},remoteContentEnabled:function(){return plugin_data_src.isRemoteContent}},methods:{bytesForHumans:external_kolibriCoreAppGlobal_utils_bytesForHumans_default()},$trs:{onDeviceRow:{message:"On your device",context:"Indicates resources that are on the user's device."},sizeCol:{message:"Size",context:"Refers to the weight or size (usually in MB or GB) that a resource takes up on a device."},totalSizeRow:{message:"Total size",context:"Refers to the total weight or size (usually in MB or GB) that resources takes up on a device.\n"},version:{message:"Version {version, number, integer}",context:"Indicates the channel version. This can be updated when new resources are made available in a channel."},unlistedChannelTooltip:{message:"Unlisted channel",context:"Tooltip to indicate a private channel which shows with the unlisted channel icon.\n\nSee also: https://kolibri.readthedocs.io/en/latest/manage/resources.html?#import-with-token"},newOrUpdatedLabel:{message:"New or updated",context:"Table header for the number and size of resources that will be added to a channel after upgrading"},freeDisk:{message:"Free disk space",context:"In the 'Advanced' section this indicates how much disk space is free on the Device."}}},ChannelContentsSummaryvue_type_template_id_61bfdef5_scoped_true_render,[],!1,null,"61bfdef5",null).exports,ContentTreeViewervue_type_template_id_46fb9367_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("section",{staticClass:"content-tree-viewer"},[_c("div",{staticClass:"breadcrumbs"},[_c("KBreadcrumbs",{attrs:{items:_vm.breadcrumbs,showSingleItem:!0}})],1),_vm.annotatedChildNodes.length>0?_c("div",{staticClass:"contents"},[_c("CoreTable",{scopedSlots:_vm._u([{key:"headers",fn:function(){return[_c("th",{staticClass:"core-table-checkbox-col select-all"},[_c("KCheckbox",{attrs:{label:_vm.$tr("selectAll"),checked:_vm.nodeIsChecked(_vm.annotatedTopicNode),disabled:_vm.disableSelectAll},on:{change:_vm.toggleSelectAll}})],1),_c("th"),_c("th")]},proxy:!0},{key:"tbody",fn:function(){return[_c("transition-group",{attrs:{tag:"tbody",name:"list"}},_vm._l(_vm.showableAnnotatedChildNodes,(function(cNode){return _c("ContentNodeRow",{key:cNode.id,attrs:{checked:_vm.nodeIsChecked(cNode),disabled:_vm.disabled||_vm.disableAll||cNode.disabled||cNode.updated_resource&&!cNode.available,indeterminate:_vm.nodeIsIndeterminate(cNode),message:cNode.message,node:cNode,getLinkObject:_vm.topicLinkObject},on:{changeselection:function($event){return _vm.toggleSelection(cNode)}}})})),1)]},proxy:!0}],null,!1,1282071564)})],1):_c("div",{staticClass:"no-contents"},[_vm._v("\n    "+_vm._s(_vm.$tr("topicHasNoContents"))+"\n  ")])])};ContentTreeViewervue_type_template_id_46fb9367_scoped_true_render._withStripped=!0;var every=__webpack_require__(850),every_default=__webpack_require__.n(every),flip=__webpack_require__(203),flip_default=__webpack_require__.n(flip),fp_sumBy=__webpack_require__(7019),fp_sumBy_default=__webpack_require__.n(fp_sumBy);function treeViewUtils_typeof(o){return treeViewUtils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},treeViewUtils_typeof(o)}function treeViewUtils_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function treeViewUtils_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?treeViewUtils_ownKeys(Object(t),!0).forEach((function(r){treeViewUtils_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):treeViewUtils_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function treeViewUtils_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=treeViewUtils_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=treeViewUtils_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==treeViewUtils_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var translator=(0,external_kolibriCoreAppGlobal_utils_i18n_namespaceObject.createTranslator)("TreeViewRowMessages",{alreadyOnYourDevice:{message:"Already on your device",context:"Indicates that a resource or channel is already on the device being used."},fractionOfResourcesOnDevice:{message:"{onDevice, number, useGrouping} of {total, number, useGrouping} resources on your device",context:"Indicates the number of resources on a device out of the total number. For example:\n\n'7 of 10 resources on your device'"},resourcesSelected:{message:"{total, number, useGrouping} {total, plural, one {resource} other {resources}} selected",context:"Indicates the number of resources selected. For example:\n\n'7 resources selected'"},fractionOfResourcesSelected:{message:"{selected, number, useGrouping} of {total, number, useGrouping} {total, plural, one {resource} other {resources}} selected",context:"Indicates the number of resources on a device that have been selected out of the total number. For example:\n\n'7 of 10 resources selected'"},noTitle:{message:"No title",context:"Displays if a resource has no title."},someResourcesSelected:{message:"Some resources selected",context:"Indicates that some resources from a specific topic have been selected."},someResourcesOnDevice:{message:"Some resources on this device",context:"Indicates that there are some resources on the device."},allResourcesSelected:{message:"All resources selected",context:"Indicates that all resources from a specific topic have been selected."},allResourcesOnDevice:{message:"All resources on this device",context:"Refers to a list of all the resources on a specific device."},resourceSelected:{message:"Resource selected",context:"Indicates that a resource has been selected for import."}}),CheckboxTypes={CHECKED:"checked",UNCHECKED:"unchecked",INDETERMINATE:"indeterminate"},isAncestorOf=function(a,b){return find_default()(b.path,{id:a.id})},isDescedantOf=flip_default()(isAncestorOf),sumTotalResources=fp_sumBy_default()("total_resources"),sumOnDeviceResources=fp_sumBy_default()("on_device_resources");function partiallySelectedNode(node){return treeViewUtils_objectSpread(treeViewUtils_objectSpread({},node),{},{message:translator.$tr("someResourcesSelected"),disabled:!1,checkboxType:CheckboxTypes.INDETERMINATE})}function fullySelectedNode(node){return treeViewUtils_objectSpread(treeViewUtils_objectSpread({},node),{},{message:node.is_leaf?translator.$tr("resourceSelected"):translator.$tr("allResourcesSelected"),disabled:!1,checkboxType:CheckboxTypes.CHECKED})}function unselectedNode(node){return treeViewUtils_objectSpread(treeViewUtils_objectSpread({},node),{},{message:"",disabled:!1,checkboxType:CheckboxTypes.UNCHECKED})}function annotateNode(node,selectedNodes){var forImport=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],on_device_resources=node.on_device_resources,total_resources=node.total_resources,isIncluded=find_default()(selectedNodes.included,{id:node.id}),isOmitted=find_default()(selectedNodes.omitted,{id:node.id}),ancestorIsIncluded=find_default()(selectedNodes.included,(function(iNode){return isAncestorOf(iNode,node)})),ancestorIsOmitted=find_default()(selectedNodes.omitted,(function(oNode){return isAncestorOf(oNode,node)})),nodeIsIncluded=isIncluded||ancestorIsIncluded;if(forImport&&on_device_resources===total_resources)return treeViewUtils_objectSpread(treeViewUtils_objectSpread({},fullySelectedNode(node)),{},{disabled:!0,message:translator.$tr("alreadyOnYourDevice")});var omittedDescendants=selectedNodes.omitted.filter((function(oNode){return isDescedantOf(oNode,node)}));if(!nodeIsIncluded&&omittedDescendants.length>0)return partiallySelectedNode(node);if(!isOmitted&&!ancestorIsOmitted&&nodeIsIncluded){if(omittedDescendants.length>0){return(forImport?(sumTotalResources(omittedDescendants)||0)-(sumOnDeviceResources(omittedDescendants)||0)==total_resources-on_device_resources:(sumOnDeviceResources(omittedDescendants)||0)===on_device_resources)?unselectedNode(node):partiallySelectedNode(node)}return fullySelectedNode(node)}var fullyIncludedDescendants=selectedNodes.included.filter((function(iNode){return isDescedantOf(iNode,node)})).filter((function(iNode){return!selectedNodes.omitted.find((function(oNode){return isDescedantOf(oNode,iNode)}))}));if(fullyIncludedDescendants.length>0){var fullyTotal=sumTotalResources(fullyIncludedDescendants),fullyOnDevice=sumOnDeviceResources(fullyIncludedDescendants);return forImport?fullyTotal-fullyOnDevice==total_resources-on_device_resources?fullySelectedNode(node):partiallySelectedNode(node):fullyOnDevice===on_device_resources?fullySelectedNode(node):partiallySelectedNode(node)}return forImport&&on_device_resources>0?treeViewUtils_objectSpread(treeViewUtils_objectSpread({},unselectedNode(node)),{},{message:translator.$tr("fractionOfResourcesOnDevice",{onDevice:on_device_resources,total:total_resources})}):unselectedNode(node)}var ContentNodeRowvue_type_template_id_77164a1c_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("tr",[_c("td",{staticClass:"core-table-checkbox-col"},[_c("KCheckbox",{attrs:{label:_vm.node.title,showLabel:!1,checked:_vm.checked,indeterminate:_vm.indeterminate,disabled:_vm.disabled},on:{change:function($event){return _vm.$emit("changeselection",_vm.node)}}})],1),_c("td",{staticClass:"title"},[_c("KLabeledIcon",{scopedSlots:_vm._u([{key:"icon",fn:function(){return[_c("ContentIcon",{attrs:{kind:_vm.node.kind}})]},proxy:!0}])},[_vm.isTopic?_c("KRouterLink",{attrs:{name:"select-node",text:_vm.node.title,to:_vm.getLinkObject(_vm.node)}}):_c("span",{attrs:{dir:"auto"}},[_vm._v("\n        "+_vm._s(_vm.node.title)+"\n      ")]),_c("CoachContentLabel",{staticClass:"coach-content-label",attrs:{value:_vm.node.num_coach_contents,isTopic:_vm.isTopic}})],1)],1),_c("td",{staticClass:"message"},[_vm.message&&!_vm.importing?[_vm._v("\n      "+_vm._s(_vm.message)+"\n    ")]:_vm._e(),_vm.node.num_new_resources||_vm.importing?_c("ChannelUpdateAnnotations",{staticClass:"update-label",attrs:{isTopic:_vm.isTopic,newResources:_vm.node.num_new_resources,importing:_vm.importing}}):_vm._e()],2)])};ContentNodeRowvue_type_template_id_77164a1c_scoped_true_render._withStripped=!0;var external_kolibriCoreAppGlobal_coreVue_components_ContentIcon_namespaceObject=kolibriCoreAppGlobal.coreVue.components.ContentIcon,external_kolibriCoreAppGlobal_coreVue_components_ContentIcon_default=__webpack_require__.n(external_kolibriCoreAppGlobal_coreVue_components_ContentIcon_namespaceObject),ChannelUpdateAnnotationsvue_type_template_id_5d9b245e_scoped_true_render=function(){var _h=this.$createElement;return(this._self._c||_h)("span",{class:this.styleClass,style:this.style},[this._v("\n  "+this._s(this.label)+"\n")])};ChannelUpdateAnnotationsvue_type_template_id_5d9b245e_scoped_true_render._withStripped=!0;var ChannelUpdateAnnotations=normalizeComponent({name:"ChannelUpdateAnnotations",mixins:[commonDeviceStrings],props:{newResources:{type:Number,default:0},isTopic:{type:Boolean,default:!1},importing:{type:Boolean,default:!1}},computed:{new:function(){return this.newResources>0},styleClass:function(){return this.new?["new-label"]:[]},style:function(){return this.new?{color:this.$themeTokens.textInverted,backgroundColor:this.$themeTokens.success}:{}},label:function(){return this.new&&!1===this.isTopic?this.deviceString("newResourceLabel"):this.new&&!0===this.isTopic?this.$tr("newResourcesInTopic",{count:this.newResources}):this.importing?this.$tr("inQueueForImport"):""}},$trs:{newResourcesInTopic:{message:"{count} {count, plural, one {new} other {new}}",context:"Refers to 'resources'; will appear as a label displayed on topics with new resources that were added after upgrading the channel"},inQueueForImport:{message:"In queue for import",context:"Label that is with resources that are not selectable for import since they are being re-downloaded after upgrading the channel"}}},ChannelUpdateAnnotationsvue_type_template_id_5d9b245e_scoped_true_render,[],!1,null,"5d9b245e",null).exports,ContentNodeRow_component=normalizeComponent({name:"ContentNodeRow",components:{CoachContentLabel:external_kolibriCoreAppGlobal_coreVue_components_CoachContentLabel_default(),ContentIcon:external_kolibriCoreAppGlobal_coreVue_components_ContentIcon_default(),ChannelUpdateAnnotations:ChannelUpdateAnnotations},props:{node:{type:Object,required:!0},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},message:{type:String,required:!0},getLinkObject:{type:Function,required:!0}},computed:{isTopic:function(){return this.node.kind===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.ContentNodeKinds.TOPIC},importing:function(){return this.node.updated_resource&&!this.node.available}}},ContentNodeRowvue_type_template_id_77164a1c_scoped_true_render,[],!1,null,"77164a1c",null);function ContentTreeViewervue_type_script_lang_js_typeof(o){return ContentTreeViewervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ContentTreeViewervue_type_script_lang_js_typeof(o)}function ContentTreeViewervue_type_script_lang_js_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return ContentTreeViewervue_type_script_lang_js_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return ContentTreeViewervue_type_script_lang_js_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ContentTreeViewervue_type_script_lang_js_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ContentTreeViewervue_type_script_lang_js_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ContentTreeViewervue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ContentTreeViewervue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ContentTreeViewervue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){ContentTreeViewervue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ContentTreeViewervue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ContentTreeViewervue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=ContentTreeViewervue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ContentTreeViewervue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ContentTreeViewervue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function sanitizeNode(node){return omit_default()(node,["message","checkboxType","disabled","children"])}var ContentTreeViewer=normalizeComponent({name:"ContentTreeViewer",components:{ContentNodeRow:ContentNodeRow_component.exports,CoreTable:external_kolibriCoreAppGlobal_coreVue_components_CoreTable_default()},props:{node:{type:Object,default:null},manageMode:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{disableAll:!1}},computed:ContentTreeViewervue_type_script_lang_js_objectSpread(ContentTreeViewervue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent/wizard",["nodesForTransfer"])),{},{currentTopicNode:function(){return this.node?this.node:this.$store.state.manageContent.wizard.currentTopicNode},transferType:function(){return this.manageMode?external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALEXPORT:this.$store.state.manageContent.wizard.transferType},path:function(){return this.manageMode?[].concat(ContentTreeViewervue_type_script_lang_js_toConsumableArray(this.node.ancestors),[this.node]):this.$store.state.manageContent.wizard.path},breadcrumbs:function(){var _this=this;return this.manageMode?this.path.map((function(x){var query={};x.id!==_this.$route.params.channel_id&&(query.node=x.id);return{text:x.title,link:{query:query,params:{scrollTo:".content-tree-viewer"}}}})):this.path.map((function(x){return node=x,_ref=_this.$route,query=_ref.query,params=_ref.params,{text:node.title||translator.$tr("noTitle"),link:selectContentTopicLink(node,query,params.channel_id)};var node,_ref,query,params}))},childNodes:function(){return this.currentTopicNode.children||[]},noSelectableNodes:function(){return this.transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT&&every_default()(this.annotatedChildNodes,(function(node){return node.kind!==external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.ContentNodeKinds.TOPIC&&(!node.importable||node.on_device_resources>0)}))},disableSelectAll:function(){return this.disabled||this.disableAll||this.annotatedTopicNode.disabled||this.noSelectableNodes},childNodesWithPath:function(){var _this2=this;return this.childNodes.map((function(node){return ContentTreeViewervue_type_script_lang_js_objectSpread(ContentTreeViewervue_type_script_lang_js_objectSpread({},node),{},{path:[].concat(ContentTreeViewervue_type_script_lang_js_toConsumableArray(_this2.path),[{id:node.id,title:node.title}])})}))},annotatedChildNodes:function(){var _this3=this;return this.childNodesWithPath.map((function(n){return annotateNode(n,_this3.nodesForTransfer,!_this3.manageMode)}))},showableAnnotatedChildNodes:function(){return this.annotatedChildNodes.filter(this.showNode)},annotatedTopicNode:function(){var selections={included:[].concat(ContentTreeViewervue_type_script_lang_js_toConsumableArray(this.nodesForTransfer.included),ContentTreeViewervue_type_script_lang_js_toConsumableArray(this.annotatedChildNodes.filter((function(n){return n.disabled})))),omitted:ContentTreeViewervue_type_script_lang_js_toConsumableArray(this.nodesForTransfer.omitted)};return annotateNode(ContentTreeViewervue_type_script_lang_js_objectSpread(ContentTreeViewervue_type_script_lang_js_objectSpread({},this.currentTopicNode),{},{path:ContentTreeViewervue_type_script_lang_js_toConsumableArray(this.path)}),selections,!this.manageMode)}}),methods:ContentTreeViewervue_type_script_lang_js_objectSpread(ContentTreeViewervue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)("manageContent/wizard",["addNodeForTransfer","removeNodeForTransfer"])),{},{nodeIsChecked:function(node){return node.checkboxType===CheckboxTypes.CHECKED},nodeIsIndeterminate:function(node){return node.checkboxType===CheckboxTypes.INDETERMINATE},nodeCompletesParent:function(node){var _this4=this,siblings=this.annotatedChildNodes.filter((function(_ref){return _ref.id!==node.id}));return every_default()(siblings,(function(node){return _this4.nodeIsChecked(node)||node.disabled}))},showNode:function(node){return this.transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALEXPORT?node.available:node.importable&&node.total_resources},toggleSelectAll:function(){this.toggleSelection(this.annotatedTopicNode)},toggleSelection:function(node){var _this5=this;return this.disableAll=!0,(this.nodeIsChecked(node)?this.removeNodeForTransfer(sanitizeNode(node)):this.nodeCompletesParent(node)?this.addNodeForTransfer(sanitizeNode(this.annotatedTopicNode)):this.addNodeForTransfer(sanitizeNode(node))).then((function(){_this5.disableAll=!1,_this5.$forceUpdate()}))},topicLinkObject:function(node){return this.manageMode?{query:{node:node.id},params:{scrollTo:".content-tree-viewer"}}:selectContentTopicLink(node,this.$route.query,this.$route.params.channel_id)}}),$trs:{selectAll:{message:"Select all",context:"Channel picker."},topicHasNoContents:{message:"This folder has no subfolders or resources",context:"Message displays if a folder is empty."}}},ContentTreeViewervue_type_template_id_46fb9367_scoped_true_render,[],!1,null,"46fb9367",null).exports;function SelectContentPagevue_type_script_lang_js_typeof(o){return SelectContentPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},SelectContentPagevue_type_script_lang_js_typeof(o)}function SelectContentPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function SelectContentPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SelectContentPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){SelectContentPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SelectContentPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function SelectContentPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=SelectContentPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=SelectContentPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==SelectContentPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var SelectContentPage=normalizeComponent({name:"SelectContentPage",metaInfo:function(){return{title:this.$tr("selectContent",{channelName:this.transferredChannel.name})}},components:{ChannelContentsSummary:ChannelContentsSummary,ContentTreeViewer:ContentTreeViewer,ContentWizardUiAlert:ContentWizardUiAlert,NewChannelVersionBanner:NewChannelVersionBanner,ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default(),SelectionBottomBar:SelectionBottomBar,TaskProgress:TaskProgress,UiAlert:external_kolibriCoreAppGlobal_coreVue_components_UiAlert_default()},mixins:[commonDeviceStrings,external_kolibriCoreAppGlobal_coreVue_mixins_responsiveWindowMixin_default(),taskNotificationMixin],setup:function(){useContentTasks()},data:function(){return{contentTransferError:!1,metadataDownloadTaskId:"",disableBottomBar:!1}},computed:SelectContentPagevue_type_script_lang_js_objectSpread(SelectContentPagevue_type_script_lang_js_objectSpread(SelectContentPagevue_type_script_lang_js_objectSpread(SelectContentPagevue_type_script_lang_js_objectSpread(SelectContentPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent",["channelIsOnDevice"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent",["taskList"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapGetters)("manageContent/wizard",["inLocalImportMode","inPeerImportMode","inRemoteImportMode"])),(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapState)("manageContent/wizard",["currentTopicNode","selectedDrive","selectedPeer","status","transferredChannel","transferFileSize","transferResourceCount","availableSpace"])),{},{appBarTitle:function(){var title;return this.wholePageError?title=this.$tr("pageLoadError"):this.inRemoteImportMode?title=this.$route.query.last===PageNames.MANAGE_CHANNEL?this.transferredChannel.name:this.$tr("kolibriStudioLabel"):this.inPeerImportMode?title=this.$tr("importingFromPeer",{deviceName:this.selectedPeer.device_name,url:this.selectedPeer.base_url}):this.inLocalImportMode&&(title=this.$tr("importingFromDrive",{driveName:this.selectedDrive.name})),title},backRoute:function(){return this.inRemoteImportMode?availableChannelsPageLink():this.inPeerImportMode?availableChannelsPageLink({addressId:this.selectedPeer.id}):this.inLocalImportMode?availableChannelsPageLink({driveId:this.selectedDrive.id}):availableChannelsPageLink()},channelId:function(){return this.$route.params.channel_id},onDeviceInfoIsReady:function(){return!isEmpty_default()(this.currentTopicNode)},metadataDownloadTask:function(){var _this=this;return find_default()(this.taskList,(function(_ref){var type=_ref.type;return _ref.channel_id===_this.channelId&&(type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTECHANNELIMPORT||type===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCHANNELIMPORT)}))},wholePageError:function(){if(Object.values(ContentWizardErrors).includes(this.status))return this.status},channelOnDevice:function(){return this.channelIsOnDevice(this.transferredChannel.id)||{}},availableVersions:function(){return{source:this.transferredChannel.version,installed:this.channelOnDevice.version}},newVersionAvailable:function(){return this.availableVersions.source>this.availableVersions.installed},isFileSpaceEnough:function(){return!plugin_data_src.isRemoteContent&&this.transferFileSize>this.availableSpace}}),watch:{metadataDownloadTask:{handler:function(val){val?(this.metadataDownloadTaskId=val.id,val.clearable&&external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clear(val.id)):this.metadataDownloadTaskId=""},immediate:!0}},beforeRouteLeave:function(to,from,next){this.cancelMetadataDownloadTask(),this.$store.commit("manageContent/wizard/RESET_NODE_LISTS"),next()},methods:SelectContentPagevue_type_script_lang_js_objectSpread(SelectContentPagevue_type_script_lang_js_objectSpread({},(0,external_kolibriCoreAppGlobal_lib_vuex_namespaceObject.mapActions)("manageContent",["cancelTask"])),{},{cancelMetadataDownloadTask:function(){return this.metadataDownloadTaskId?this.cancelTask(this.metadataDownloadTaskId):Promise.resolve()},handleClickConfirm:function(){var importSource,_this2=this;if(this.inRemoteImportMode)importSource={type:"studio"};else if(this.inPeerImportMode){if(!this.selectedPeer.base_url)throw Error("Peer URL is not provided");importSource={type:"peer",id:this.selectedPeer.id}}else{if(!this.inLocalImportMode)throw Error("Import source is not provided");if(!this.selectedDrive.id)throw Error("Drive ID is not provided");importSource={type:"drive",driveId:this.selectedDrive.id}}var nodesForTransfer=this.$store.state.manageContent.wizard.nodesForTransfer;this.disableBottomBar=!0,this.startImportTask({importSource:importSource,channelId:this.channelId,channelName:this.transferredChannel.name,included:nodesForTransfer.included.map((function(x){return x.id})),excluded:nodesForTransfer.omitted.map((function(x){return x.id})),fileSize:this.transferFileSize,totalResources:this.transferResources}).then((function(task){_this2.disableBottomBar=!1,_this2.notifyAndWatchTask(task)})).catch((function(){_this2.disableBottomBar=!1,_this2.createTaskFailedSnackbar()}))},startImportTask:function(params){var importSource=params.importSource,taskParams={channel_id:params.channelId,channel_name:params.channelName,node_ids:params.included,exclude_node_ids:params.excluded};if("peer"===importSource.type||"studio"===importSource.type)importSource.id&&(taskParams.peer=importSource.id),taskParams.type=external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTECONTENTIMPORT;else{if("drive"!==importSource.type)return Promise.reject();taskParams.drive_id=importSource.driveId,taskParams.type=external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCONTENTIMPORT}return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask(taskParams)},handleClickViewNewVersion:function(){this.$router.push({name:PageNames.NEW_CHANNEL_VERSION_PAGE,query:SelectContentPagevue_type_script_lang_js_objectSpread(SelectContentPagevue_type_script_lang_js_objectSpread({},this.$route.query),{},{last:PageNames.SELECT_CONTENT})})},onWatchedTaskFinished:function(){var _this3=this;updateTreeViewTopic(this.$store,this.currentTopicNode),this.$store.commit("manageContent/wizard/RESET_NODE_LISTS"),getChannelWithContentSizes(this.channelId).then((function(channel){_this3.$store.commit("manageContent/wizard/UPDATE_TRANSFERRED_CHANNEL",{on_device_file_size:channel.on_device_file_size,on_device_resources:channel.on_device_resources})}))}}),$trs:{pageLoadError:{message:"There was a problem loading this page",context:"Generic load error which may display if there is a problem retrieving channels."},problemFetchingChannel:{message:"There was a problem getting the resources of this channel",context:"Error during channel import."},problemTransferringContents:{message:"There was a problem transferring the selected resources",context:"Error during channel import."},selectContent:{message:"Select resources from '{channelName}'",context:"Refers to selecting learning resources from a specified channel."},kolibriStudioLabel:{message:"Kolibri Studio",context:"Refers to importing channels from Kolibri Studio. Kolibri Studio is the tool used to organize learning resources and build channels for Kolibri. See also https://kolibri-studio.readthedocs.io/en/latest/index.html"},importingFromDrive:{message:"Importing from drive '{driveName}'",context:"Indicates the name of the drive that the user is importing channels from."},importingFromPeer:{message:"Importing from '{deviceName}' ({url})",context:"Indicates the name of the device that the user is importing channels from."}}},SelectContentPagevue_type_template_id_7cba7a45_scoped_true_render,[],!1,null,"7cba7a45",null).exports,ManageChannelContentsPagevue_type_template_id_ba915b20_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ImmersivePage",{staticClass:"manage-channel-page",attrs:{appBarTitle:_vm.appBarTitle,route:_vm.backRoute}},[_c("KPageContainer",{staticClass:"device-container"},[_vm.channel?_vm._e():_c("TaskProgress"),_vm.channel?[_c("ChannelContentsSummary",{attrs:{channel:_vm.channel}},[_vm.availableVersions.studioLatest>_vm.availableVersions.installed?_c("NewChannelVersionBanner",{staticClass:"banner",attrs:{version:_vm.availableVersions.studioLatest},on:{click:_vm.handleClickViewNewVersion}}):_vm._e()],1),_c("div",{staticStyle:{"text-align":"right"}},[_c("KButton",{attrs:{text:_vm.$tr("importMoreAction")},on:{click:function($event){_vm.shownModal="IMPORT_MORE"}}})],1),_c("transition",{attrs:{mode:"out-in"}},[_vm.currentNode?_c("ContentTreeViewer",{style:{borderBottomColor:_vm.$themeTokens.fineLine},attrs:{node:_vm.currentNode,manageMode:!0}}):_c("KLinearLoader",{attrs:{delay:!1}})],1)]:_vm._e(),"DELETE"===_vm.shownModal?_c("DeleteResourcesModal",{attrs:{numberOfResources:_vm.resourceCounts.count},on:{cancel:_vm.closeModal,submit:_vm.handleDeleteSubmit}}):_vm._e(),"EXPORT"===_vm.shownModal?_c("SelectDriveModal",{attrs:{manageMode:!0,exportFileSize:_vm.resourceCounts.fileSize},on:{cancel:_vm.closeModal,submit:_vm.handleExportSubmit}}):_vm._e(),"IMPORT_MORE"===_vm.shownModal?_c("SelectTransferSourceModal",{attrs:{manageMode:!0,pageName:_vm.selectSourcePageName},on:{"update:pageName":function($event){_vm.selectSourcePageName=$event},"update:page-name":function($event){_vm.selectSourcePageName=$event},cancel:_vm.closeModal,submit:_vm.handleSelectImportMoreSource}}):_vm._e(),_c("SelectionBottomBar",{attrs:{objectType:"resource",actionType:"manage",resourceCounts:_vm.resourceCounts,disabled:!Boolean(_vm.currentNode)||_vm.bottomBarDisabled},on:{selectoption:function($event){_vm.shownModal=$event}}})],2)],1)};ManageChannelContentsPagevue_type_template_id_ba915b20_scoped_true_render._withStripped=!0;var last=__webpack_require__(2236),last_default=__webpack_require__.n(last),DeleteResourcesModalvue_type_template_id_4c5b0d5a_scoped_true_render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("KModal",{attrs:{title:_vm.title,submitText:_vm.coreString("deleteAction"),cancelText:_vm.coreString("cancelAction")},on:{submit:function($event){return _vm.$emit("submit",{deleteEverywhere:_vm.deleteEverywhere})},cancel:function($event){return _vm.$emit("cancel")}}},[_c("div",[1===_vm.numberOfResources?[_c("p",[_vm._v(_vm._s(_vm.$tr("confirmationQuestionOneResource")))]),_c("p",[_vm._v(_vm._s(_vm.$tr("deleteEverywhereExplanationOneResource")))])]:[_c("p",[_vm._v(_vm._s(_vm.$tr("confirmationQuestionMultipleResources")))]),_c("p",[_vm._v(_vm._s(_vm.$tr("deleteEverywhereExplanationMultipleResources")))])],_c("KCheckbox",{attrs:{label:_vm.$tr("deleteEverywhereLabel")},on:{change:function($event){_vm.deleteEverywhere=$event}},model:{value:_vm.deleteEverywhere,callback:function($$v){_vm.deleteEverywhere=$$v},expression:"deleteEverywhere"}}),_c("p",[_vm._v(_vm._s(_vm.coreString("cannotUndoActionWarning")))])],2)])};function api_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return ManageChannelContentsPage_api_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ManageChannelContentsPage_api_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ManageChannelContentsPage_api_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ManageChannelContentsPagevue_type_script_lang_js_typeof(o){return ManageChannelContentsPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ManageChannelContentsPagevue_type_script_lang_js_typeof(o)}function ManageChannelContentsPagevue_type_script_lang_js_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ManageChannelContentsPagevue_type_script_lang_js_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ManageChannelContentsPagevue_type_script_lang_js_ownKeys(Object(t),!0).forEach((function(r){ManageChannelContentsPagevue_type_script_lang_js_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ManageChannelContentsPagevue_type_script_lang_js_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ManageChannelContentsPagevue_type_script_lang_js_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=ManageChannelContentsPagevue_type_script_lang_js_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ManageChannelContentsPagevue_type_script_lang_js_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ManageChannelContentsPagevue_type_script_lang_js_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}DeleteResourcesModalvue_type_template_id_4c5b0d5a_scoped_true_render._withStripped=!0;var ManageChannelContentsPagevue_type_script_lang_js={name:"ManageChannelContentsPage",metaInfo:function(){return this.channel?{title:this.appBarTitle}:{}},components:{ChannelContentsSummary:ChannelContentsSummary,ContentTreeViewer:ContentTreeViewer,DeleteResourcesModal:normalizeComponent({name:"DeleteResourcesModal",mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default()],props:{numberOfResources:{type:Number,required:!0}},data:function(){return{deleteEverywhere:!1}},computed:{title:function(){return 1===this.numberOfResources?this.$tr("titleSingleResource"):this.$tr("titleMultipleResources")}},$trs:{titleMultipleResources:{message:"Delete resources",context:"Title of window that displays when user deletes multiple learning resources from a channel."},titleSingleResource:{message:"Delete resource",context:"Title of window that displays when user deletes a single learning resource from a channel."},confirmationQuestionOneResource:{message:"Are you sure you want to delete this resource from your device?",context:"Confirmation of single resource deletion."},confirmationQuestionMultipleResources:{message:"Are you sure you want to delete these resources from your device?",context:"Confirmation of multiple resource deletion."},deleteEverywhereLabel:{message:"Also delete any copies found in other locations and channels",context:"When some of the resources the admin selected are present in multiple channels, Kolibri will provide an option for the admin to delete all instances "},deleteEverywhereExplanationOneResource:{message:"Some copies of this resource may be in other locations on your device",context:"When some of the resources admin selected are present in multiple channels, Kolibri will provide an option for the admin to delete all instances "},deleteEverywhereExplanationMultipleResources:{message:"Some copies of these resources may be in other locations on your device",context:"When some of the resources the admin selected are present in multiple channels, Kolibri will provide an option for the admin to delete all instances "}}},DeleteResourcesModalvue_type_template_id_4c5b0d5a_scoped_true_render,[],!1,null,"4c5b0d5a",null).exports,NewChannelVersionBanner:NewChannelVersionBanner,ImmersivePage:external_kolibriCoreAppGlobal_coreVue_components_ImmersivePage_default(),SelectDriveModal:SelectDriveModal,SelectionBottomBar:SelectionBottomBar,SelectTransferSourceModal:SelectTransferSourceModal,TaskProgress:TaskProgress},mixins:[external_kolibriCoreAppGlobal_coreVue_mixins_commonCoreStrings_default(),taskNotificationMixin],setup:function(){useContentTasks()},data:function(){return{channel:null,currentNodeId:null,freeSpace:null,shownModal:null,nodeCache:{},studioChannel:null,selectSourcePageName:null,bottomBarDisabled:!1,watchedTaskType:null}},computed:{backRoute:function(){return{name:PageNames.MANAGE_CONTENT_PAGE}},channelId:function(){return this.$route.params.channel_id},selections:function(){var nodes=this.$store.state.manageContent.wizard.nodesForTransfer;return{included:nodes.included.map((function(x){return x.id})),excluded:nodes.omitted.map((function(x){return x.id}))}},appBarTitle:function(){return this.channel?this.$tr("appBarTitle",{channelName:this.channel.name}):""},availableVersions:function(){return{studioLatest:get_default()(this.studioChannel,"version",-1/0),installed:get_default()(this.channel,"version")}},currentNode:function(){return this.nodeCache[this.currentNodeId]},resourceCounts:function(){var _this$$store$state$ma=this.$store.state.manageContent.wizard;return{count:_this$$store$state$ma.transferResourceCount,fileSize:_this$$store$state$ma.transferFileSize}}},watch:{"$route.query.node":{handler:function(newVal){this.updateNode(newVal)},deep:!0}},beforeRouteLeave:function(to,from,next){this.$store.commit("manageContent/wizard/RESET_NODE_LISTS"),this.$store.commit("manageContent/wizard/RESET_STATE"),next()},beforeMount:function(){var _this=this;this.fetchPageData(this.channelId).then((function(pageData){_this.setUpPage(pageData)})).catch((function(error){_this.$store.dispatch("handleApiError",{error:error,reloadOnReconnect:!0})}))},methods:{setUpPage:function(_ref){var freeSpace=_ref.freeSpace,channel=_ref.channel,studioChannel=_ref.studioChannel;return this.freeSpace=freeSpace,this.channel=ManageChannelContentsPagevue_type_script_lang_js_objectSpread({},channel),studioChannel&&(this.studioChannel=ManageChannelContentsPagevue_type_script_lang_js_objectSpread({},studioChannel)),this.$store.commit("manageContent/wizard/SET_TRANSFERRED_CHANNEL",this.channel),this.$store.commit("manageContent/wizard/SET_TRANSFER_TYPE",external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALEXPORT),this.updateNode(this.$route.query.node||channel.root)},updateNode:function(newNodeId){var _this2=this;newNodeId?this.nodeCache[newNodeId]?this.currentNodeId=newNodeId:this.fetchNodeWithAncestors(newNodeId).then((function(node){0===node.children.filter((function(x){return x.available})).length?_this2.$router.replace({query:{node:last_default()(node.ancestors).id}}):(_this2.$set(_this2.nodeCache,newNodeId,node),_this2.currentNodeId=newNodeId)})).catch((function(error){_this2.$store.dispatch("handleApiError",{error:error})})):this.updateNode(this.channel.root)},handleDeleteSubmit:function(_ref2){var deleteEverywhere=_ref2.deleteEverywhere;this.beforeTask(),this.startDeleteTask({deleteEverywhere:deleteEverywhere,channelId:this.channelId,channelName:this.channel.name,included:this.selections.included,excluded:this.selections.excluded}).then(this.onTaskSuccess,this.onTaskFailure)},handleExportSubmit:function(_ref3){var driveId=_ref3.driveId;this.beforeTask(),this.startExportTask({driveId:driveId,channelId:this.channelId,channelName:this.channel.name,included:this.selections.included,excluded:this.selections.excluded}).then(this.onTaskSuccess,this.onTaskFailure)},beforeTask:function(){this.closeModal(),this.bottomBarDisabled=!0},onTaskSuccess:function(task){this.bottomBarDisabled=!1,this.watchedTaskType=task.type,this.notifyAndWatchTask(task)},onTaskFailure:function(){this.bottomBarDisabled=!1,this.createTaskFailedSnackbar()},handleClickViewNewVersion:function(){this.$router.push({name:PageNames.NEW_CHANNEL_VERSION_PAGE,query:{last:PageNames.MANAGE_CHANNEL}})},handleSelectImportMoreSource:function(params){var baseLinkObject={name:PageNames.SELECT_CONTENT,params:{channel_id:this.channelId},query:{last:PageNames.MANAGE_CHANNEL}};params.source===ContentSources.LOCAL_DRIVE?baseLinkObject.query.drive_id=params.drive_id:params.source===ContentSources.PEER_KOLIBRI_SERVER&&(baseLinkObject.query.address_id=params.address_id),this.$router.push(baseLinkObject)},closeModal:function(){this.selectSourcePageName=null,this.shownModal=null},onWatchedTaskFinished:function(){var _this3=this;this.nodeCache={},this.$store.commit("manageContent/wizard/RESET_NODE_LISTS"),this.fetchPageData(this.channelId).then(this.setUpPage).catch((function(error){404===error.response.status?_this3.$router.replace({name:PageNames.MANAGE_CONTENT_PAGE}):_this3.$store.dispatch("handleApiError",{error:error})}))},fetchPageData:function(channelId){var _this=this,studioChannelPromise=external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchModel({id:channelId,force:!0}).then((function(channel){_this.studioChannel=channel})).catch((function(){return null}));return Promise.all([getDeviceInfo(),getChannelWithContentSizes(channelId,!1),studioChannelPromise]).then((function(_ref){var _ref2=api_slicedToArray(_ref,3),deviceInfo=_ref2[0],channel=_ref2[1],studioChannel=_ref2[2];return{freeSpace:deviceInfo.free_space,channel:channel,studioChannel:studioChannel}}))},fetchNodeWithAncestors:function(nodeId){return external_kolibriCoreAppGlobal_resources_namespaceObject.ContentNodeGranularResource.fetchModel({id:nodeId,getParams:{for_export:!0},force:!0})},startExportTask:function(params){var channelId=params.channelId,channelName=params.channelName,driveId=params.driveId,included=params.included,omitted=params.omitted;return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask({type:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKEXPORT,channel_id:channelId,channel_name:channelName,drive_id:driveId,node_ids:included,exclude_node_ids:omitted})},startDeleteTask:function(params){var channelId=params.channelId,channelName=params.channelName,included=params.included,excluded=params.excluded,deleteEverywhere=params.deleteEverywhere;return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.startTask({type:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECHANNEL,channel_id:channelId,channel_name:channelName,node_ids:included,exclude_node_ids:excluded,force_delete:deleteEverywhere})}},$trs:{appBarTitle:{message:"Manage '{channelName}'",context:"Refers to the title of the page where a user manages a specific channel."},importMoreAction:{message:"Import more",context:"Button which user can use to import more channels."}}},ManageChannelContentsPage=normalizeComponent(ManageChannelContentsPagevue_type_script_lang_js,ManageChannelContentsPagevue_type_template_id_ba915b20_scoped_true_render,[],!1,null,"ba915b20",null).exports;function wizardTransitionRoutes_typeof(o){return wizardTransitionRoutes_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},wizardTransitionRoutes_typeof(o)}function wizardTransitionRoutes_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function wizardTransitionRoutes_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?wizardTransitionRoutes_ownKeys(Object(t),!0).forEach((function(r){wizardTransitionRoutes_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wizardTransitionRoutes_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function wizardTransitionRoutes_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=wizardTransitionRoutes_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=wizardTransitionRoutes_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==wizardTransitionRoutes_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var wizardTransitionRoutes=[{name:ContentWizardPages.AVAILABLE_CHANNELS,component:withAuthMessage(AvailableChannelsPage,"contentManager"),path:"/content/channels",handler:function(_ref){var query=_ref.query;return showAvailableChannelsPage(external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),{address_id:query.address_id,drive_id:query.drive_id,token:query.token})}},{name:PageNames.MANAGE_CHANNEL,component:withAuthMessage(ManageChannelContentsPage,"contentManager"),path:"/content/manage_channel/:channel_id",handler:function(_ref2){var name=_ref2.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name}),external_kolibriCoreAppGlobal_coreVue_vuex_store_default().commit("CORE_SET_PAGE_LOADING",!1)}},{name:ContentWizardPages.SELECT_CONTENT,component:withAuthMessage(SelectContentPage,"contentManager"),path:"/content/channels/:channel_id",handler:function(toRoute){var query=toRoute.query,params=toRoute.params,node_id=query.node_id;if(node_id){var nextNode;if(external_kolibriCoreAppGlobal_coreVue_vuex_store_default().state.manageContent.wizard.transferType&&node_id!==params.channel_id)return nextNode=params.node?params.node:{path:external_kolibriCoreAppGlobal_coreVue_vuex_store_default().state.manageContent.wizard.pathCache[node_id],id:node_id},updateTreeViewTopic(external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),nextNode);external_kolibriCoreAppGlobal_coreVue_router_default().replace(wizardTransitionRoutes_objectSpread(wizardTransitionRoutes_objectSpread({},toRoute),{},{query:omit_default()(query,"node_id")}))}else{var cachedChannelPath=external_kolibriCoreAppGlobal_coreVue_vuex_store_default().state.manageContent.wizard.pathCache[params.channel_id];if(!cachedChannelPath)return showSelectContentPage(external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),{channel_id:params.channel_id,address_id:query.address_id,drive_id:query.drive_id});updateTreeViewTopic(external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),cachedChannelPath[0])}}}];function routes_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function hideLoadingScreen(){external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("notLoading")}function defaultHandler(toRoute){external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:toRoute.name}),hideLoadingScreen()}var arr,routes=[{path:"/",redirect:"/content"},{name:PageNames.MANAGE_CONTENT_PAGE,component:withAuthMessage(ManageContentPage,"contentManager"),path:"/content",handler:function(_ref){var store,name=_ref.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name}),(store=external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),store.commit("manageContent/RESET_STATE"),store.commit("manageContent/wizard/RESET_STATE"),store.getters.canManageContent?Promise.all([store.dispatch("manageContent/refreshTaskList"),store.dispatch("manageContent/refreshChannelList")]).then((function(){return store.dispatch("notLoading")})):(store.dispatch("notLoading"),Promise.resolve())).then(hideLoadingScreen)},beforeEnter:function(to,from,next){"/welcome"===to.redirectedFrom?external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("getFacilities").then(next,next):next()}},{name:PageNames.MANAGE_PERMISSIONS_PAGE,component:withAuthMessage(ManagePermissionsPage,"superuser"),path:"/permissions",handler:function(_ref2){var store,shouldResolve,name=_ref2.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name}),(store=external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),shouldResolve=external_kolibriCoreAppGlobal_utils_samePageCheckGenerator_default()(store),store.commit("managePermissions/SET_LOADING_FACILITY_USERS",!0),store.dispatch("notLoading"),Promise.all([external_kolibriCoreAppGlobal_resources_namespaceObject.FacilityUserResource.fetchCollection(),external_kolibriCoreAppGlobal_resources_namespaceObject.DevicePermissionsResource.fetchCollection({force:!0}).then((function(permissions){return mapValues_default()(groupBy_default()(permissions,"user"),head_default())}))]).then((function(_ref){var _ref2=managePermissions_handlers_slicedToArray(_ref,2),users=_ref2[0],permissions=_ref2[1];return shouldResolve()&&store.commit("managePermissions/SET_STATE",{facilityUsers:users,permissions:permissions}),store.commit("managePermissions/SET_LOADING_FACILITY_USERS",!1)})).catch((function(error){return store.commit("managePermissions/SET_LOADING_FACILITY_USERS",!1),shouldResolve()?store.dispatch("handleApiError",{error:error,reloadOnReconnect:!0}):null}))).then(hideLoadingScreen)}},{name:PageNames.FACILITIES_PAGE,component:withAuthMessage(FacilitiesPage,"superuser"),path:"/facilities",handler:function(_ref3){var name=_ref3.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name,isAsync:!1})}},{name:PageNames.FACILITIES_TASKS_PAGE,component:withAuthMessage(FacilitiesTasksPage,"superuser"),path:"/facilities/tasks",handler:function(_ref4){var name=_ref4.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name,isAsync:!1})}},{name:PageNames.MANAGE_SYNC_SCHEDULE,component:withAuthMessage(ManageSyncSchedule,"superuser"),path:"/facilities/:facilityId/managesync",props:function(route){var facilityId=route.params.facilityId||external_kolibriCoreAppGlobal_coreVue_vuex_store_default().getters.userFacilityId;return{goBackRoute:{name:PageNames.FACILITIES_PAGE},facilityId:facilityId,editSyncRoute:function(deviceId){return{name:PageNames.EDIT_SYNC_SCHEDULE,params:{device_id:deviceId,facilityId:facilityId}}}}}},{name:PageNames.EDIT_SYNC_SCHEDULE,component:withAuthMessage(EditDeviceSyncSchedule,"superuser"),path:"/facilities/:device_id/:facilityId/editdevice",props:function(route){return{goBackRoute:{name:PageNames.MANAGE_SYNC_SCHEDULE},facilityId:route.params.facilityId||external_kolibriCoreAppGlobal_coreVue_vuex_store_default().getters.userFacilityId,deviceId:route.params.device_id}},handler:function(_ref5){var name=_ref5.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name,isAsync:!1})}},{name:PageNames.USER_PERMISSIONS_PAGE,component:withAuthMessage(UserPermissionsPage,"superuser"),path:"/permissions/:userId",handler:function(_ref6){var params=_ref6.params,name=_ref6.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name}),function(store,userId){var setUserPermissionsState=function(state){return store.commit("userPermissions/SET_STATE",state)},stopLoading=function(){return store.dispatch("notLoading")};if(!store.getters.isSuperuser)return setUserPermissionsState({user:null,permissions:{}}),stopLoading(),Promise.resolve();var samePage=external_kolibriCoreAppGlobal_utils_samePageCheckGenerator_default()(store);Promise.all([fetchUserPermissions(userId),store.dispatch("getFacilities")]).then((function(_ref){var data=userPermissions_handlers_slicedToArray(_ref,1)[0];samePage()&&setUserPermissionsState({user:data.user,permissions:data.permissions}),stopLoading()})).catch((function(error){samePage()&&(404===error.response.status&&setUserPermissionsState({user:null,permissions:{}}),store.dispatch("handleApiError",{error:error,reloadOnReconnect:!0}),stopLoading())}))}(external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),params.userId)}},{name:PageNames.DEVICE_INFO_PAGE,component:withAuthMessage(DeviceInfoPage,"superuser"),path:"/info",handler:function(_ref7){var name=_ref7.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name}),function(store){if(store.getters.canManageContent){var shouldResolve=external_kolibriCoreAppGlobal_utils_samePageCheckGenerator_default()(store);return Promise.all([getDeviceInfo()]).then((function(_ref3){var deviceInfo=handlers_slicedToArray(_ref3,1)[0];shouldResolve()&&store.commit("deviceInfo/SET_STATE",{deviceInfo:deviceInfo})})).catch((function(error){shouldResolve()&&store.dispatch("handleApiError",{error:error,reloadOnReconnect:!0})}))}return Promise.resolve()}(external_kolibriCoreAppGlobal_coreVue_vuex_store_default()).then(hideLoadingScreen)}},{name:PageNames.DEVICE_SETTINGS_PAGE,component:withAuthMessage(DeviceSettingsPage,"admin"),path:"/settings",handler:function(_ref8){var name=_ref8.name;external_kolibriCoreAppGlobal_coreVue_vuex_store_default().dispatch("preparePage",{name:name})}},{name:PageNames.DELETE_CHANNELS,path:"/content/delete_channels",component:withAuthMessage(DeleteExportChannelsPage,"contentManager"),props:{actionType:"delete"},handler:defaultHandler},{name:PageNames.EXPORT_CHANNELS,path:"/content/export_channels",component:withAuthMessage(DeleteExportChannelsPage,"contentManager"),props:{actionType:"export"},handler:defaultHandler},{name:PageNames.REARRANGE_CHANNELS,path:"/content/rearrange_channels",component:withAuthMessage(RearrangeChannelsPage,"contentManager"),handler:defaultHandler},{name:PageNames.MANAGE_TASKS,path:"/content/manage_tasks",component:withAuthMessage(ManageTasksPage,"contentManager"),handler:defaultHandler},{name:PageNames.NEW_CHANNEL_VERSION_PAGE,path:"/content/manage_channel/:channel_id/upgrade",component:withAuthMessage(NewChannelVersionPage,"contentManager"),handler:defaultHandler}].concat(function(arr){if(Array.isArray(arr))return routes_arrayLikeToArray(arr)}(arr=wizardTransitionRoutes)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return routes_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?routes_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{path:"/content/*",redirect:"/content"}]),src_routes=routes;function saveFacilityConfig(store){var _store$state=store.state,facilityDatasetId=_store$state.facilityDatasetId,settings=_store$state.settings,resourceRequests=[external_kolibriCoreAppGlobal_resources_namespaceObject.FacilityDatasetResource.saveModel({id:facilityDatasetId,data:settings})];return Promise.all(resourceRequests).then((function(){store.commit("CONFIG_PAGE_COPY_SETTINGS")}))}var facilityConfig={namespaced:!0,state:{facilityDatasetId:"",facilityId:"",facilityName:"",settings:{},settingsCopy:{},facilityNameSaved:!1,facilityNameError:!1,facilities:[],isFacilityPinValid:!1,facilityDataLoading:!1},getters:{getFacilityDataLoading:function(state){return state.facilityDataLoading}},mutations:{SET_STATE:function(state,payload){Object.assign(state,payload)},RESET_STATE:function(state){Object.assign(state,{facilityDatasetId:"",facilityId:"",facilityName:"",settings:{},settingsCopy:{},facilityNameSaved:!1,facilityNameError:!1,facilities:[],isFacilityPinValid:!1,facilityDataLoading:!1})},CONFIG_PAGE_UNDO_SETTINGS_CHANGE:function(state){state.settings=Object.assign({},state.settingsCopy)},CONFIG_PAGE_MODIFY_SETTING:function(state,_ref){var name=_ref.name,value=_ref.value;void 0!==state.settings[name]&&(state.settings[name]=value)},CONFIG_PAGE_MODIFY_ALL_SETTINGS:function(state,settings){state.settings=Object.assign({},state.settings,settings)},CONFIG_PAGE_COPY_SETTINGS:function(state){state.settingsCopy=Object.assign({},state.settings)},FACILITY_NAME_SAVED:function(state,name){state.facilityName=name,state.facilityNameSaved=!0},FACILITY_NAME_NOT_SAVED:function(state){state.facilityNameError=!0},RESET_FACILITY_NAME_STATES:function(state){state.facilityNameError=!1,state.facilityNameSaved=!1},SET_FACILITY_DATA_LOADING:function(state,value){state.facilityDataLoading=value},UPDATE_FACILITIES:function(state,payload){state.facilities.find((function(f){return f.name===payload.oldName})).name=payload.newName},SET_IS_FACILITY_PIN_VALID:function(state,valid){state.isFacilityPinValid=valid},UPDATE_FACILITY_EXTRA_SETTINGS:function(state,extraSettings){state.settings=Object.assign({},state.settings,extraSettings)}},actions:{saveFacilityConfig:saveFacilityConfig,resetFacilityConfig:function(store){var facilityDatasetId=store.state.facilityDatasetId;return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:facilitydataset-resetsettings"](facilityDatasetId),method:"POST"}).then((function(_ref){var data=_ref.data;store.commit("CONFIG_PAGE_MODIFY_ALL_SETTINGS",{learner_can_edit_username:data.learner_can_edit_username,learner_can_edit_name:data.learner_can_edit_name,learner_can_edit_password:data.learner_can_edit_password,learner_can_sign_up:data.learner_can_sign_up,learner_can_delete_account:data.learner_can_delete_account,learner_can_login_with_no_password:data.learner_can_login_with_no_password,show_download_button_in_learn:data.show_download_button_in_learn})}))},saveFacilityName:function(store,payload){return external_kolibriCoreAppGlobal_resources_namespaceObject.FacilityResource.saveModel({id:payload.id,data:{name:payload.name}}).then((function(facility){store.dispatch("getFacilities",null,{root:!0}),store.commit("UPDATE_FACILITIES",{oldName:store.state.facilityName,newName:facility.name}),store.commit("FACILITY_NAME_SAVED",facility.name)}),(function(error){store.commit("FACILITY_NAME_NOT_SAVED",error)}))},setPin:function(store,payload){var facilityDatasetId=store.state.facilityDatasetId;return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:facilitydataset-update-pin"](facilityDatasetId),method:"POST",data:payload}).then((function(_ref2){var data=_ref2.data;store.commit("UPDATE_FACILITY_EXTRA_SETTINGS",{extra_fields:data.extra_fields}),saveFacilityConfig(store)}))},unsetPin:function(store){var facilityDatasetId=store.state.facilityDatasetId;return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:facilitydataset-update-pin"](facilityDatasetId),method:"PATCH"}).then((function(_ref3){var data=_ref3.data;store.commit("UPDATE_FACILITY_EXTRA_SETTINGS",{extra_fields:data.extra_fields}),saveFacilityConfig(store)}))},isPinValid:function(store,payload){var facilityDatasetId=store.state.facilityDatasetId;return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:ispinvalid"](facilityDatasetId),method:"POST",data:payload}).then((function(_ref4){var data=_ref4.data;store.commit("SET_IS_FACILITY_PIN_VALID",data.is_pin_valid)}))}}},deviceInfo={namespaced:!0,state:{deviceInfo:{},deviceName:null,dataLoading:!1},mutations:{SET_STATE:function(state,payload){state.deviceInfo=payload.deviceInfo,state.deviceName=payload.deviceInfo.device_name},SET_DATA_LOADING:function(state,payload){state.dataLoading=payload},SET_DEVICE_NAME:function(state,name){state.deviceName=name},RESET_STATE:function(state){state.deviceInfo={},state.deviceName=null}},getters:{getDataLoading:function(state){return state.dataLoading},isRemoteContent:function(){return plugin_data_src.isRemoteContent}},actions:{updateDeviceName:function(store,name){return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:devicename"](),method:"PATCH",data:{name:name}}).then((function(response){store.commit("SET_DEVICE_NAME",response.data.name)}))}}},findLastIndex=__webpack_require__(8682),findLastIndex_default=__webpack_require__.n(findLastIndex),fp_omit=__webpack_require__(3047),fp_omit_default=__webpack_require__.n(fp_omit);function availableChannelsActions_typeof(o){return availableChannelsActions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},availableChannelsActions_typeof(o)}function availableChannelsActions_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return availableChannelsActions_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return availableChannelsActions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return availableChannelsActions_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function availableChannelsActions_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function availableChannelsActions_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function availableChannelsActions_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?availableChannelsActions_ownKeys(Object(t),!0).forEach((function(r){availableChannelsActions_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):availableChannelsActions_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function availableChannelsActions_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=availableChannelsActions_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=availableChannelsActions_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==availableChannelsActions_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function getAllRemoteChannels(store,publicChannels){var channelList=store.rootState.manageContent.channelList,promises=differenceBy_default()(channelList,publicChannels,"id").filter((function(channel){return channel.available})).map((function(installedChannel){return(token=installedChannel.id,external_kolibriCoreAppGlobal_resources_namespaceObject.RemoteChannelResource.fetchModel({id:token,force:!0})).then((function(channel){return Promise.resolve(availableChannelsActions_objectSpread(availableChannelsActions_objectSpread(availableChannelsActions_objectSpread({},channel),installedChannel),{},{installed_version:installedChannel.version,latest_version:channel.version}))})).catch((function(){return Promise.resolve()}));var token}));return Promise.all(promises).then((function(unlisted){return[].concat(availableChannelsActions_toConsumableArray(unlisted.filter(Boolean)),availableChannelsActions_toConsumableArray(publicChannels))}))}function getAllDriveChannels(store,drive){var channelList=store.rootState.manageContent.channelList;return drive.metadata.channels.map((function(c){var installedChannel=find_default()(channelList,{id:c.id,available:!0})||{};return availableChannelsActions_objectSpread(availableChannelsActions_objectSpread({},c),{},{installed_version:installedChannel.version,latest_version:c.version})}))}var fp_map=__webpack_require__(9119),fp_map_default=__webpack_require__.n(fp_map),partition=__webpack_require__(8626),partition_default=__webpack_require__.n(partition);function contentTreeViewerActions_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return contentTreeViewerActions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return contentTreeViewerActions_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function contentTreeViewerActions_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var pluckIds=fp_map_default()("id");function isDescendantOrSelf(testNode,selfNode){return testNode.id===selfNode.id||find_default()(testNode.path,{id:selfNode.id})}function setImportExportFileSizeAndResourceCount(store){var _store$state=store.state,transferredChannel=_store$state.transferredChannel,nodesForTransfer=_store$state.nodesForTransfer;if(0===nodesForTransfer.included.length&&0===nodesForTransfer.omitted.length)return store.commit("SET_TRANSFER_SIZE",{transferFileSize:0,transferResourceCount:0}),Promise.resolve();var postArgs={channel_id:transferredChannel.id,node_ids:nodesForTransfer.included.map((function(node){return node.id})),exclude_node_ids:nodesForTransfer.omitted.map((function(node){return node.id}))};if(store.getters.inLocalImportMode){var selectedDrive=store.state.selectedDrive;postArgs.drive_id=selectedDrive.id}if(store.getters.inPeerImportMode){var selectedPeer=store.state.selectedPeer;postArgs.peer_id=selectedPeer.id}return store.getters.inExportMode&&(postArgs.export=!0),external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:kolibri.plugins.device:importexportsizeview"](),method:"POST",data:postArgs}).then((function(response){var _response$data=response.data,file_size=_response$data.file_size,resource_count=_response$data.resource_count;store.commit("SET_TRANSFER_SIZE",{transferFileSize:file_size,transferResourceCount:resource_count})}))}function addNodeForTransfer(store,node){var _store$state$nodesFor=store.state.nodesForTransfer,included=_store$state$nodesFor.included,omitted=_store$state$nodesFor.omitted,_partition2=contentTreeViewerActions_slicedToArray(partition_default()(omitted,(function(omitNode){return isDescendantOrSelf(omitNode,node)})),2),notToOmit=_partition2[0],toOmit=_partition2[1];notToOmit.length>0&&store.commit("REPLACE_OMIT_LIST",toOmit);var _partition4=contentTreeViewerActions_slicedToArray(partition_default()(included,(function(includeNode){return isDescendantOrSelf(includeNode,node)})),2),notToIncluded=_partition4[0],toInclude=_partition4[1];return notToIncluded.length>0&&store.commit("REPLACE_INCLUDE_LIST",toInclude),store.commit("ADD_NODE_TO_INCLUDE_LIST",node),setImportExportFileSizeAndResourceCount(store)}function removeNodeForTransfer(store,node){var forImport=!store.getters.inExportMode,_store$state$nodesFor2=store.state.nodesForTransfer,included=_store$state$nodesFor2.included,omitted=_store$state$nodesFor2.omitted,_partition6=contentTreeViewerActions_slicedToArray(partition_default()(included,(function(includeNode){return isDescendantOrSelf(includeNode,node)})),2),notToInclude=_partition6[0],toInclude=_partition6[1];notToInclude.length>0&&store.commit("REPLACE_INCLUDE_LIST",toInclude);var includedAncestors=included.filter((function(includeNode){return pluckIds(node.path).includes(includeNode.id)&&node.id!==includeNode.id}));if(includedAncestors.length>0){var _partition8=contentTreeViewerActions_slicedToArray(partition_default()(omitted,(function(omitNode){return isDescendantOrSelf(omitNode,node)})),2),notToOmit=_partition8[0],toOmit=_partition8[1];return notToOmit.length>0&&store.commit("REPLACE_OMIT_LIST",toOmit),store.commit("ADD_NODE_TO_OMIT_LIST",node),setImportExportFileSizeAndResourceCount(store).then((function(){includedAncestors.forEach((function(ancestor){var omittedResources,ancestorResources,omittedDescendants=omitted.filter((function(n){return pluckIds(n.path).includes(ancestor.id)}));forImport?(ancestorResources=ancestor.total_resources-ancestor.on_device_resources,omittedResources=sumBy_default()(omittedDescendants,"total_resources")-sumBy_default()(omittedDescendants,"on_device_resources")):(ancestorResources=ancestor.on_device_resources,omittedResources=sumBy_default()(omittedDescendants,"on_device_resources")),ancestorResources===omittedResources&&(store.commit("REPLACE_INCLUDE_LIST",included.filter((function(n){return n.id!==ancestor.id}))),store.commit("REPLACE_OMIT_LIST",omitted.filter((function(n){return!pluckIds(n.path).includes(ancestor.id)}))))}))}))}return setImportExportFileSizeAndResourceCount(store)}function prepareForAvailableChannelsPage(store){store.commit("SET_PAGE_NAME",ContentWizardPages.AVAILABLE_CHANNELS,{root:!0})}function goForwardFromSelectImportSourceModal(store,source){var transferredChannel=store.state.transferredChannel,isImportingMore=store.getters.isImportingMore;if(source===ContentSources.LOCAL_DRIVE&&(store.commit("SET_TRANSFER_TYPE",external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT),store.commit("SET_WIZARD_PAGENAME",ContentWizardPages.SELECT_DRIVE)),source===ContentSources.KOLIBRI_STUDIO)return store.commit("SET_TRANSFER_TYPE",external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.REMOTEIMPORT),isImportingMore?external_kolibriCoreAppGlobal_coreVue_router_default().push(selectContentPageLink({channelId:transferredChannel.id})):(prepareForAvailableChannelsPage(store),external_kolibriCoreAppGlobal_coreVue_router_default().push(availableChannelsPageLink()));source===ContentSources.PEER_KOLIBRI_SERVER&&(store.commit("SET_TRANSFER_TYPE",external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.PEERIMPORT),store.commit("SET_WIZARD_PAGENAME",ContentWizardPages.SELECT_NETWORK_ADDRESS))}function goForwardFromSelectDriveModal(store,_ref){var driveId=_ref.driveId,forExport=_ref.forExport,transferredChannel=store.state.transferredChannel;return store.getters.isImportingMore?(store.commit("SET_WIZARD_PAGENAME",ContentWizardPages.SELECT_CONTENT),external_kolibriCoreAppGlobal_coreVue_router_default().push(selectContentPageLink({channelId:transferredChannel.id,driveId:driveId,forExport:forExport}))):(prepareForAvailableChannelsPage(store),external_kolibriCoreAppGlobal_coreVue_router_default().push(availableChannelsPageLink({driveId:driveId,forExport:forExport})))}function cachedTopicPath(state){return function(id){return state.pathCache[id]}}function getDriveById(state){return function(driveId){return find_default()(state.driveList,{id:driveId})}}function inExportMode(state){return state.transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALEXPORT}function inLocalImportMode(state){return state.transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT}function inRemoteImportMode(state){return state.transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.REMOTEIMPORT}function inPeerImportMode(state){return state.transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.PEERIMPORT}function isStudioApplication(state){return state.selectedPeer.application===external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.ApplicationTypes.STUDIO}function driveCanBeUsedForTransfer(state,getters,rootState,rootGetters){return function(_ref){var drive=_ref.drive,transferType=_ref.transferType;if(transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALIMPORT){var transferredChannel=state.transferredChannel;if(!getters.isImportingMore)return drive.metadata.channels.length>0;var channelOnDrive=find_default()(drive.metadata.channels,{id:transferredChannel.id}),channelOnServer=rootGetters["manageContent/channelIsInstalled"](transferredChannel.id);return channelOnDrive&&channelOnDrive.version>=channelOnServer.version}return transferType===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TransferTypes.LOCALEXPORT&&drive.writable}}function isImportingMore(state,getters){return!getters.inExportMode&&!isEmpty_default()(state.transferredChannel)}function wizard_typeof(o){return wizard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},wizard_typeof(o)}function wizard_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function wizard_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?wizard_ownKeys(Object(t),!0).forEach((function(r){wizard_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wizard_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function wizard_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=wizard_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=wizard_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==wizard_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var omitPath=fp_omit_default()("path");function wizard_defaultState(){return{status:"",pageName:"",driveList:[],transferType:"",availableChannels:[],selectedDrive:{},selectedPeer:{},availableSpace:null,transferFileSize:0,transferResourceCount:0,transferredChannel:{},currentTopicNode:{},path:[],pathCache:{},nodesForTransfer:{included:[],omitted:[]}}}var wizard={namespaced:!0,state:wizard_defaultState,actions:wizard_objectSpread(wizard_objectSpread(wizard_objectSpread(wizard_objectSpread(wizard_objectSpread({},availableChannelsActions_namespaceObject),contentTreeViewerActions_namespaceObject),contentWizardActions_namespaceObject),selectContentActions_namespaceObject),{},{updatePathBreadcrumbs:function(store,topic){var newCachedPath,cached=store.getters.cachedTopicPath(topic.id);cached?store.commit("SET_PATH",cached):(newCachedPath=topic.path?topic.path.map(omitPath):[omitPath(topic)],store.commit("ADD_PATH_TO_CACHE",{node:topic,path:newCachedPath}),store.commit("SET_PATH",newCachedPath))}}),getters:getters_namespaceObject,mutations:{RESET_STATE:function(state){Object.assign(state,{status:"",pageName:"",driveList:[],transferType:"",availableChannels:[],selectedDrive:{},selectedPeer:{},availableSpace:null,transferFileSize:0,transferResourceCount:0,transferredChannel:{},currentTopicNode:{},path:[],pathCache:{},nodesForTransfer:{included:[],omitted:[]}})},SET_SELECTED_PEER:function(state,selectedPeer){state.selectedPeer=selectedPeer},ADD_NODE_TO_INCLUDE_LIST:function(state,node){state.nodesForTransfer.included.push(node)},REMOVE_NODE_FROM_INCLUDE_LIST:function(state,node){var newList=state.nodesForTransfer.included.filter((function(n){return n.id!==node.id}));state.nodesForTransfer.included=newList},REPLACE_INCLUDE_LIST:function(state,newList){state.nodesForTransfer.included=newList},ADD_NODE_TO_OMIT_LIST:function(state,node){state.nodesForTransfer.omitted.push(node)},REMOVE_NODE_FROM_OMIT_LIST:function(state,node){var newList=state.nodesForTransfer.omitted.filter((function(n){return n.id!==node.id}));state.nodesForTransfer.omitted=newList},REPLACE_OMIT_LIST:function(state,newList){state.nodesForTransfer.omitted=newList},RESET_NODE_LISTS:function(state){state.nodesForTransfer.included=[],state.nodesForTransfer.omitted=[]},SET_CURRENT_TOPIC_NODE:function(state,currentTopicNode){state.currentTopicNode=currentTopicNode},ADD_PATH_TO_CACHE:function(state,_ref){var node=_ref.node,path=_ref.path;state.pathCache[node.id]=path},SET_PATH:function(state,path){state.path=path},SET_AVAILABLE_SPACE:function(state,space){state.availableSpace=space},SET_TRANSFER_SIZE:function(state,_ref2){var transferFileSize=_ref2.transferFileSize,transferResourceCount=_ref2.transferResourceCount;state.transferFileSize=transferFileSize,state.transferResourceCount=transferResourceCount},SET_WIZARD_PAGENAME:function(state,pageName){state.pageName=pageName},SET_DRIVE_LIST:function(state,driveList){state.driveList=driveList},SET_AVAILABLE_CHANNELS:function(state,availableChannels){state.availableChannels=availableChannels},SET_TRANSFERRED_CHANNEL:function(state,transferredChannel){state.transferredChannel=transferredChannel},UPDATE_TRANSFERRED_CHANNEL:function(state,update){state.transferredChannel=wizard_objectSpread(wizard_objectSpread({},state.transferredChannel),update)},SET_TRANSFER_TYPE:function(state,transferType){state.transferType=transferType},SET_WIZARD_STATUS:function(state,status){state.status=status||""},HYDRATE_SHOW_AVAILABLE_CHANNELS_PAGE:function(state,pageData){state.availableChannels=pageData.availableChannels,state.selectedDrive=pageData.selectedDrive,state.transferType=pageData.transferType},HYDRATE_SELECT_CONTENT_PAGE:function(state,pageData){state.availableSpace=pageData.availableSpace,state.selectedDrive=pageData.selectedDrive,state.transferredChannel=pageData.transferredChannel,state.transferType=pageData.transferType}}},pick=__webpack_require__(5693),pick_default=__webpack_require__.n(pick),taskActions_logging=external_kolibriCoreAppGlobal_lib_logging_default().getLogger("kolibri/plugins/device/assets/src/modules/manageContent/actions/taskActions.js");function cancelTask(store,taskId){return new Promise((function(resolve){var cancelWatch=external_kolibriCoreAppGlobal_coreVue_vuex_store_default().watch((function(state){return(state.manageContent.taskList.find((function(task){return task.id===taskId}))||{}).status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.CANCELED}),(function(){cancelWatch(),external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.clear(taskId).then(resolve)}));external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.cancel(taskId)}))}var simplifyTask=pick_default()(["id","status","percentage"]);function refreshTaskList(store){return external_kolibriCoreAppGlobal_resources_namespaceObject.TaskResource.list({queue:"content"}).then((function(newTasks){(function(state,newTasks){var oldTasks=state.taskList;return oldTasks&&!isEqual_default()(oldTasks.map(simplifyTask),newTasks.map(simplifyTask))})(store.state,newTasks)&&function(store,tasks){var contentTasks=tasks.filter((function(task){return Object.values(external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes).includes(task.type)}));store.commit("SET_TASK_LIST",contentTasks)}(store,newTasks)})).catch((function(error){taskActions_logging.error("There was an error while fetching the task list: ",error)}))}function refreshDriveList(store){return external_kolibriCoreAppGlobal_client_default()({url:external_kolibriCoreAppGlobal_urls_default()["kolibri:core:driveinfo-list"]()}).then((function(_ref){var data=_ref.data;return store.commit("wizard/SET_DRIVE_LIST",data),data}))}function actions_typeof(o){return actions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},actions_typeof(o)}function actions_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function actions_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?actions_ownKeys(Object(t),!0).forEach((function(r){actions_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):actions_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function actions_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=actions_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=actions_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==actions_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function actions_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return actions_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return actions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return actions_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function actions_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function manageContent_typeof(o){return manageContent_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},manageContent_typeof(o)}function manageContent_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function manageContent_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?manageContent_ownKeys(Object(t),!0).forEach((function(r){manageContent_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):manageContent_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function manageContent_defineProperty(obj,key,value){return key=function(t){var i=function(t,r){if("object"!=manageContent_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=manageContent_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==manageContent_typeof(i)?i:String(i)}(key),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function manageContent_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return manageContent_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return manageContent_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return manageContent_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function manageContent_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function manageContent_defaultState(){return{channelList:[],channelListLoading:!1,taskList:[],watchedTaskId:null}}function addOrUpdateUserPermissions(store,payload){var permissions={user:payload.userId,is_superuser:payload.is_superuser,can_manage_content:payload.can_manage_content};return external_kolibriCoreAppGlobal_resources_namespaceObject.DevicePermissionsResource.saveModel({id:payload.userId,data:permissions}).then((function(permissionsModel){return external_kolibriCoreAppGlobal_resources_namespaceObject.FacilityUserResource.fetchModel({id:payload.userId,force:!0}).then((function(userModel){return store.commit("SET_STATE",{user:userModel,permissions:permissionsModel}),userModel}))})).catch((function(error){return store.dispatch("handleApiError",{error:error},{root:!0})}))}var urls,pluginModule={state:function(){return{authenticateWithPin:!1,pageName:"",welcomeModalVisible:!1,query:{},grantPluginAccess:function(){}}},getters:{name:function(state){return state.name}},mutations:{SET_AUTHENTICATE_WITH_PIN:function(state,authenticate){state.authenticateWithPin=authenticate},SET_GRANT_PLUGIN_ACCESS:function(state,grantAccess){state.grantPluginAccess=grantAccess},SET_PAGE_NAME:function(state,name){state.pageName=name},SET_WELCOME_MODAL_VISIBLE:function(state,visibility){state.welcomeModalVisible=visibility},SET_QUERY:function(state,query){state.query=query}},actions:{displayPinModal:function(store,grantAccess){store.commit("SET_AUTHENTICATE_WITH_PIN",!0),store.commit("SET_GRANT_PLUGIN_ACCESS",grantAccess)},preparePage:function(store,_ref){var name=_ref.name,_ref$isAsync=_ref.isAsync,isAsync=void 0===_ref$isAsync||_ref$isAsync;store.commit("CORE_SET_PAGE_LOADING",isAsync),store.commit("SET_PAGE_NAME",name),store.commit("CORE_SET_ERROR",null)},resetModuleState:function(store,_ref2){var toRoute=_ref2.toRoute,fromRoute=_ref2.fromRoute;if(fromRoute.name!==PageNames.MANAGE_CONTENT_PAGE||toRoute.name!==ContentWizardPages.AVAILABLE_CHANNELS){var moduleName=pageNameToModuleMap[fromRoute.name];moduleName&&store.commit("".concat(moduleName,"/RESET_STATE"))}}},modules:{deviceInfo:deviceInfo,managePermissions:{namespaced:!0,state:{loadingFacilityUsers:!1,facilityUsers:[],permissions:{}},mutations:{SET_STATE:function(state,payload){Object.assign(state,payload)},RESET_STATE:function(state){Object.assign(state,{loadingFacilityUsers:!1,facilityUsers:[],permissions:{}})},SET_LOADING_FACILITY_USERS:function(state,loadingFacilityUsers){state.loadingFacilityUsers=loadingFacilityUsers}}},userPermissions:{namespaced:!0,state:{permissions:{},user:{}},mutations:{SET_STATE:function(state,payload){Object.assign(state,payload)},RESET_STATE:function(state){Object.assign(state,{permissions:{},user:{}})}},actions:userPermissions_actions_namespaceObject},manageContent:{namespaced:!0,state:manageContent_defaultState,mutations:{SET_STATE:function(state,payload){Object.assign(state,payload)},RESET_STATE:function(state){Object.assign(state,{channelList:[],channelListLoading:!1,taskList:[],watchedTaskId:null})},SET_CHANNEL_LIST:function(state,channelList){state.channelList=manageContent_toConsumableArray(channelList)},SET_CHANNEL_LIST_LOADING:function(state,isLoading){state.channelListLoading=isLoading},SET_TASK_LIST:function(state,taskList){state.taskList=manageContent_toConsumableArray(taskList)},SET_WATCHED_TASK_ID:function(state,taskId){state.watchedTaskId=taskId},ADD_TO_CHANNEL_LIST:function(state,channel){state.channelList.push(channel)},REMOVE_FROM_CHANNEL_LIST:function(state,channelId){state.channelList=state.channelList.filter((function(channel){return channel.id!==channelId}))}},getters:{installedChannelsWithResources:function(state,getters){return state.channelList.filter((function(channel){return channel.available})).map((function(channel){var taskIndex=findLastIndex_default()(getters.managedTasks,(function(task){return![external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCONTENTEXPORT,external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKEXPORT,external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECHANNEL].includes(task.type)&&task.extra_metadata.channel_id===channel.id&&task.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.COMPLETED&&function(task){var tasksWithSameChannelId=getters.managedTasks.filter((function(t){return t.extra_metadata.channel_id===channel.id&&t.status===external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskStatuses.COMPLETED})),maxScheduledDatetime=tasksWithSameChannelId.reduce((function(max,current){return current.scheduled_datetime>max?current.scheduled_datetime:max}),tasksWithSameChannelId[0].scheduled_datetime);return task.scheduled_datetime===maxScheduledDatetime}(task)}));return manageContent_objectSpread(manageContent_objectSpread({},channel),{},{taskIndex:taskIndex})}))},channelIsInstalled:function(state){return function(channelId){return find_default()(state.channelList,{id:channelId,available:!0})}},channelIsOnDevice:function(state){return function(channelId){return find_default()(state.channelList,{id:channelId})}},channelIsBeingDeleted:function(state){return function(channelId){var match=find_default()(state.taskList,{type:external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DELETECHANNEL,channel_id:channelId});return!!match&&!match.clearable}},taskFinished:function(state){return function(taskId){if(!taskId)return null;var match=find_default()(state.taskList,{id:taskId});return match&&match.clearable?match.id:null}},managedTasks:function(state){return state.taskList.filter((function(task){return![external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTECHANNELIMPORT,external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.DISKCHANNELIMPORT,external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.REMOTECHANNELDIFFSTATS,external_kolibriCoreAppGlobal_utils_syncTaskUtils_namespaceObject.TaskTypes.LOCALCHANNELDIFFSTATS].includes(task.type)}))}},actions:actions_objectSpread(actions_objectSpread({},taskActions_namespaceObject),{},{refreshChannelList:function(store){return store.commit("SET_CHANNEL_LIST_LOADING",!0),deviceChannel.fetchCollection({getParams:{include_fields:"on_device_file_size"},force:!0}).then((function(channels){return store.commit("SET_CHANNEL_LIST",actions_toConsumableArray(channels)),store.commit("SET_CHANNEL_LIST_LOADING",!1),actions_toConsumableArray(channels)})).catch((function(){return[]}))},startImportWorkflow:function(store,channel){channel&&store.commit("wizard/SET_TRANSFERRED_CHANNEL",channel),store.commit("wizard/SET_WIZARD_PAGENAME",ContentWizardPages.SELECT_IMPORT_SOURCE)}}),modules:{wizard:wizard}},facilityConfig:facilityConfig}},vuex_router_sync=__webpack_require__(2215),forEach=__webpack_require__(6969),forEach_default=__webpack_require__.n(forEach),external_kolibriCoreAppGlobal_namespaceObject=kolibriCoreAppGlobal,external_kolibriCoreAppGlobal_default=__webpack_require__.n(external_kolibriCoreAppGlobal_namespaceObject);function kolibri_module_typeof(o){return kolibri_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},kolibri_module_typeof(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,kolibri_module_toPropertyKey(descriptor.key),descriptor)}}function kolibri_module_toPropertyKey(t){var i=function(t,r){if("object"!=kolibri_module_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=kolibri_module_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==kolibri_module_typeof(i)?i:String(i)}urls=external_kolibriCoreAppGlobal_urls_default(),__webpack_require__.p=urls.static("".concat("kolibri.plugins.device.app","/"));var KolibriModule=function(){function KolibriModule(options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,KolibriModule),this.name="kolibri.plugins.device.app";var safeOptions={};this.kolibriModuleOptions.forEach((function(option){options[option]&&(safeOptions[option]=options[option])})),Object.assign(this,safeOptions);for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this.initialize.apply(this,[options].concat(args)),this._registerKolibriModule()}var Constructor,protoProps,staticProps;return Constructor=KolibriModule,protoProps=[{key:"kolibriModuleOptions",get:function(){return[]}},{key:"_registerKolibriModule",value:function(){external_kolibriCoreAppGlobal_default().registerKolibriModuleSync(this)}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"stopListening",value:function(event,method){external_kolibriCoreAppGlobal_default().stopListening(event,this,method)}},{key:"emit",value:function(){external_kolibriCoreAppGlobal_default().emit.apply(external_kolibriCoreAppGlobal_default(),arguments)}},{key:"Kolibri",get:function(){return external_kolibriCoreAppGlobal_default()}}],protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),KolibriModule}();function kolibri_app_typeof(o){return kolibri_app_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},kolibri_app_typeof(o)}function kolibri_app_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return kolibri_app_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return kolibri_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kolibri_app_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kolibri_app_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function kolibri_app_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function kolibri_app_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?kolibri_app_ownKeys(Object(t),!0).forEach((function(r){kolibri_app_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kolibri_app_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function kolibri_app_defineProperty(obj,key,value){return(key=kolibri_app_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function kolibri_app_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,kolibri_app_toPropertyKey(descriptor.key),descriptor)}}function kolibri_app_toPropertyKey(t){var i=function(t,r){if("object"!=kolibri_app_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=kolibri_app_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==kolibri_app_typeof(i)?i:String(i)}function _callSuper(_this,derived,args){return derived=_getPrototypeOf(derived),function(self,call){if(call&&("object"===kolibri_app_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(_this,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(derived,args||[],_getPrototypeOf(_this).constructor):derived.apply(_this,args))}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}external_kolibriCoreAppGlobal_lib_logging_default().getLogger("kolibri/core/assets/src/kolibri_app.js");var KolibriApp=function(_KolibriModule){function KolibriApp(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,KolibriApp),_callSuper(this,KolibriApp,arguments)}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(KolibriApp,_KolibriModule),Constructor=KolibriApp,(protoProps=[{key:"routes",get:function(){return[]}},{key:"RootVue",get:function(){return{}}},{key:"store",get:function(){return external_kolibriCoreAppGlobal_coreVue_vuex_store_default()}},{key:"stateSetters",get:function(){return[]}},{key:"pluginModule",get:function(){return{}}},{key:"setupVue",value:function(){if(external_kolibriCoreAppGlobal_coreVue_router_default()._vueRouter||external_kolibriCoreAppGlobal_coreVue_router_default().initRouter(),(0,vuex_router_sync.Z)(external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),external_kolibriCoreAppGlobal_coreVue_router_default()),this.store.hotUpdate({actions:this.pluginModule.actions||{},getters:this.pluginModule.getters||{},mutations:this.pluginModule.mutations||{}}),"function"!=typeof this.pluginModule.state)throw TypeError("pluginModule.state must be a function returning a state object");this.store.replaceState(kolibri_app_objectSpread(kolibri_app_objectSpread({},this.store.state),this.pluginModule.state())),forEach_default()(this.pluginModule.modules,(function(module,name){external_kolibriCoreAppGlobal_coreVue_vuex_store_default().registerModule(name,module)}))}},{key:"startRootVue",value:function(){this.rootvue=new(external_kolibriCoreAppGlobal_lib_vue_default())(Object.assign({el:"rootvue",store:external_kolibriCoreAppGlobal_coreVue_vuex_store_default(),router:external_kolibriCoreAppGlobal_coreVue_router_default().initRoutes(this.routes)},this.RootVue))}},{key:"ready",value:function(){var _this2=this;return this.setupVue(),external_kolibriCoreAppGlobal_heartbeat_default().startPolling().then((function(){return _this2.store.dispatch("getNotifications"),Promise.all(kolibri_app_toConsumableArray(_this2.stateSetters.map((function(setter){return setter(_this2.store)})))).then((function(){_this2.startRootVue()}))}))}}])&&kolibri_app_defineProperties(Constructor.prototype,protoProps),staticProps&&kolibri_app_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),KolibriApp}(KolibriModule);function app_typeof(o){return app_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},app_typeof(o)}function app_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,app_toPropertyKey(descriptor.key),descriptor)}}function app_toPropertyKey(t){var i=function(t,r){if("object"!=app_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=app_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==app_typeof(i)?i:String(i)}function app_callSuper(_this,derived,args){return derived=app_getPrototypeOf(derived),function(self,call){if(call&&("object"===app_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(_this,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(derived,args||[],app_getPrototypeOf(_this).constructor):derived.apply(_this,args))}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(target,property,receiver){var base=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=app_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function app_getPrototypeOf(o){return app_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},app_getPrototypeOf(o)}function app_setPrototypeOf(o,p){return app_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},app_setPrototypeOf(o,p)}var viewPlugin=!1,DeviceManagementModule=function(_KolibriApp){function DeviceManagementModule(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DeviceManagementModule),app_callSuper(this,DeviceManagementModule,arguments)}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&app_setPrototypeOf(subClass,superClass)}(DeviceManagementModule,_KolibriApp),Constructor=DeviceManagementModule,(protoProps=[{key:"routes",get:function(){return src_routes}},{key:"RootVue",get:function(){return DeviceIndex}},{key:"pluginModule",get:function(){return pluginModule}},{key:"isPinAuthenticated",get:function(){return"true"===api.get(external_kolibriCoreAppGlobal_coreVue_vuex_constants_namespaceObject.IsPinAuthenticated)}},{key:"checkIfPinAuthenticationIsRequired",value:function(store,grantPluginAccess){var isLearnerOnlyImport=external_kolibriCoreAppGlobal_coreVue_composables_useUser_default()().isLearnerOnlyImport,isSuperuser=store.getters.isSuperuser,isFacilityAdmin=store.getters.isFacilityAdmin,userCanManageContent=store.getters.canManageContent;get(isLearnerOnlyImport)&&!isFacilityAdmin&&(isSuperuser||userCanManageContent)?(viewPlugin=viewPlugin||this.isPinAuthenticated)?grantPluginAccess():store.dispatch("displayPinModal",grantPluginAccess):grantPluginAccess()}},{key:"ready",value:function(){var _this2=this;external_kolibriCoreAppGlobal_coreVue_router_default().beforeEach((function(to,from,next){0===_this2.store.state.core.facilities.length&&_this2.store.dispatch("getFacilities").then(next,next),next()})),external_kolibriCoreAppGlobal_coreVue_router_default().afterEach((function(toRoute,fromRoute){_this2.store.dispatch("resetModuleState",{toRoute:toRoute,fromRoute:fromRoute})})),external_kolibriCoreAppGlobal_coreVue_router_default().beforeResolve((function(to,from,next){_this2.checkIfPinAuthenticationIsRequired(_this2.store,(function(){viewPlugin=!0,next()}))})),_get(app_getPrototypeOf(DeviceManagementModule.prototype),"ready",this).call(this)}}])&&app_defineProperties(Constructor.prototype,protoProps),staticProps&&app_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DeviceManagementModule}(KolibriApp);new DeviceManagementModule}()}();
//# sourceMappingURL=kolibri.plugins.device.app-0.16.0.js.map