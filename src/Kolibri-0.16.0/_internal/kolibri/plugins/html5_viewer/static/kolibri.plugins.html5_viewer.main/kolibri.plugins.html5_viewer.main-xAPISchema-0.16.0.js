/*! For license information please see kolibri.plugins.html5_viewer.main-xAPISchema-0.16.0.js.LICENSE.txt */
"use strict";(self["webpackChunkwebpack__kolibriplugins.html5_viewer.main"]=self["webpackChunkwebpack__kolibriplugins.html5_viewer.main"]||[]).push([[944],{3038:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Activity:function(){return Activity},ActivityDefinition:function(){return ActivityDefinition},Agent:function(){return Agent},Attachment:function(){return Attachment},Context:function(){return Context},Group:function(){return Group},ObjectSchema:function(){return ObjectSchema},Result:function(){return Result},Score:function(){return Score},Statement:function(){return Statement},StatementRef:function(){return StatementRef},SubStatement:function(){return SubStatement},Verb:function(){return Verb},xAPIValidationError:function(){return xAPIValidationError}});__webpack_require__(7873),__webpack_require__(1607),__webpack_require__(9762),__webpack_require__(8517),__webpack_require__(2577),__webpack_require__(4374),__webpack_require__(1105),__webpack_require__(4721),__webpack_require__(4350),__webpack_require__(2369),__webpack_require__(4868),__webpack_require__(3226),__webpack_require__(7199),__webpack_require__(335),__webpack_require__(9008),__webpack_require__(1507),__webpack_require__(5120),__webpack_require__(4537),__webpack_require__(508),__webpack_require__(590),__webpack_require__(194),__webpack_require__(9981),__webpack_require__(4886),__webpack_require__(1816),__webpack_require__(5489),__webpack_require__(3664),__webpack_require__(6366),__webpack_require__(6869),__webpack_require__(8417),__webpack_require__(7748);var lodash_isArray__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(6765),lodash_isArray__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(lodash_isArray__WEBPACK_IMPORTED_MODULE_30__),lodash_isBoolean__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(1280),lodash_isBoolean__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(lodash_isBoolean__WEBPACK_IMPORTED_MODULE_31__),lodash_isFunction__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(8946),lodash_isFunction__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(lodash_isFunction__WEBPACK_IMPORTED_MODULE_32__),lodash_isNumber__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(4157),lodash_isNumber__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(lodash_isNumber__WEBPACK_IMPORTED_MODULE_33__),lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(6877),lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_34__),lodash_isString__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(2471),lodash_isString__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(lodash_isString__WEBPACK_IMPORTED_MODULE_35__),lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(7186),lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36__),uuid__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(317),uuid__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(8223),iso8601_duration__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(7725),iri__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(5270),dayjs__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(997),dayjs__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_39__),is_language_code__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(3017),_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(9991);function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _toPropertyKey(t){var i=function(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var logging=console;function xAPIValidationError(message,fileName,lineNumber){var instance=new Error(message,fileName,lineNumber);return instance.name="xAPIValidationError",Object.setPrototypeOf(instance,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(instance,xAPIValidationError),instance}function toNumber(value){return""===value?NaN:Number(value)}function numericValid(r){var _r$split2=_slicedToArray(r.split(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.TF),2),start=_r$split2[0],end=_r$split2[1],startNumber=toNumber(start);if(lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(end))return!isNaN(startNumber);var endNumber=toNumber(end);return""===start?!isNaN(endNumber):""===end?!isNaN(startNumber):!isNaN(startNumber)&&!isNaN(endNumber)&&startNumber<endNumber}xAPIValidationError.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(xAPIValidationError,Error):xAPIValidationError.__proto__=Error;var numIFI=function(o){return Boolean(o.mbox)+Boolean(o.mbox_sha1sum)+Boolean(o.openid)+Boolean(o.account)},mboxRegex=/^mailto:[^@]+@[^@]+$/;mboxRegex.msg=function(attr){return"".concat(attr," does not start with mailto: or is not a valid email address")};var sha1Validator=/^[a-f0-9]{40}$/;sha1Validator.msg=function(attr){return"".concat(attr," is not a valid SHA1 sum")};var sha2Validator=/^([a-f0-9]{56}|[a-f0-9]{64}|[a-f0-9]{96}|[a-f0-9]{128})$/;sha2Validator.msg=function(attr){return"".concat(attr," is not a valid SHA2 hash")};var arrayValidator={test:lodash_isArray__WEBPACK_IMPORTED_MODULE_30___default(),msg:function(attr){return"".concat(attr," must be an array")}},arrayOrObjectValidator={test:function(v){return lodash_isArray__WEBPACK_IMPORTED_MODULE_30___default()(v)||lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_34___default()(v)},msg:function(attr){return"".concat(attr," must be an array or object")}},booleanValidator={test:lodash_isBoolean__WEBPACK_IMPORTED_MODULE_31___default(),msg:function(attr){return"".concat(attr," must be a boolean")}},numberValidator={test:lodash_isNumber__WEBPACK_IMPORTED_MODULE_33___default(),msg:function(attr){return"".concat(attr," must be a number")}},objectValidator={test:lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_34___default(),msg:function(attr){return"".concat(attr," must be an object")}},stringValidator={test:lodash_isString__WEBPACK_IMPORTED_MODULE_35___default(),msg:function(attr){return"".concat(attr," must be a string")}},mimeTypeValidator=/\w+\/[-.\w]+(?:\+[-.\w]+)?/;mimeTypeValidator.msg=function(attr){return"".concat(attr," is not a valid mimetype")};var languageValidator={test:function(v){return(0,is_language_code__WEBPACK_IMPORTED_MODULE_40__.isLangCode)(v).res},msg:function(attr,o){return"".concat(attr," is not a valid language code because: ").concat((0,is_language_code__WEBPACK_IMPORTED_MODULE_40__.isLangCode)(o[attr]).message)}},languageMapValidator={test:function(v){return Object.entries(v).every((function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],s=_ref2[1];return(0,is_language_code__WEBPACK_IMPORTED_MODULE_40__.isLangCode)(k).res&&lodash_isString__WEBPACK_IMPORTED_MODULE_35___default()(s)}))},msg:function(attr){return"".concat(attr," is not a valid LanguageMap")}},IRIValidator={test:function(v){var iri=new iri__WEBPACK_IMPORTED_MODULE_38__.IRI(v);return iri.scheme()&&iri.hierpart()&&iri.authority()},msg:function(attr){return"".concat(attr," is not a valid IRI")}},IRLValidator={test:function(v){var iri=new iri__WEBPACK_IMPORTED_MODULE_38__.IRI(v);return iri.scheme()&&iri.hierpart()&&iri.authority()||iri.path()},msg:function(attr){return"".concat(attr," is not a valid IRL")}},durationValidator={test:function(v){try{return(0,iso8601_duration__WEBPACK_IMPORTED_MODULE_37__.Qc)(v),!0}catch(e){return!1}},msg:function(attr){return"".concat(attr," must be an ISO 8601 duration")}},timestampValidator={test:function(v){return dayjs__WEBPACK_IMPORTED_MODULE_39___default()(v).isValid()},msg:function(attr){return"".concat(attr," must be an ISO 8601 timestamp")}},UUIDValidator={test:uuid__WEBPACK_IMPORTED_MODULE_42__.Z,msg:function(attr){return"".concat(attr," must be a valid UUID")}},interactionTypeValidator={test:function(v){return _xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.ys.has(v)},msg:function(attr){return"".concat(attr," was set as an invalid interaction type")}},noOptionsValidator={test:function(v,k,o){return _xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Aw[k].has(o.interactionType)},msg:function(key,o){return"".concat(key," specified but ").concat(o.interactionType," does not support it")}},correctResponsesValidator={warn:!0,test:function(v,k,o){var interactionType=o.interactionType,correctResponsesPattern=o.correctResponsesPattern;if(interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.TRUE_FALSE)return correctResponsesPattern.every((function(r){return"true"===r||"false"===r}));if(interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.CHOICE||interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.SEQUENCING){var choices=o.choices,choiceIds=new Set(choices.map((function(c){return c.id})));return correctResponsesPattern.every((function(r){return r.split(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Hx).every((function(id){return choiceIds.has(id)}))}))}if(interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.MATCHING){var source=o.source,target=o.target,sourceIds=new Set(source.map((function(c){return c.id}))),targetIds=new Set(target.map((function(c){return c.id})));return correctResponsesPattern.every((function(r){return r.split(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Hx).every((function(pair){var _pair$split2=_slicedToArray(pair.split(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.oO),2),s=_pair$split2[0],t=_pair$split2[1];return sourceIds.has(s)&&targetIds.has(t)}))}))}if(interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.PERFORMANCE){var steps=o.steps,stepIds=new Set(steps.map((function(c){return c.id})));return correctResponsesPattern.every((function(r){return r.split(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Hx).every((function(pair){var s=_slicedToArray(pair.split(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.oO),1)[0];return stepIds.has(s)}))}))}if(interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.LIKERT){var scale=o.scale,scaleIds=new Set(scale.map((function(c){return c.id})));return correctResponsesPattern.every((function(r){return scaleIds.has(r)}))}return interactionType!==_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.NUMERIC||correctResponsesPattern.every(numericValid)},msg:function(key,o){var interactionType=o.interactionType;return interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.TRUE_FALSE?"true-false must take either true or false as the answer":interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.CHOICE||interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.SEQUENCING?"".concat(interactionType," must only use choice ids from the item"):interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.FILL_IN||interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.LONG_FILL_IN?"".concat(interactionType," must have no non blank answers"):interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.MATCHING?"matching must only use source and target ids from the item":interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.PERFORMANCE?"performance must only use step ids and fill-in or numeric responses":interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.LIKERT?"".concat(interactionType," must only use scale ids from the item"):interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.NUMERIC?"".concat(interactionType," must have valid numeric responses"):void 0}},objectTypeValidator={test:function(v){return lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(v.objectType)||_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.E9.has(v.objectType)},msg:function(){return"objectType must either be undefined or an allowed value"}},noSubStatement={test:function(v){return!v.objectType||v.objectType!==_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.SUBSTATEMENT},msg:function(){return"object cannot be a SubStatement"}},authorityTypeValidator={test:function(v){return v.objectType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.AGENT||v.objectType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.GROUP},msg:function(){return"authority must either be an Agent or a Group"}},authorityOAuthValidator={test:function(v){return v.objectType!==_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.GROUP||2===v.member.length},msg:function(){return"if authority is a group, must specify two member Agents"}},contextPropertyValidator={test:function(v,k,o){return!(!lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(v.objectType)&&v.objectType!==_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.ACTIVITY)||(lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(o.context)||lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(o.context.revision)&&lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(o.context.platform))}},minValidator={test:function(v,k,o){return lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(o.max)||v<o.max},msg:function(){return"min must be less than max"}},maxValidator={test:function(v,k,o){return lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(o.min)||v>o.min},msg:function(){return"max must be greater than min"}},rawMinValidator={test:function(v,k,o){return lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(o.min)||v>=o.min},msg:function(){return"raw must be greater than or equal to min"}},rawMaxValidator={test:function(v,k,o){return lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(o.max)||v<=o.max},msg:function(){return"raw must be less than or equal to max"}},versionValidator={test:function(v){var parts=v.split(".").map(toNumber),_parts=_slicedToArray(parts,3),maj=_parts[0],min=_parts[1],pat=_parts[2];return!(3!==parts.length||isNaN(maj)||isNaN(min)||isNaN(pat))&&(1===maj&&0===min)},msg:function(){return"version must begin with 1.0 and be a semantic version"}},notAllowed={test:function(){return!1},msg:function(attr){return"".concat(attr," was set but is not allowed")}},EnforceValue=function(){function EnforceValue(value){_classCallCheck(this,EnforceValue),this.value=value}return _createClass(EnforceValue,[{key:"test",value:function(v){return v===this.value}},{key:"msg",value:function(attr,obj){return"".concat(attr," value did not match ").concat(this.value," received ").concat(obj[attr])}}]),EnforceValue}(),Schema=function(){function Schema(spec){_classCallCheck(this,Schema),this.spec=spec}return _createClass(Schema,[{key:"clean",value:function(obj){var _this=this,output={},_loop=function(){var keySpec=_this.spec[key],required=keySpec.required;if(lodash_isFunction__WEBPACK_IMPORTED_MODULE_32___default()(required)&&(required=required(obj)),required&&lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(obj[key]))throw new xAPIValidationError("".concat(key," required but not found"));if(lodash_isUndefined__WEBPACK_IMPORTED_MODULE_36___default()(obj[key]))keySpec.default&&lodash_isFunction__WEBPACK_IMPORTED_MODULE_32___default()(keySpec.default)&&(output[key]=keySpec.default());else{for(var validators=keySpec.validators||[],i=0;i<validators.length;i++){var v=validators[i];if(!v.test(obj[key],key,obj)){var msg=v.msg(key,obj);if(!v.warn)throw new xAPIValidationError(msg);logging.warn(msg)}}var schema=keySpec.schema;if(lodash_isFunction__WEBPACK_IMPORTED_MODULE_32___default()(schema)&&(schema=schema(obj[key],key,obj)),schema&&schema instanceof Schema)try{lodash_isArray__WEBPACK_IMPORTED_MODULE_30___default()(obj[key])?output[key]=obj[key].map((function(o){return schema.clean(o)})):output[key]=schema.clean(obj[key])}catch(e){throw new xAPIValidationError("in ".concat(key,": ").concat(e.message))}else output[key]=obj[key];keySpec.clean&&(output[key]=keySpec.clean(output[key]))}};for(var key in this.spec)_loop();return output}}]),Schema}();function IFISpecFactory(required){var ifiValidator;return{mbox:{required:function(o){return!o.mbox_sha1sum&&!o.openid&&!o.account},validators:[ifiValidator=required?{test:function(v,k,o){return 1===numIFI(o)},msg:function(){return"Did not supply exactly one IFI"}}:{test:function(v,k,o){return numIFI(o)<2},msg:function(){return"Supplied more than one IFI"}},stringValidator,mboxRegex]},mbox_sha1sum:{required:function(o){return!o.mbox&&!o.openid&&!o.account},validators:[ifiValidator,stringValidator,sha1Validator]},openid:{required:function(o){return!o.mbox&&!o.mbox_sha1sum&&!o.account},validators:[ifiValidator,stringValidator]},account:{required:function(o){return!o.mbox&&!o.mbox_sha1sum&&!o.openid},validators:[ifiValidator],schema:new Schema({homePage:{required:!0,validators:[stringValidator]},name:{required:!0,validators:[stringValidator]}})}}}var Agent=new Schema(_objectSpread({objectType:{validators:[stringValidator,new EnforceValue(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.AGENT)]},name:{validators:[stringValidator]}},IFISpecFactory(!0))),Group=new Schema(_objectSpread({objectType:{required:!0,validators:[stringValidator,new EnforceValue(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.GROUP)]},member:{required:function(obj){return!numIFI(obj)},validators:[arrayValidator],schema:Agent},name:{validators:[stringValidator]}},IFISpecFactory(!1))),Actor=function(o){return o.objectType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.GROUP?Group:Agent},Verb=new Schema({id:{required:!0,validators:[stringValidator,IRIValidator]},display:{validators:[objectValidator]}}),InteractionComponent=new Schema({id:{required:!0,validators:[stringValidator,{test:function(v){return!/\s/.test(v)},msg:function(attr){return"".concat(attr," must not contain whitespace")}}]},description:{validators:[objectValidator,languageMapValidator]}}),ActivityDefinition=new Schema({name:{validators:[objectValidator,languageMapValidator]},description:{validators:[objectValidator,languageMapValidator]},type:{validators:[stringValidator,IRIValidator]},moreInfo:{validators:[stringValidator,IRLValidator]},extensions:{validators:[objectValidator]},interactionType:{required:function(o){return o.type===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.gs},validators:[stringValidator,interactionTypeValidator]},choices:{schema:InteractionComponent,validators:[noOptionsValidator,arrayValidator],required:function(obj){return obj.interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.CHOICE||obj.interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.SEQUENCING}},source:{schema:InteractionComponent,validators:[noOptionsValidator,arrayValidator],required:function(obj){return obj.interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.MATCHING}},target:{schema:InteractionComponent,validators:[noOptionsValidator,arrayValidator],required:function(obj){return obj.interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.MATCHING}},steps:{schema:InteractionComponent,validators:[noOptionsValidator,arrayValidator],required:function(obj){return obj.interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.PERFORMANCE}},scale:{schema:InteractionComponent,validators:[noOptionsValidator,arrayValidator],required:function(obj){return obj.interactionType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.Rb.LIKERT}},correctResponsesPattern:{validators:[arrayValidator,correctResponsesValidator]}}),Activity=new Schema({id:{validators:[stringValidator,IRIValidator]},objectType:{validators:[stringValidator,new EnforceValue(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.ACTIVITY)]},definition:{schema:ActivityDefinition}}),StatementRef=new Schema({id:{validators:[UUIDValidator]},objectType:{validators:[stringValidator,new EnforceValue(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.STATEMENTREF)]}}),ObjectSchema=function(o){var objectType=o.objectType;return objectType&&objectType!==_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.ACTIVITY?objectType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.AGENT?Agent:objectType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.GROUP?Group:objectType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.STATEMENTREF?StatementRef:objectType===_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.SUBSTATEMENT?SubStatement:void 0:Activity},Score=new Schema({scaled:{validators:[numberValidator,{test:function(v){return-1<=v&&1>=v},msg:function(attr){return"".concat(attr," must be in the range -1 to 1 inclusive")}}]},min:{validators:[numberValidator,minValidator]},max:{validators:[numberValidator,maxValidator]},raw:{validators:[numberValidator,rawMinValidator,rawMaxValidator]}}),Result=new Schema({score:{schema:Score},success:{validators:[booleanValidator]},completion:{validators:[booleanValidator]},response:{validators:[stringValidator]},duration:{validators:[durationValidator]},extensions:{validators:[objectValidator]}}),coerceToArray=function(o){return lodash_isArray__WEBPACK_IMPORTED_MODULE_30___default()(o)?o:[o]},Context=new Schema({registration:{validators:[UUIDValidator]},instructor:{schema:Agent},team:{group:Group},contextActivities:{schema:new Schema({parent:{schema:Activity,validators:[arrayOrObjectValidator],clean:coerceToArray},grouping:{schema:Activity,validators:[arrayOrObjectValidator],clean:coerceToArray},category:{schema:Activity,validators:[arrayOrObjectValidator],clean:coerceToArray},other:{schema:Activity,validators:[arrayOrObjectValidator],clean:coerceToArray}})},revision:{validators:[stringValidator]},platform:{validators:[stringValidator]},language:{validators:[stringValidator,languageValidator]},statement:{schema:StatementRef},extensions:{validators:[objectValidator]}}),Attachment=new Schema({usageType:{required:!0,validators:[IRIValidator]},display:{required:!0,validators:[objectValidator,languageMapValidator]},description:{validators:[objectValidator,languageMapValidator]},contentType:{required:!0,validators:[stringValidator,mimeTypeValidator]},length:{required:!0,validators:[numberValidator]},sha2:{required:!0,validators:[stringValidator,sha2Validator]},fileUrl:{validators:[stringValidator,IRLValidator]}}),SubStatement=new Schema({id:{validators:[notAllowed]},objectType:{required:!0,validators:[new EnforceValue(_xAPIConstants__WEBPACK_IMPORTED_MODULE_41__.g.SUBSTATEMENT)]},actor:{required:!0,schema:Actor},verb:{required:!0,schema:Verb},object:{required:!0,validators:[objectTypeValidator,noSubStatement],schema:ObjectSchema},result:{schema:Result},context:{schema:Context},timestamp:{validators:[timestampValidator]},attachments:{schema:Attachment,validators:[arrayValidator]},stored:{validators:[notAllowed]},version:{validators:[notAllowed]},authority:{validators:[notAllowed]}}),Statement=new Schema({id:{validators:[UUIDValidator],default:uuid__WEBPACK_IMPORTED_MODULE_43__.Z},actor:{required:!0,schema:Actor},verb:{required:!0,schema:Verb},object:{required:!0,validators:[objectTypeValidator,contextPropertyValidator],schema:ObjectSchema},result:{schema:Result},context:{schema:Context},timestamp:{validators:[timestampValidator]},authority:{schema:Actor,validators:[authorityTypeValidator,authorityOAuthValidator]},version:{validators:[stringValidator,versionValidator],default:function(){return"1.0.0"}},attachments:{schema:Attachment,validators:[arrayValidator]}})}}]);
//# sourceMappingURL=kolibri.plugins.html5_viewer.main-xAPISchema-0.16.0.js.map